passport._define("login_tangram.js",function(){var T,baiduInstance,baidu=T=function(q,c){return baidu.dom?baidu.dom(q,c):null};baidu.version="2.0.0.1";baidu.guid="$BAIDU$";baidu.key="tangram_guid";window[baidu.guid]=window[baidu.guid]||{};baidu.check=baidu.check||function(){};baidu.lang=baidu.lang||{};baidu.forEach=function(enumerable,iterator,context){var i,n,t;if(typeof iterator=="function"&&enumerable){if(typeof enumerable.length=="number"){for(i=0,n=enumerable.length;i<n;i++){t=enumerable[i]||(enumerable.charAt&&enumerable.charAt(i));iterator.call(context||null,t,i,enumerable)}}else{if(typeof enumerable=="number"){for(i=0;i<enumerable;i++){iterator.call(context||null,i,i,i)}}else{if(typeof enumerable=="object"){for(i in enumerable){if(enumerable.hasOwnProperty(i)){iterator.call(context||null,enumerable[i],i,enumerable)}}}}}}return enumerable};baidu.type=(function(){var objectType={},nodeType=[,"HTMLElement","Attribute","Text",,,,,"Comment","Document",,"DocumentFragment",],str="Array Boolean Date Error Function Number RegExp String",toString=objectType.toString;baidu.forEach(str.split(" "),function(name){objectType["[object "+name+"]"]=name.toLowerCase();baidu["is"+name]=function(unknow){return baidu.type(unknow)==name.toLowerCase()}});return function(unknow){var s=typeof unknow;return s!="object"?s:unknow==null?"null":unknow._type_||objectType[toString.call(unknow)]||nodeType[unknow.nodeType]||(unknow==unknow.window?"Window":"")||"object"}})();baidu.isDate=function(unknow){return baidu.type(unknow)=="date"&&unknow.toString()!="Invalid Date"&&!isNaN(unknow)};baidu.isElement=function(unknow){return baidu.type(unknow)=="HTMLElement"};baidu.isEnumerable=function(unknow){return unknow!=null&&typeof unknow=="object"&&(typeof unknow.length=="number"||typeof unknow[0]!="undefined")};baidu.isNumber=function(unknow){return baidu.type(unknow)=="number"&&isFinite(unknow)};baidu.isPlainObject=function(unknow){var key,hasOwnProperty=Object.prototype.hasOwnProperty;if(baidu.type(unknow)!="object"){return false}if(unknow.constructor&&!hasOwnProperty.call(unknow,"constructor")&&!hasOwnProperty.call(unknow.constructor.prototype,"isPrototypeOf")){return false}for(key in unknow){}return key===undefined||hasOwnProperty.call(unknow,key)};baidu.isObject=function(unknow){return typeof unknow==="function"||(typeof unknow==="object"&&unknow!=null)};baidu.extend=function(depthClone,object){var second,options,key,src,copy,i=1,n=arguments.length,result=depthClone||{},copyIsArray,clone;baidu.isBoolean(depthClone)&&(i=2)&&(result=object||{});!baidu.isObject(result)&&(result={});for(;i<n;i++){options=arguments[i];if(baidu.isObject(options)){for(key in options){src=result[key];copy=options[key];if(src===copy){continue}if(baidu.isBoolean(depthClone)&&depthClone&&copy&&(baidu.isPlainObject(copy)||(copyIsArray=baidu.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&baidu.isArray(src)?src:[]}else{clone=src&&baidu.isPlainObject(src)?src:{}}result[key]=baidu.extend(depthClone,clone,copy)}else{if(copy!==undefined){result[key]=copy}}}}}return result};baidu.createChain=function(chainName,fn,constructor){var className=chainName=="dom"?"$DOM":"$"+chainName.charAt(0).toUpperCase()+chainName.substr(1);var slice=Array.prototype.slice;var chain=baidu[chainName]=baidu[chainName]||fn||function(object){return baidu.extend(object,baidu[chainName].fn)};chain.extend=function(extended){var method;for(method in extended){chain[method]=function(){var id=arguments[0];chainName=="dom"&&baidu.type(id)=="string"&&(id="#"+id);var object=chain(id);var result=object[method].apply(object,slice.call(arguments,1));return baidu.type(result)=="$DOM"?result.get(0):result}}return baidu.extend(baidu[chainName].fn,extended)};baidu[chainName][className]=baidu[chainName][className]||constructor||function(){};chain.fn=baidu[chainName][className].prototype;return chain};baidu.overwrite=function(Class,list,fn){for(var i=list.length-1;i>-1;i--){Class.prototype[list[i]]=fn(list[i])}return Class};baidu.object=baidu.object||{};baidu.object.isPlain=baidu.isPlainObject;baidu.createChain("string",function(string){var type=baidu.type(string),str=new String(~"string|number".indexOf(type)?string:type),pro=String.prototype;baidu.forEach(baidu.string.$String.prototype,function(fn,key){pro[key]||(str[key]=fn)});return str});baidu.string.extend({trim:function(){var trimer=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g");return function(){return this.replace(trimer,"")}}()});baidu.createChain("array",function(array){var pro=baidu.array.$Array.prototype,ap=Array.prototype,key;baidu.type(array)!="array"&&(array=[]);for(key in pro){ap[key]||(array[key]=pro[key])}return array});baidu.overwrite(baidu.array.$Array,"concat slice".split(" "),function(key){return function(){return baidu.array(Array.prototype[key].apply(this,arguments))}});baidu.array.extend({indexOf:function(match,fromIndex){baidu.check(".+(,number)?","baidu.array.indexOf");var len=this.length;(fromIndex=fromIndex|0)<0&&(fromIndex=Math.max(0,len+fromIndex));for(;fromIndex<len;fromIndex++){if(fromIndex in this&&this[fromIndex]===match){return fromIndex}}return -1}});baidu.createChain("Callbacks",function(options){var optionsCache={};function createOptions(options){var object=optionsCache[options]={};baidu.forEach(options.split(/\s+/),function(flag,_){object[flag]=true});return object}options=typeof options==="string"?(optionsCache[options]||createOptions(options)):baidu.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else{if(memory){list=[]}else{self.disable()}}}},self={add:function(){if(list){var start=list.length;(function add(args){baidu.forEach(args,function(arg,_){if((typeof arg==="function")&&(!options.unique||!self.has(arg))){list.push(arg)}else{if(arg&&arg.length){add(arg)}}})})(arguments);if(firing){firingLength=list.length}else{if(memory){firingStart=start;fire(memory)}}}return this},remove:function(){if(list){baidu.forEach(arguments,function(arg,_){var index;while((index=baidu.array(list).indexOf(arg,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return baidu.array(list).indexOf(fn)>-1},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return !list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return !stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return !!fired}};return self},function(){});baidu.createChain("Deferred",function(func){var core_slice=Array.prototype.slice;var tuples=[["resolve","done",baidu.Callbacks("once memory"),"resolved"],["reject","fail",baidu.Callbacks("once memory"),"rejected"],["notify","progress",baidu.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return baidu.Deferred(function(newDefer){baidu.forEach(tuples,function(tuple,i){var action=tuple[0],fn=fns[i];deferred[tuple[1]]((typeof fn==="function")?function(){var returned=fn.apply(this,arguments);if(returned&&(typeof returned.promise==="function")){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned])}}:newDefer[action])});fns=null}).promise()},promise:function(obj){return typeof obj==="object"?baidu.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;baidu.forEach(tuples,function(tuple,i){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}baidu.extend(baidu,{when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&(typeof subordinate.promise==="function"))?length:0,deferred=remaining===1?subordinate:baidu.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else{if(!(--remaining)){deferred.resolveWith(contexts,values)}}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&(typeof resolveValues[i].promise==="function")){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});return deferred},function(){});baidu._util_=baidu._util_||{};baidu.global=baidu.global||(function(){var global=baidu._util_.$global=window[baidu.guid];return function(key,value,overwrite){if(typeof value!="undefined"){value=overwrite&&typeof global[key]!="undefined"?global[key]:value;global[key]=value}else{if(key&&typeof global[key]=="undefined"){global[key]={}}}return global[key]}})();baidu.browser=baidu.browser||function(){var ua=navigator.userAgent;var result={isStrict:document.compatMode=="CSS1Compat",isGecko:/gecko/i.test(ua)&&!/like gecko/i.test(ua),isWebkit:/webkit/i.test(ua)};try{/(\d+\.\d+)/.test(external.max_version)&&(result.maxthon=+RegExp["\x241"])}catch(e){}switch(true){case /msie (\d+\.\d+)/i.test(ua):result.ie=document.documentMode||+RegExp["\x241"];break;case /chrome\/(\d+\.\d+)/i.test(ua):result.chrome=+RegExp["\x241"];break;case /(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(ua)&&!/chrome/i.test(ua):result.safari=+(RegExp["\x241"]||RegExp["\x242"]);break;case /firefox\/(\d+\.\d+)/i.test(ua):result.firefox=+RegExp["\x241"];break;case /opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(ua):result.opera=+(RegExp["\x246"]||RegExp["\x242"]);break}baidu.extend(baidu,result);return result}();baidu.id=function(){var maps=baidu.global("_maps_id"),key=baidu.key;baidu.global("_counter",1,true);return function(object,command){var e,str_1=baidu.isString(object),obj_1=baidu.isObject(object),id=obj_1?object[key]:str_1?object:"";if(baidu.isString(command)){switch(command){case"get":return obj_1?id:maps[id];break;case"remove":case"delete":if(e=maps[id]){if(baidu.browser.ie&&baidu.isElement(e)){e.removeAttribute(key)}else{delete e[key]}delete maps[id]}return id;break;case"decontrol":!(e=maps[id])&&obj_1&&(object[key]=id=baidu.id());id&&delete maps[id];return id;break;default:if(str_1){(e=maps[id])&&delete maps[id];e&&(maps[e[key]=command]=e)}else{if(obj_1){id&&delete maps[id];maps[object[key]=command]=object}}return command}}if(obj_1){!id&&(maps[object[key]=id=baidu.id()]=object);return id}else{if(str_1){return maps[object]}}return"TANGRAM__PSP_"+baidu._util_.$global._counter++}}();baidu.id.key="tangram_guid";baidu.merge=function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first};baidu.array.extend({unique:function(fn){var len=this.length,result=this.slice(0),i,datum;if("function"!=typeof fn){fn=function(item1,item2){return item1===item2}}while(--len>0){datum=result[len];i=len;while(i--){if(fn(datum,result[i])){result.splice(len,1);break}}}len=this.length=result.length;for(i=0;i<len;i++){this[i]=result[i]}return this}});baidu.query=baidu.query||(function(){var rId=/^(\w*)#([\w\-\$]+)$/,rId0=/^#([\w\-\$]+)$/;rTag=/^\w+$/,rClass=/^(\w*)\.([\w\-\$]+)$/,rComboClass=/^(\.[\w\-\$]+)+$/;rDivider=/\s*,\s*/,rSpace=/\s+/g,slice=Array.prototype.slice;function query(selector,context){var t,x,id,dom,tagName,className,arr,list,array=[];if(rId.test(selector)){id=RegExp.$2;tagName=RegExp.$1||"*";baidu.forEach(context.getElementsByTagName(tagName),function(dom){dom.id==id&&array.push(dom)})}else{if(rTag.test(selector)||selector=="*"){baidu.merge(array,context.getElementsByTagName(selector))}else{if(rClass.test(selector)){arr=[];tagName=RegExp.$1;className=RegExp.$2;t=" "+className+" ";if(context.getElementsByClassName){arr=context.getElementsByClassName(className)}else{baidu.forEach(context.getElementsByTagName("*"),function(dom){dom.className&&(" "+dom.className+" ").indexOf(t)>-1&&(arr.push(dom))})}if(tagName&&(tagName=tagName.toUpperCase())){baidu.forEach(arr,function(dom){dom.tagName.toUpperCase()===tagName&&array.push(dom)})}else{baidu.merge(array,arr)}}else{if(rComboClass.test(selector)){list=selector.substr(1).split(".");baidu.forEach(context.getElementsByTagName("*"),function(dom){if(dom.className){t=" "+dom.className+" ";x=true;baidu.forEach(list,function(item){t.indexOf(" "+item+" ")==-1&&(x=false)});x&&array.push(dom)}})}}}}return array}function queryCombo(selector,context){var a,s=selector,id="__tangram__",array=[];if(!context&&rId0.test(s)&&(a=document.getElementById(s.substr(1)))){return[a]}context=context||document;if(context.querySelectorAll){if(context.nodeType==1&&!context.id){context.id=id;a=context.querySelectorAll("#"+id+" "+s);context.id=""}else{a=context.querySelectorAll(s)}return a}else{if(s.indexOf(" ")==-1){return query(s,context)}baidu.forEach(query(s.substr(0,s.indexOf(" ")),context),function(dom){baidu.merge(array,queryCombo(s.substr(s.indexOf(" ")+1),dom))})}return array}return function(selector,context,results){if(!selector||typeof selector!="string"){return results||[]}var arr=[];selector=selector.replace(rSpace," ");results&&baidu.merge(arr,results)&&(results.length=0);baidu.forEach(selector.indexOf(",")>0?selector.split(rDivider):[selector],function(item){baidu.merge(arr,queryCombo(item,context))});return baidu.merge(results||[],baidu.array(arr).unique())}})();baidu.createChain("dom",function(selector,context){var e,me=new baidu.dom.$DOM(context);if(!selector){return me}if(selector._type_=="$DOM"){return selector}else{if(selector.nodeType||selector==selector.window){me[0]=selector;me.length=1;return me}else{if(selector.length&&me.toString.call(selector)!="[object String]"){return baidu.merge(me,selector)}else{if(typeof selector=="string"){if(selector.charAt(0)=="<"&&selector.charAt(selector.length-1)==">"&&selector.length>2){if(baidu.dom.createElements){baidu.merge(me,baidu.dom.createElements(selector))}}else{baidu.query(selector,context,me)}}else{if(typeof selector=="function"){return me.ready?me.ready(selector):me}}}}}return me},function(context){this.length=0;this._type_="$DOM";this.context=context||document}).extend({size:function(){return this.length},splice:function(){},get:function(index){if(typeof index=="number"){return index<0?this[this.length+index]:this[index]}return Array.prototype.slice.call(this,0)},toArray:function(){return this.get()}});baidu.dom.extend({ready:function(){var readyBound=false,readyList=[],DOMContentLoaded;if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);ready()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);ready()}}}}function ready(){if(!ready.isReady){ready.isReady=true;for(var i=0,j=readyList.length;i<j;i++){readyList[i]()}}}function doScrollCheck(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}ready()}function bindReady(){if(readyBound){return}readyBound=true;if(document.readyState==="complete"){ready.isReady=true}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",ready);var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel){doScrollCheck()}}}}}bindReady();return function(fn){if(fn){ready.isReady?fn():readyList.push(fn)}return this}}()});baidu.dom.ready=baidu.dom.fn.ready;baidu.support=baidu.support||function(){var div=document.createElement("div"),support,a,input;div.innerHTML='<a href="/a" style="top:1px; float: left; opacity: .55">Tangram</a><input type="checkbox">';a=div.getElementsByTagName("A")[0];input=div.getElementsByTagName("input")[0];input.checked=true;support={opacity:a.style.opacity==="0.55",cssFloat:!!a.style.cssFloat,noCloneChecked:input.cloneNode(true).checked,noCloneEvent:true};if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick")}baidu(function(){var body=document.getElementsByTagName("body")[0],container=document.createElement("div"),div=document.createElement("div"),paddingMarginBorder="padding: 0; margin: 0; border: ",boundString="left: 0; top: 0; width: 0px; height: 0px; ",visibleString=boundString+paddingMarginBorder+"0; visibility: hidden;",styleString=boundString+paddingMarginBorder+"5px solid #000; position: absolute;",outer,inner,select,opt,table;container.style.cssText="position: static;"+visibleString;body.insertBefore(container,body.firstChild);container.appendChild(div);div.style.cssText="position: absolute;"+visibleString;div.innerHTML='<div style="'+styleString+'display: bloack;"><div style="'+paddingMarginBorder+'0; display: block; overflow: hidden;"></div></div><table style="'+styleString+'" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';outer=div.firstChild;inner=outer.firstChild;table=outer.nextSibling;support.hasBorderWidth=inner.offsetTop>=5;support.hasTableCellBorderWidth=table.rows[0].cells[0].offsetTop>=5;inner.style.position="fixed";inner.style.top="20px";support.fixedPosition=inner.offsetTop===20||inner.offsetTop===15;support.deleteExpando=true;try{delete div.test}catch(e){support.deleteExpando=false}select=document.createElement("select");opt=select.appendChild(document.createElement("option"));select.disabled=true;support.optDisabled=!opt.disabled;support.optSelected=opt.selected;div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";var input=div.getElementsByTagName("input")[0];support.checkOn=(input.value==="on");support.htmlSerialize=!!div.getElementsByTagName("link").length;support.leadingWhitespace=(div.firstChild.nodeType===3);support.getSetAttribute=div.className!=="t";support.pixelMargin=true;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";if(window.getComputedStyle){support.pixelMargin=(window.getComputedStyle(div,null)||{}).marginTop!=="1%"}var input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";support.hrefNormalized=(a.getAttribute("href")==="/a");support.style=/top/.test(a.getAttribute("style"));support.enctype=!!document.createElement("form").enctype;body.removeChild(container);container=div=outer=inner=table=null});return support}();baidu.createChain("event",function(){var lastEvt={};return function(event,json){switch(baidu.type(event)){case"object":return lastEvt.originalEvent===event?lastEvt:(lastEvt=new baidu.event.$Event(event));case"$Event":return event;case"string":var e=new baidu.event.$Event(event);typeof json=="object"&&baidu.forEach(e,json);return e}}}(),function(event){var e,t,f;var me=this;this._type_="$Event";if(typeof event=="object"&&event.type){me.originalEvent=e=event;baidu.forEach("altKey bubbles button buttons cancelable clientX clientY ctrlKey commandKey currentTarget fromElement metaKey screenX screenY shiftKey toElement type view which triggerData".split(" "),function(item){me[item]=e[item]});me.target=me.srcElement=e.srcElement||((t=e.target)&&(t.nodeType==3?t.parentNode:t));me.relatedTarget=e.relatedTarget||((t=e.fromElement)&&(t===me.target?e.toElement:t));me.keyCode=me.which=e.keyCode||e.which;if(!me.which&&e.button!==undefined){me.which=e.button&1?1:(e.button&2?3:(e.button&4?2:0))}var doc=document.documentElement,body=document.body;me.pageX=e.pageX||(e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0));me.pageY=e.pageY||(e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0));me.data}typeof event=="string"&&(this.type=event);this.timeStamp=new Date().getTime()}).extend({stopPropagation:function(){var e=this.originalEvent;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=true)},preventDefault:function(){var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=false)}});baidu.dom.extend({each:function(iterator){baidu.check("function","baidu.dom.each");var i,result,n=this.length;for(i=0;i<n;i++){result=iterator.call(this[i],i,this[i],this);if(result===false||result=="break"){break}}return this}});baidu.dom.match=function(){var reg=/^[\w\#\-\$\.\*]+$/,div=document.createElement("DIV");div.id="__tangram__";return function(array,selector,context){var root,results=baidu.array();switch(baidu.type(selector)){case"$DOM":for(var x=array.length-1;x>-1;x--){for(var y=selector.length-1;y>-1;y--){array[x]===selector[y]&&results.push(array[x])}}break;case"function":baidu.forEach(array,function(item,index){selector.call(item,index)&&results.push(item)});break;case"HTMLElement":baidu.forEach(array,function(item){item==selector&&results.push(item)});break;case"string":var da=baidu.query(selector,context||document);baidu.forEach(array,function(item){if(root=getRoot(item)){var t=root.nodeType==1?baidu.query(selector,root):da;for(var i=0,n=t.length;i<n;i++){if(t[i]===item){results.push(item);break}}}});results=results.unique();break;default:results=baidu.array(array).unique();break}return results};function getRoot(dom){var result=[],i;while(dom=dom.parentNode){dom.nodeType&&result.push(dom)}for(var i=result.length-1;i>-1;i--){if(result[i].nodeType==1||result[i].nodeType==9){return result[i]}}return null}}();baidu.dom.extend({is:function(selector){return baidu.dom.match(this,selector).length>0}});baidu.dom.extend({triggerHandler:function(type,triggerData){var eb=baidu._util_.eventBase;baidu.forEach(this,function(item){eb.fireHandler(item,type,triggerData)});return this}});baidu.dom._g=function(id){return baidu.type(id)==="string"?document.getElementById(id):id};baidu.dom.extend({contains:function(contained){contained=baidu.dom(contained);if(this.size()<=0||contained.size()<=0){return false}var container=this[0];contained=contained[0];return container.contains?container!=contained&&container.contains(contained):!!(container.compareDocumentPosition(contained)&16)}});baidu.dom.contains=function(container,contained){var g=baidu.dom._g;container=g(container);contained=g(contained);return container.contains?container!=contained&&container.contains(contained):!!(container.compareDocumentPosition(contained)&16)};baidu.dom.extend({closest:function(selector,context){var results=baidu.array();baidu.forEach(this,function(dom){var t=[dom];while(dom=dom.parentNode){dom.nodeType&&t.push(dom)}t=baidu.dom.match(t,selector,context);t.length&&results.push(t[0])});return baidu.dom(results.unique())}});baidu._util_.eventBase=function(){var eventsCache={};var proxyCache={};var ae=window.addEventListener?function(target,name,fn){target.addEventListener(name,fn,false)}:window.attachEvent?function(target,name,fn){target.attachEvent("on"+name,fn)}:function(){};var proxy=function(target,name,fnAry){var id=baidu.id(target);var c=proxyCache[id]=proxyCache[id]||{};if(c[name]){return}c[name]=1;var call=function(e){var args=Array.prototype.slice.call(arguments,1);args.unshift(e=baidu.event(e));if(!e.currentTarget){e.currentTarget=target}for(var i=0,l=fnAry.length;i<l;i+=2){fnAry[i].apply(this,args)}};ae(target,name,call)};var addEvent=function(target,name,fn,selector,data){var call=function(e){var t=baidu.dom(e.target);if(data&&!e.data){e.data=data}if(e.triggerData){[].push.apply(arguments,e.triggerData)}if(!selector){return e.result=fn.apply(target,arguments)}if(t.is(selector)||t.is(selector+" *")){return e.result=fn.apply(baidu.dom(e.target).closest(selector)[0],arguments)}};var tangId=baidu.id(target);var c=eventsCache[tangId]||(eventsCache[tangId]={});var eventArray=c[name]||(c[name]=[]);eventArray.push(call,fn);proxy(target,name,eventArray);return call};var removeEvent=function(target,name,fn,selector){var tangId;if(!(tangId=baidu.id(target,"get"))){return}var c=eventsCache[tangId]||(eventsCache[tangId]={});var fix_event={mouseenter:"mouseover",mouseleave:"mouseout",focusin:"focus",focusout:"blur"};var eventArray=c[name]||(c[name]=[]);if(fix_event[name]){c[fix_event[name]]=[]}for(var i=eventArray.length-1,f;i>=0;i--){if(f=eventArray[i],f===fn){eventArray.splice(i-1,2)}}};var removeAllEvent=function(target,name){var tangId;if(!(tangId=baidu.id(target,"get"))){return}var c=eventsCache[tangId]||(eventsCache[tangId]={});var remove=function(name){var eventArray=c[name]||(c[name]=[]);for(var i=eventArray.length-1,fn;i>=0;i-=2){fn=eventArray[i],removeEvent(target,name,fn)}};if(name){remove(name)}else{for(var name in c){remove(name)}}};var fireHandler=function(target,name,triggerData){var tangId;if(!(tangId=baidu.id(target,"get"))){return}var c=eventsCache[tangId]||(eventsCache[tangId]={});var eventArray=c[name]||(c[name]=[]);var event=baidu.event({type:name});var args=[event];if(triggerData){event.triggerData=triggerData,args.push.apply(args,triggerData)}for(var i=0,l=eventArray.length;i<l;i+=2){eventArray[i].apply(this,args)}};var getHandler=function(target){var tangId;if(!(tangId=baidu.id(target,"get"))){return}var c=eventsCache[tangId]||(eventsCache[tangId]={});var ret={},arr;for(var event in c){arr=ret[event]=[];ce=c[event];for(var i=1,l=ce.length;i<l;i+=2){arr.push(ce[i])}}return ret};var special=function(name){switch(name){case"focusin":case"focusout":if(!/firefox/i.test(navigator.userAgent)){return false}var object={},fixName=name=="focusin"?"focus":"blur";object[name]=function(data,fn){if(typeof data=="function"){fn=data,data=null}var me=this;if(!fn){return this.triggerHandler(name,data)}else{var call=function(){me.triggerHandler(name)};baidu.forEach(this,function(item){baidu("textarea,select,input,button,a",item).on(fixName,call)});return this._on(name,data,fn),this}};return baidu.dom.extend(object),true;case"mouseenter":case"mouseleave":if(/msie/i.test(navigator.userAgent)){return false}var object={},fixName=name=="mouseenter"?"mouseover":"mouseout";var contains=baidu.dom.contains;object[name]=function(data,fn){if(arguments.length==0){return this.trigger(name)}if(typeof data=="function"){fn=data,data=null}var me=this;var call=function(event){related=event.relatedTarget;if(!related||(related!==this&&!contains(this,related))){me.triggerHandler(name)}};baidu.forEach(this,function(item){this.on(fixName,call)},this);return this._on(name,data,fn),this};return baidu.dom.extend(object),true}return false};return{add:function(dom,event,fn,selector,data){return addEvent(dom,event,fn,selector,data)},get:function(dom){return getHandler(dom)},remove:function(dom,event,fn,selector){var id;if((id=baidu.id(dom,"get"))&&fn&&fn["_"+id+"_"+event]){fn=fn["_"+id+"_"+event],delete fn["_"+id+"_"+event]}if(typeof fn=="function"){return removeEvent(dom,event,fn,selector)}else{return removeAllEvent(dom,event,selector)}},removeAll:function(dom){return removeAllEvent(dom)},fireHandler:function(dom,event,triggerData){return fireHandler(dom,event,triggerData)},method:function(name){if(arguments.length>1){for(var i=0,l=arguments.length;i<l;i++){this.method(arguments[i])}return this}if(!special(name)){var object={};object[name]=function(data,fn){if(arguments.length==0){return this.trigger(name)}else{if(typeof data=="function"){fn=data,data=null}return this._on(name,data,fn)}};baidu.dom.extend(object)}},_getEventsLength:function(tang,evtName){var len=0,item;if(tang){item=eventsCache[baidu.id(tang[0]||tang,"get")];if(evtName){item[evtName]&&(len=item[evtName].length)}else{for(var i in item){len+=item[i].length}}}else{for(var i in eventsCache){item=eventsCache[i];for(var j in item){len+=item[j].length}}}return len/2}}}();baidu._util_.eventBase.method("blur","change","click","dblclick","error","focus","focusin","focusout","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","resize","scroll","select","submit","load","unload","contextmenu");baidu.dom.g=function(id){if(!id){return null}if("string"==typeof id||id instanceof String){return document.getElementById(id)}else{if(id.nodeName&&(id.nodeType==1||id.nodeType==9)){return id}}return null};baidu.dom.extend({on:function(events,selector,data,fn){var eb=baidu._util_.eventBase;var specials={mouseenter:1,mouseleave:1,focusin:1,focusout:1};if(typeof selector=="object"&&selector){fn=data,data=selector,selector=null}else{if(typeof data=="function"){fn=data,data=null}else{if(typeof selector=="function"){fn=selector,selector=data=null}}}if(typeof events=="string"){events=events.split(/[ ,]+/);this.each(function(){baidu.forEach(events,function(event){if(specials[event]){baidu(this)[event](data,fn)}else{eb.add(this,event,fn,selector,data)}},this)})}else{if(typeof events=="object"){if(fn){fn=null}baidu.forEach(events,function(fn,eventName){this.on(eventName,selector,data,fn)},this)}}return this},_on:function(name,data,fn){var eb=baidu._util_.eventBase;this.each(function(){eb.add(this,name,fn,undefined,data)});return this}});baidu.event.on=baidu.on=function(element,evtName,handler){element=baidu.dom.g(element);baidu.dom(element).on(evtName.replace(/^\s*on/,""),handler);return element};void function(){var ajaxLocation=location?location.href:document.location.href,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rprotocol=/^\/\//,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,rhash=/#.*$/,rbracket=/\[\]$/,rnoContent=/^(?:GET|HEAD)$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,allTypes=["*/"]+["*"],prefilters={},transports={},lastModified={},etag={},ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function parseXML(data){var xml,tmp;if(!data||baidu.type(data)!=="string"){return null}try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){throw new Error("Invalid XML: "+data)}return xml}function parseJSON(data){if(!data||baidu.type(data)!=="string"){return null}data=baidu.string(data).trim();if(window.JSON&&window.JSON.parse){return window.JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))()}throw new Error("Invalid JSON: "+data)}function globalEval(data){if(data&&/\S/.test(data)){(window.execScript||function(data){window["eval"].call(window,data)})(data)}}function toPrefiltersOrTransports(structure){return function(expression,func){if(baidu.type(expression)!=="string"){func=expression;expression="*"}var dataTypes=expression.toLowerCase().split(/\s+/),placeBefore,array;if(baidu.type(func)==="function"){for(var i=0,item;item=dataTypes[i];i++){placeBefore=/^\+/.test(item);placeBefore&&(item=item.substr(1)||"*");array=structure[item]=structure[item]||[];array[placeBefore?"unshift":"push"](func)}}}}function ajaxHandleResponses(opts,tangXHR,responses){var ct,type,finalDataType,firstDataType,contents=opts.contents,dataTypes=opts.dataTypes,responseFields=opts.responseFields;for(type in responseFields){if(type in responses){tangXHR[responseFields[type]]=responses[type]}}while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=opts.mimeType||tangXHR.getResponseHeader("content-type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||opts.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(opts,response){var dataTypes=opts.dataTypes.slice(),prev=dataTypes[0],converters={},conv,array;opts.dataFilter&&(response=opts.dataFilter(response,opts.dataType));if(dataTypes[1]){for(var i in opts.converters){converters[i.toLowerCase()]=opts.converters[i]}}for(var i=0,curr;curr=dataTypes[++i];){if(curr!=="*"){if(prev!=="*"&&prev!==curr){conv=converters[prev+" "+curr]||converters["* "+curr];if(!conv){for(var key in converters){array=key.split(" ");if(array[1]===curr){conv=converters[prev+" "+array[0]]||converters["* "+array[0]];if(conv){if(conv===true){conv=converters[key]}else{if(converters[key]!==true){curr=array[0];dataTypes.splice(i--,0,curr)}}break}}}}if(conv!==true){if(conv&&opts["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+curr}}}}}prev=curr}}return{state:"success",data:response}}function inspectPrefiltersOrTransports(structure,options,originalOptions,tangXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var selection,list=structure[dataType],length=list?list.length:0,executeOnly=(structure===prefilters);for(var i=0;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,tangXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,tangXHR,selection,inspected)}}}if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,tangXHR,"*",inspected)}return selection}baidu.createChain("ajax",function(url,options){if(baidu.object.isPlain(url)){options=url;url=undefined}options=options||{};var opts=baidu.ajax.setup({},options),callbackContext=opts.context||opts,fireGlobals,ifModifiedKey,parts,deferred=baidu.Deferred(),completeDeferred=baidu.Callbacks("once memory"),statusCode=opts.statusCode||{},state=0,requestHeadersNames={},requestHeaders={},strAbort="canceled",responseHeadersString,responseHeaders,transport,tangXHR=baidu.extend(new baidu.ajax.$Ajax(url,opts),{readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){!state&&(opts.mimeType=type);return this},abort:function(statusText){statusText=statusText||strAbort;transport&&transport.abort(statusText);done(0,statusText);return this}});var timeoutTimer;function done(status,nativeStatusText,responses,headers){var statusText=nativeStatusText,isSuccess,success,error,response,modified;if(state===2){return}state=2;timeoutTimer&&clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";tangXHR.readyState=status>0?4:0;responses&&(response=ajaxHandleResponses(opts,tangXHR,responses));if(status>=200&&status<300||status===304){if(opts.ifModified){modified=tangXHR.getResponseHeader("Last-Modified");modified&&(lastModified[ifModifiedKey]=modified);modified=tangXHR.getResponseHeader("Etag");modified&&(etag[ifModifiedKey]=modified)}if(status===304){statusText="notmodified";isSuccess=true}else{isSuccess=ajaxConvert(opts,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=statusText;if(!statusText||status){statusText="error";status<0&&(status=0)}}tangXHR.status=status;tangXHR.statusText=""+(nativeStatusText||statusText);if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,tangXHR])}else{deferred.rejectWith(callbackContext,[tangXHR,statusText,error])}tangXHR.statusCode(statusCode);statusCode=undefined;completeDeferred.fireWith(callbackContext,[tangXHR,statusText])}deferred.promise(tangXHR);tangXHR.success=tangXHR.done;tangXHR.error=tangXHR.fail;tangXHR.complete=completeDeferred.add;tangXHR.statusCode=function(map){if(map){if(state<2){for(var i in map){statusCode[i]=[statusCode[i],map[i]]}}else{tangXHR.always(map[tangXHR.status])}}return this};opts.url=((url||opts.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");opts.dataTypes=baidu.string(opts.dataType||"*").trim().toLowerCase().split(/\s+/);if(opts.crossDomain==null){parts=rurl.exec(opts.url.toLowerCase());opts.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))))}if(opts.data&&opts.processData&&baidu.type(opts.data)!=="string"){opts.data=baidu.ajax.param(opts.data,opts.traditional)}inspectPrefiltersOrTransports(prefilters,opts,options,tangXHR);if(state===2){return""}fireGlobals=opts.global;opts.type=opts.type.toUpperCase();opts.hasContent=!rnoContent.test(opts.type);if(!opts.hasContent){if(opts.data){opts.url+=(~opts.url.indexOf("?")?"&":"?")+opts.data;delete opts.data}ifModifiedKey=opts.url;if(opts.cache===false){var now=new Date().getTime(),ret=opts.url.replace(rts,"$1_="+now);opts.url=ret+(ret===opts.url?(~opts.url.indexOf("?")?"&":"?")+"_="+now:"")}}if(opts.data&&opts.hasContent&&opts.contentType!==false||options.contentType){tangXHR.setRequestHeader("Content-Type",opts.contentType)}if(opts.ifModified){ifModifiedKey=ifModifiedKey||opts.url;lastModified[ifModifiedKey]&&tangXHR.setRequestHeader("If-Modified-Since",lastModified[ifModifiedKey]);etag[ifModifiedKey]&&tangXHR.setRequestHeader("If-None-Match",etag[ifModifiedKey])}tangXHR.setRequestHeader("Accept",opts.dataTypes[0]&&opts.accepts[opts.dataTypes[0]]?opts.accepts[opts.dataTypes[0]]+(opts.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):opts.accepts["*"]);for(var i in opts.headers){tangXHR.setRequestHeader(i,opts.headers[i])}if(opts.beforeSend&&(opts.beforeSend.call(callbackContext,tangXHR,opts)===false||state===2)){return tangXHR.abort()}strAbort="abort";for(var i in {success:1,error:1,complete:1}){tangXHR[i](opts[i])}transport=inspectPrefiltersOrTransports(transports,opts,options,tangXHR);if(!transport){done(-1,"No Transport")}else{tangXHR.readyState=1;if(opts.async&&opts.timeout>0){timeoutTimer=setTimeout(function(){tangXHR.abort("timeout")},opts.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}return tangXHR},function(url,options){this.url=url;this.options=options});baidu.ajax.settings={url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":parseJSON,"text xml":parseXML},flatOptions:{context:true,url:true}};function ajaxExtend(target,src){var flatOpt=baidu.ajax.settings.flatOptions||{},deep;for(var i in src){if(src[i]!==undefined){(flatOpt[i]?target:(deep||(deep={})))[i]=src[i]}}deep&&baidu.extend(true,target,deep)}baidu.ajax.setup=function(target,settings){if(settings){ajaxExtend(target,baidu.ajax.settings)}else{settings=target;target=baidu.ajax.settings}ajaxExtend(target,settings);return target};function addParam(array,key,val){val=baidu.type(val)==="function"?val():(val||"");array.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}function buildParams(array,key,val,traditional){if(baidu.type(val)==="array"){baidu.forEach(val,function(item,index){if(traditional||rbracket.test(key)){addParam(array,key,item)}else{buildParams(array,key+"["+(typeof item==="object"?index:"")+"]",item,traditional)}})}else{if(!traditional&&baidu.type(val)==="object"){for(var i in val){buildParams(array,key+"["+i+"]",val[i],traditional)}}else{addParam(array,key,val)}}}baidu.ajax.param=function(src,traditional){var ret=[];if(baidu.type(src)==="array"){baidu.forEach(src,function(item){addParam(ret,item.name,item.value)})}else{for(var i in src){buildParams(ret,i,src[i],traditional)}}return ret.join("&").replace(/%20/g,"+")};baidu.ajax.prefilter=toPrefiltersOrTransports(prefilters);baidu.ajax.transport=toPrefiltersOrTransports(transports);var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=new Date().getTime();baidu.ajax.setup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(baidu.id.key+"_"+(nonce++));this[callback]=true;return callback}});baidu.ajax.prefilter("json jsonp",function(opts,originalSettings,tangXHR){var callbackName,overwritten,responseContainer,data=opts.data,url=opts.url,hasCallback=opts.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&baidu.type(data)==="string"&&!(opts.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(opts.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=opts.jsonpCallback=baidu.type(opts.jsonpCallback)==="function"?opts.jsonpCallback():opts.jsonpCallback;overwritten=window[callbackName];if(replaceInUrl){opts.url=url.replace(rjsonp,"$1"+callbackName)}else{if(replaceInData){opts.data=data.replace(rjsonp,"$1"+callbackName)}else{if(hasCallback){opts.url+=(/\?/.test(url)?"&":"?")+opts.jsonp+"="+callbackName}}}opts.converters["script json"]=function(){return responseContainer[0]};opts.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments};tangXHR.always(function(){window[callbackName]=overwritten;if(opts[callbackName]){opts.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&baidu.type(overwritten)==="function"){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});baidu.ajax.setup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(txt){globalEval(txt);return txt}}});baidu.ajax.prefilter("script",function(opts){opts.cache===undefined&&(opts.cache=false);if(opts.crossDomain){opts.type="GET";opts.global=false}});baidu.ajax.transport("script",function(opts){if(opts.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(arg,callback){script=document.createElement("script");script.async="async";opts.scriptCharset&&(script.charset=opts.scriptCharset);script.src=opts.url;script.onload=script.onreadystatechange=function(arg,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;head&&script.parentNode&&head.removeChild(script);script=undefined;!isAbort&&callback(200,"success")}};head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(0,1)}}}});var xhrCallbacks,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1)}}:false;function createStandardXHR(){try{return new window.XMLHttpRequest()}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}baidu.ajax.settings.xhr=window.ActiveXObject?function(){return !this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR;void function(xhr){baidu.extend(baidu.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials" in xhr)})}(baidu.ajax.settings.xhr());if(baidu.support.ajax){baidu.ajax.transport(function(opts){if(!opts.crossDomain||baidu.support.cors){var callback;return{send:function(headers,complete){var handle,xhr=opts.xhr();if(opts.username){xhr.open(opts.type,opts.url,opts.async,opts.username,opts.password)}else{xhr.open(opts.type,opts.url,opts.async)}if(opts.xhrFields){for(var i in opts.xhrFields){xhr[i]=opts.xhrFields[i]}}if(opts.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(opts.mimeType)}if(!opts.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}try{for(var i in headers){xhr.setRequestHeader(i,headers[i])}}catch(e){}xhr.send((opts.hasContent&&opts.data)||null);callback=function(arg,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=function(){};xhrOnUnloadAbort&&(delete xhrCallbacks[handle])}if(isAbort){xhr.readyState!==4&&xhr.abort()}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;xml&&xml.documentElement&&(responses.xml=xml);try{responses.text=xhr.responseText}catch(e){}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&opts.isLocal&&!opts.crossDomain){status=responses.text?200:404}else{if(status===1223){status=204}}}}}catch(firefoxAccessException){!isAbort&&complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)};if(!opts.async){callback()}else{if(xhr.readyState===4){setTimeout(callback,0)}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};baidu.dom(window).on("unload",xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}}},abort:function(){callback&&callback(0,1)}}}})}}();baidu.createChain("fn",function(fn){return new baidu.fn.$Fn(~"function|string".indexOf(baidu.type(fn))?fn:function(){})},function(fn){this.fn=fn});baidu.fn.blank=function(){};baidu.ajax.request=function(url,opt_options){var options=opt_options||{},data=options.data||"",async=!(options.async===false),username=options.username||"",password=options.password||"",method=(options.method||"GET").toUpperCase(),headers=options.headers||{},timeout=options.timeout||0,eventHandlers={},tick,key,xhr;function stateChangeHandler(){if(xhr.readyState==4){try{var stat=xhr.status}catch(ex){fire("failure");return}fire(stat);if((stat>=200&&stat<300)||stat==304||stat==1223){fire("success")}else{fire("failure")}window.setTimeout(function(){xhr.onreadystatechange=baidu.fn.blank;if(async){xhr=null}},0)}}function getXHR(){if(window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}if(window.XMLHttpRequest){return new XMLHttpRequest()}}function fire(type){type="on"+type;var handler=eventHandlers[type],globelHandler=baidu.ajax[type];if(handler){if(tick){clearTimeout(tick)}if(type!="onsuccess"){handler(xhr)}else{try{xhr.responseText}catch(error){return handler(xhr)}handler(xhr,xhr.responseText)}}else{if(globelHandler){if(type=="onsuccess"){return}globelHandler(xhr)}}}for(key in options){eventHandlers[key]=options[key]}headers["X-Requested-With"]="XMLHttpRequest";try{xhr=getXHR();if(method=="GET"){if(data){url+=(url.indexOf("?")>=0?"&":"?")+data;data=null}if(options.noCache){url+=(url.indexOf("?")>=0?"&":"?")+"b"+(+new Date)+"=1"}}if(username){xhr.open(method,url,async,username,password)}else{xhr.open(method,url,async)}if(async){xhr.onreadystatechange=stateChangeHandler}if(method=="POST"){xhr.setRequestHeader("Content-Type",(headers["Content-Type"]||"application/x-www-form-urlencoded"))}for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key])}}fire("beforerequest");if(timeout){tick=setTimeout(function(){xhr.onreadystatechange=baidu.fn.blank;xhr.abort();fire("timeout")},timeout)}xhr.send(data);if(!async){stateChangeHandler()}}catch(ex){fire("failure")}return xhr};baidu.url=baidu.url||{};baidu.url.escapeSymbol=function(source){return String(source).replace(/[#%&+=\/\\\ \ã€€\f\r\n\t]/g,function(all){return"%"+(256+all.charCodeAt()).toString(16).substring(1).toUpperCase()})};baidu.ajax.form=function(form,options){options=options||{};var elements=form.elements,len=elements.length,method=form.getAttribute("method"),url=form.getAttribute("action"),replacer=options.replacer||function(value,name){return value},sendOptions={},data=[],i,item,itemType,itemName,itemValue,opts,oi,oLen,oItem;function addData(name,value){data.push(name+"="+value)}for(i in options){if(options.hasOwnProperty(i)){sendOptions[i]=options[i]}}for(i=0;i<len;i++){item=elements[i];itemName=item.name;if(!item.disabled&&itemName){itemType=item.type;itemValue=baidu.url.escapeSymbol(item.value);switch(itemType){case"radio":case"checkbox":if(!item.checked){break}case"textarea":case"text":case"password":case"hidden":case"select-one":addData(itemName,replacer(itemValue,itemName));break;case"select-multiple":opts=item.options;oLen=opts.length;for(oi=0;oi<oLen;oi++){oItem=opts[oi];if(oItem.selected){addData(itemName,replacer(oItem.value,itemName))}}break}}}sendOptions.data=data.join("&");sendOptions.method=form.getAttribute("method")||"GET";return baidu.ajax.request(url,sendOptions)};baidu.ajax.get=function(url,onsuccess){return baidu.ajax.request(url,{onsuccess:onsuccess})};baidu.ajax.post=function(url,data,onsuccess){return baidu.ajax.request(url,{onsuccess:onsuccess,method:"POST",data:data})};baidu.array.extend({contains:function(item){return this.indexOf(item)>-1}});baidu.each=function(enumerable,iterator,context){var i,n,t,result;if(typeof iterator=="function"&&enumerable){if(typeof enumerable.length=="number"){for(i=0,n=enumerable.length;i<n;i++){t=enumerable[i]||(enumerable.charAt&&enumerable.charAt(i));result=iterator.call(context||t,i,t,enumerable);if(result===false||result=="break"){break}}}else{if(typeof enumerable=="number"){for(i=0;i<enumerable;i++){result=iterator.call(context||i,i,i,i);if(result===false||result=="break"){break}}}else{if(typeof enumerable=="object"){for(i in enumerable){if(enumerable.hasOwnProperty(i)){result=iterator.call(context||enumerable[i],i,enumerable[i],enumerable);if(result===false||result=="break"){break}}}}}}}return enumerable};baidu.array.extend({empty:function(){this.length=0;return this}});Array.prototype.every=function(iterator,context){baidu.check("function(,.+)?","baidu.array.every");var i,n;for(i=0,n=this.length;i<n;i++){if(!iterator.call(context||this,this[i],i,this)){return false}}return true};baidu.array.every=function(array,iterator,context){return baidu.isArray(array)?array.every(iterator,context):array};Array.prototype.filter=function(iterator,context){var result=baidu.array([]),i,n,item,index=0;if(baidu.type(iterator)==="function"){for(i=0,n=this.length;i<n;i++){item=this[i];if(iterator.call(context||this,item,i,this)===true){result[index++]=item}}}return result};baidu.array.filter=function(array,filter,context){return baidu.isArray(array)?array.filter(filter,context):[]};baidu.array.extend({find:function(iterator){var i,item,n=this.length;if(baidu.type(iterator)=="function"){for(i=0;i<n;i++){item=this[i];if(iterator.call(this,item,i,this)===true){return item}}}return null}});baidu.array.extend({hash:function(values){var result={},vl=values&&values.length,i,n;for(i=0,n=this.length;i<n;i++){result[this[i]]=(vl&&vl>i)?values[i]:true}return result}});baidu.array.extend({lastIndexOf:function(match,fromIndex){baidu.check(".+(,number)?","baidu.array.lastIndexOf");var len=this.length;(!(fromIndex=fromIndex|0)||fromIndex>=len)&&(fromIndex=len-1);fromIndex<0&&(fromIndex+=len);for(;fromIndex>=0;fromIndex--){if(fromIndex in this&&this[fromIndex]===match){return fromIndex}}return -1}});Array.prototype.map=function(iterator,context){baidu.check("function(,.+)?","baidu.array.map");var i,n,array=baidu.array([]);for(i=0,n=this.length;i<n;i++){array[i]=iterator.call(context||this,this[i],i,this)}return array};baidu.array.map=function(array,iterator,context){return baidu.isArray(array)?array.map(iterator,context):array};Array.prototype.reduce=function(iterator,initializer){baidu.check("function(,.+)?","baidu.array.reduce");var i=0,n=this.length,found=false;if(typeof initializer=="undefined"){initializer=this[i++];if(typeof initializer=="undefined"){return}}for(;i<n;i++){initializer=iterator(initializer,this[i],i,this)}return initializer};baidu.array.reduce=function(array,iterator,initializer){return baidu.isArray(array)?array.reduce(iterator,initializer):array};baidu.array.extend({remove:function(match){var n=this.length;while(n--){if(this[n]===match){this.splice(n,1)}}return this}});baidu.array.extend({removeAt:function(index){baidu.check("number","baidu.array.removeAt");return this.splice(index,1)[0]}});Array.prototype.some=function(iterator,context){baidu.check("function(,.+)?","baidu.array.some");var i,n;for(i=0,n=this.length;i<n;i++){if(iterator.call(context||this,this[i],i,this)){return true}}return false};baidu.array.some=function(array,iterator,context){return array.some(iterator,context)};baidu.createChain("async",function(url){return typeof url==="string"?new baidu.async.$Async(url):new baidu.async.$Async()},function(url){this.url=url});baidu.object.extend=baidu.extend;baidu.lang.isFunction=baidu.isFunction;baidu.async._isDeferred=function(obj){var isFn=baidu.lang.isFunction;return obj&&isFn(obj.success)&&isFn(obj.then)&&isFn(obj.fail)&&isFn(obj.cancel)};baidu.async.extend({Deferred:function(){baidu.async.Deferred.apply(this,arguments);return this}});baidu.async.Deferred=function(){var me=this;baidu.extend(me,{_fired:0,_firing:0,_cancelled:0,_resolveChain:[],_rejectChain:[],_result:[],_isError:0});function fire(){if(me._cancelled||me._firing){return}if(me._nextDeferred){me._nextDeferred.then(me._resolveChain[0],me._rejectChain[0]);return}me._firing=1;var chain=me._isError?me._rejectChain:me._resolveChain,result=me._result[me._isError?1:0];while(chain[0]&&(!me._cancelled)){try{var chainResult=chain.shift().call(me,result);if(baidu.async._isDeferred(chainResult)){me._nextDeferred=chainResult;[].push.apply(chainResult._resolveChain,me._resolveChain);[].push.apply(chainResult._rejectChain,me._rejectChain);chain=me._resolveChain=[];me._rejectChain=[]}}catch(error){throw error}finally{me._fired=1;me._firing=0}}}me.resolve=me.fireSuccess=function(value){me._result[0]=value;fire();return me};me.reject=me.fireFail=function(error){me._result[1]=error;me._isError=1;fire();return me};me.then=function(onSuccess,onFail){me._resolveChain.push(onSuccess);me._rejectChain.push(onFail);if(me._fired){fire()}return me};me.success=function(onSuccess){return me.then(onSuccess,baidu.fn.blank)};me.fail=function(onFail){return me.then(baidu.fn.blank,onFail)};me.cancel=function(){me._cancelled=1}};baidu.async.extend({get:function(){var url=this.url;var deferred=new baidu.async.Deferred();baidu.ajax.request(url,{onsuccess:function(xhr,responseText){deferred.resolve({xhr:xhr,responseText:responseText})},onfailure:function(xhr){deferred.reject({xhr:xhr})}});return deferred}});baidu.async.extend({post:function(data){var url=this.url;var deferred=new baidu.async.Deferred();baidu.ajax.request(url,{method:"POST",data:data,onsuccess:function(xhr,responseText){deferred.resolve({xhr:xhr,responseText:responseText})},onfailure:function(xhr){deferred.reject({xhr:xhr})}});return deferred}});baidu.async.when=function(deferredOrValue,onResolve,onReject){if(baidu.async._isDeferred(deferredOrValue)){deferredOrValue.then(onResolve,onReject);return deferredOrValue}var deferred=new baidu.async.Deferred();deferred.then(onResolve,onReject).resolve(deferredOrValue);return deferred};baidu.base=baidu.base||{};baidu.cookie=baidu.cookie||{};baidu.cookie._isValidKey=function(key){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+\x24')).test(key)};baidu.cookie.getRaw=function(key){if(baidu.cookie._isValidKey(key)){var reg=new RegExp("(^| )"+key+"=([^;]*)(;|\x24)"),result=reg.exec(document.cookie);if(result){return result[2]||null}}return null};baidu.cookie.get=function(key){var value=baidu.cookie.getRaw(key);if("string"==typeof value){value=decodeURIComponent(value);return value}return null};baidu.cookie.setRaw=function(key,value,options){if(!baidu.cookie._isValidKey(key)){return}options=options||{};var expires=options.expires;if("number"==typeof options.expires){expires=new Date();expires.setTime(expires.getTime()+options.expires)}document.cookie=key+"="+value+(options.path?"; path="+options.path:"")+(expires?"; expires="+expires.toGMTString():"")+(options.domain?"; domain="+options.domain:"")+(options.secure?"; secure":"")};baidu.cookie.remove=function(key,options){options=options||{};options.expires=new Date(0);baidu.cookie.setRaw(key,"",options)};baidu.cookie.set=function(key,value,options){baidu.cookie.setRaw(key,encodeURIComponent(value),options)};baidu.object.isEmpty=function(obj){var ret=true;if("[object Array]"===Object.prototype.toString.call(obj)){ret=!obj.length}else{obj=new Object(obj);for(var key in obj){return false}}return ret};baidu._util_.cleanData=function(array){var tangId;for(var i=0,ele;ele=array[i];i++){tangId=baidu.id(ele,"get");if(!tangId){continue}baidu._util_.eventBase.removeAll(ele);baidu.id(ele,"remove")}};baidu.json=baidu.json||{};baidu.json.parse=function(data){return(new Function("return ("+data+")"))()};(function(){var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()};baidu.extend(baidu._util_,{camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)}});baidu.extend(baidu._util_,{cache:{},deletedIds:[],uuid:0,expando:"baidu"+("2.0.0"+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(elem){elem=elem.nodeType?baidu._util_.cache[elem[baidu._util_.expando]]:elem[baidu._util_.expando];return !!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!baidu._util_.acceptData(elem)){return}var thisCache,ret,internalKey=baidu._util_.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?baidu._util_.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||(!pvt&&!cache[id].data))&&getByName&&data===undefined){return}if(!id){if(isNode){elem[internalKey]=id=baidu._util_.deletedIds.pop()||++baidu._util_.uuid}else{id=internalKey}}if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=function(){}}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=baidu.extend(cache[id],name)}else{cache[id].data=baidu.extend(cache[id].data,name)}}thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={}}thisCache=thisCache.data}if(data!==undefined){thisCache[baidu._util_.camelCase(name)]=data}if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[baidu._util_.camelCase(name)]}}else{ret=thisCache}return ret},removeData:function(elem,name,pvt){if(!baidu._util_.acceptData(elem)){return}var thisCache,i,l,isNode=elem.nodeType,cache=isNode?baidu._util_.cache:elem,id=isNode?elem[baidu._util_.expando]:baidu._util_.expando;if(!cache[id]){return}if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!baidu.isArray(name)){if(name in thisCache){name=[name]}else{name=baidu._util_.camelCase(name);if(name in thisCache){name=[name]}else{name=name.split(" ")}}}for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]]}if(!(pvt?isEmptyDataObject:baidu.object.isEmpty)(thisCache)){return}}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return}}if(isNode){baidu._util_.cleanData([elem],true)}else{if(baidu.support.deleteExpando||cache!=cache.window){delete cache[id]}else{cache[id]=null}}},_data:function(elem,name,data){return baidu._util_.data(elem,name,data,true)},acceptData:function(elem){var noData=elem.nodeName&&baidu._util_.noData[elem.nodeName.toLowerCase()];return !noData||noData!==true&&elem.getAttribute("classid")===noData}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:baidu.isNumber(data)?+data:rbrace.test(data)?baidu.json.parse(data):data}catch(e){}baidu._util_.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&baidu.object.isEmpty(obj[name])){continue}if(name!=="toJSON"){return false}}return true}})();baidu.date=baidu.date||{};baidu.createChain("number",function(number){var nan=parseFloat(number),val=isNaN(nan)?nan:number;clazz=typeof val==="number"?Number:String,pro=clazz.prototype;val=new clazz(val);baidu.forEach(baidu.number.$Number.prototype,function(value,key){pro[key]||(val[key]=value)});return val});baidu.number.extend({pad:function(length){var source=this;var pre="",negative=(source<0),string=String(Math.abs(source));if(string.length<length){pre=(new Array(length-string.length+1)).join("0")}return(negative?"-":"")+pre+string}});baidu.date.format=function(source,pattern){if("string"!=typeof pattern){return source.toString()}function replacer(patternPart,result){pattern=pattern.replace(patternPart,result)}var pad=baidu.number.pad,year=source.getFullYear(),month=source.getMonth()+1,date2=source.getDate(),hours=source.getHours(),minutes=source.getMinutes(),seconds=source.getSeconds();replacer(/yyyy/g,pad(year,4));replacer(/yy/g,pad(parseInt(year.toString().slice(2),10),2));replacer(/MM/g,pad(month,2));replacer(/M/g,month);replacer(/dd/g,pad(date2,2));replacer(/d/g,date2);replacer(/HH/g,pad(hours,2));replacer(/H/g,hours);replacer(/hh/g,pad(hours%12,2));replacer(/h/g,hours%12);replacer(/mm/g,pad(minutes,2));replacer(/m/g,minutes);replacer(/ss/g,pad(seconds,2));replacer(/s/g,seconds);return pattern};baidu.date.parse=function(source){var reg=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+\x24");if("string"==typeof source){if(reg.test(source)||isNaN(Date.parse(source))){var d=source.split(/ |T/),d1=d.length>1?d[1].split(/[^\d]/):[0,0,0],d0=d[0].split(/[^\d]/);return new Date(d0[0]-0,d0[1]-1,d0[2]-0,d1[0]-0,d1[1]-0,d1[2]-0)}else{return new Date(source)}}return new Date()};baidu.dom.createElements=function(){var tagReg=/<(\w+)/i,rhtml=/<|&#?\w+;/,tagMap={area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],_default:[0,"",""]};tagMap.optgroup=tagMap.option;tagMap.tbody=tagMap.tfoot=tagMap.colgroup=tagMap.caption=tagMap.thead;tagMap.th=tagMap.td;function parseScript(box,doc){var list=box.getElementsByTagName("SCRIPT"),i,script,item;for(i=list.length-1;i>=0;i--){item=list[i];script=doc.createElement("SCRIPT");item.id&&(script.id=item.id);item.src&&(script.src=item.src);item.type&&(script.type=item.type);script[item.text?"text":"textContent"]=item.text||item.textContent;item.parentNode.replaceChild(script,item)}}return function(htmlstring,doc){baidu.isNumber(htmlstring)&&(htmlstring=htmlstring.toString());doc=doc||document;var wrap,depth,box,hs=htmlstring,n=hs.length,div=doc.createElement("div"),df=doc.createDocumentFragment(),result=[];if(baidu.isString(hs)){if(!rhtml.test(hs)){result.push(doc.createTextNode(hs))}else{wrap=tagMap[hs.match(tagReg)[1].toLowerCase()]||tagMap._default;div.innerHTML="<i>mz</i>"+wrap[1]+hs+wrap[2];div.removeChild(div.firstChild);parseScript(div,doc);depth=wrap[0];box=div;while(depth--){box=box.firstChild}baidu.merge(result,box.childNodes);baidu.forEach(result,function(dom){df.appendChild(dom)});div=box=null}}div=null;return result}}();baidu.dom.extend({add:function(object,context){var a=baidu.array(this.get());switch(baidu.type(object)){case"HTMLElement":a.push(object);break;case"$DOM":case"array":baidu.merge(a,object);break;case"string":baidu.merge(a,baidu.dom(object,context));break;default:if(typeof object=="object"&&object.length){baidu.merge(a,object)}}return baidu.dom(a.unique())}});baidu.dom.extend({addClass:function(value){if(arguments.length<=0){return this}switch(typeof value){case"string":value=value.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," ");var arr=value.split(" ");baidu.forEach(this,function(item,index){var str="";if(item.className){str=item.className}for(var i=0;i<arr.length;i++){if((" "+str+" ").indexOf(" "+arr[i]+" ")==-1){str+=(" "+arr[i])}}item.className=str.replace(/^\s+/g,"")});break;case"function":baidu.forEach(this,function(item,index){baidu.dom(item).addClass(value.call(item,index,item.className))});break}return this}});baidu.dom.extend({getDocument:function(){if(this.size()<=0){return undefined}var ele=this[0];return ele.nodeType==9?ele:ele.ownerDocument||ele.document}});baidu.dom.extend({empty:function(){for(var i=0,item;item=this[i];i++){item.nodeType===1&&baidu._util_.cleanData(item.getElementsByTagName("*"));while(item.firstChild){item.removeChild(item.firstChild)}}return this}});baidu.dom.extend({append:function(){baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.append");baidu._util_.smartInsert(this,arguments,function(child){this.nodeType===1&&this.appendChild(child)});return this}});baidu.dom.extend({html:function(value){var bd=baidu.dom,bt=baidu._util_,me=this,isSet=false,result;if(this.size()<=0){switch(typeof value){case"undefined":return undefined;break;default:return me;break}}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rnoInnerhtml=/<(?:script|style|link)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!baidu.support.htmlSerialize){wrapMap._default=[1,"X<div>","</div>"]}baidu.forEach(me,function(elem,index){if(result){return}var tangramDom=bd(elem);switch(typeof value){case"undefined":result=(elem.nodeType===1?elem.innerHTML:undefined);return result;break;case"number":value=String(value);case"string":isSet=true;if(!rnoInnerhtml.test(value)&&(baidu.support.htmlSerialize||!rnoshimcache.test(value))&&(baidu.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{if(elem.nodeType===1){tangramDom.empty();elem.innerHTML=value}elem=0}catch(e){}}if(elem){me.empty().append(value)}break;case"function":isSet=true;tangramDom.html(value.call(elem,index,tangramDom.html()));break}});return isSet?me:result}});baidu._util_.smartInsert=function(tang,args,callback){if(args.length<=0||tang.size()<=0){return}if(baidu.type(args[0])==="function"){var fn=args[0],tangItem;return baidu.forEach(tang,function(item,index){tangItem=baidu.dom(item);args[0]=fn.call(item,index,tangItem.html());baidu._util_.smartInsert(tangItem,args,callback)})}var doc=tang.getDocument()||document,fragment=doc.createDocumentFragment(),len=tang.length-1,firstChild;for(var i=0,item;item=args[i];i++){if(item.nodeType){fragment.appendChild(item)}else{baidu.forEach(~"string|number".indexOf(baidu.type(item))?baidu.dom.createElements(item,doc):item,function(ele){fragment.appendChild(ele)})}}if(!(firstChild=fragment.firstChild)){return}baidu.forEach(tang,function(item,index){callback.call(item.nodeName.toLowerCase()==="table"&&firstChild.nodeName.toLowerCase()==="tr"?item.tBodies[0]||item.appendChild(item.ownerDocument.createElement("tbody")):item,index<len?fragment.cloneNode(true):fragment)})};baidu.dom.extend({after:function(){baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.after");var parentNode=this[0]&&this[0].parentNode,array=!parentNode&&[];baidu._util_.smartInsert(this,arguments,function(node){parentNode?parentNode.insertBefore(node,this.nextSibling):baidu.merge(array,node.childNodes)});array&&baidu.merge(this,array);return this}});baidu.dom.extend({map:function(iterator){baidu.check("function","baidu.dom.map");var me=this,td=baidu.dom();baidu.forEach(this,function(dom,index){td[td.length++]=iterator.call(dom,index,dom,dom)});return td}});baidu._util_.isXML=function(ele){var docElem=(ele?ele.ownerDocument||ele:0).documentElement;return docElem?docElem.nodeName!=="HTML":false};baidu.dom.extend({clone:function(){var event=baidu._util_.eventBase;function getAll(ele){return ele.getElementsByTagName?ele.getElementsByTagName("*"):(ele.querySelectorAll?ele.querySelectorAll("*"):[])}function cloneFixAttributes(src,dest){dest.clearAttributes&&dest.clearAttributes();dest.mergeAttributes&&dest.mergeAttributes(src);switch(dest.nodeName.toLowerCase()){case"object":dest.outerHTML=src.outerHTML;break;case"textarea":case"input":if(~"checked|radio".indexOf(src.type)){src.checked&&(dest.defaultChecked=dest.checked=src.checked);dest.value!==src.value&&(dest.value=src.value)}dest.defaultValue=src.defaultValue;break;case"options":dest.selected=src.defaultSelected;break;case"script":dest.text!==src.text&&(dest.text=src.text);break}dest[baidu.key]&&dest.removeAttribute(baidu.key)}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!baidu.id(src,"get")){return}var defaultEvents=event.get(src);for(var i in defaultEvents){for(var j=0,handler;handler=defaultEvents[i][j];j++){event.add(dest,i,handler)}}}function clone(ele,dataAndEvents,deepDataAndEvents){var cloneNode=ele.cloneNode(true),srcElements,destElements,len;if((!baidu.support.noCloneEvent||!baidu.support.noCloneChecked)&&(ele.nodeType===1||ele.nodeType===11)&&!baidu._util_.isXML(ele)){cloneFixAttributes(ele,cloneNode);srcElements=getAll(ele);destElements=getAll(cloneNode);len=srcElements.length;for(var i=0;i<len;i++){destElements[i]&&cloneFixAttributes(srcElements[i],destElements[i])}}if(dataAndEvents){cloneCopyEvent(ele,cloneNode);if(deepDataAndEvents){srcElements=getAll(ele);destElements=getAll(cloneNode);len=srcElements.length;for(var i=0;i<len;i++){cloneCopyEvent(srcElements[i],destElements[i])}}}return cloneNode}return function(dataAndEvents,deepDataAndEvents){dataAndEvents=!!dataAndEvents;deepDataAndEvents=!!deepDataAndEvents;return this.map(function(){return clone(this,dataAndEvents,deepDataAndEvents)})}}()});baidu._util_.smartInsertTo=function(tang,target,callback,orie){var insert=baidu.dom(target),first=insert[0],tangDom;if(orie&&first&&(!first.parentNode||first.parentNode.nodeType===11)){orie=orie==="before";tangDom=baidu.merge(orie?tang:insert,!orie?tang:insert);if(tang!==tangDom){tang.length=0;baidu.merge(tang,tangDom)}}else{for(var i=0,item;item=insert[i];i++){baidu._util_.smartInsert(baidu.dom(item),i>0?tang.clone(true):tang,callback)}}};baidu.dom.extend({appendTo:function(target){baidu.check("^(?:string|HTMLElement|\\$DOM)$","baidu.dom.appendTo");baidu._util_.smartInsertTo(this,target,function(child){this.appendChild(child)});return this}});baidu.extend(baidu._util_,{rfocusable:/^(?:button|input|object|select|textarea)$/i,rclickable:/^a(?:rea)?$/i,rboolean:/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},propHooks:{tabIndex:{get:function(elem){var bu=baidu._util_;var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):bu.rfocusable.test(elem.nodeName)||bu.rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});if(!baidu.support.enctype){var bu=baidu._util_;bu.propFix.enctype="encoding"}if(!baidu.support.optSelected){var bu=baidu._util_;bu.propHooks.selected=baidu.extend(bu.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}return null}})}baidu.extend(baidu,{_error:function(msg){throw new Error(msg)},_nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()}});baidu.extend(baidu._util_,{rfocusable:/^(?:button|input|object|select|textarea)$/i,rtype:/^(?:button|input)$/i,rclickable:/^a(?:rea)?$/i,nodeHook:{},attrHooks:{type:{set:function(elem,value){var bu=baidu._util_;if(bu.rtype.test(elem.nodeName)&&elem.parentNode){baidu._error("type property can't be changed")}else{if(!baidu.support.radioValue&&value==="radio"&&baidu._nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},value:{get:function(elem,name){var bu=baidu._util_;if(bu.nodeHook&&baidu._nodeName(elem,"button")){return bu.nodeHook.get(elem,name)}return name in elem?elem.value:null},set:function(elem,value,name){if(bu.nodeHook&&baidu._nodeName(elem,"button")){return bu.nodeHook.set(elem,value,name)}elem.value=value}}},boolHook:{get:function(elem,name){var attrNode,property=baidu(elem).prop(name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false){baidu(elem).removeAttr(name)}else{propName=baidu._util_.propFix[name]||name;if(propName in elem){elem[propName]=true}elem.setAttribute(name,name.toLowerCase())}return name}}});baidu._util_.attrHooks.tabindex=baidu._util_.propHooks.tabIndex;if(!baidu.support.getSetAttribute){var bu=baidu._util_,fixSpecified={name:true,id:true,coords:true};bu.nodeHook={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.nodeValue!=="":ret.specified)?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return(ret.nodeValue=value+"")}};bu.attrHooks.tabindex.set=bu.nodeHook.set;baidu.forEach(["width","height"],function(name){bu.attrHooks[name]=baidu.extend(bu.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})});bu.attrHooks.contenteditable={get:bu.nodeHook.get,set:function(elem,value,name){if(value===""){value="false"}bu.nodeHook.set(elem,value,name)}}}if(!baidu.support.hrefNormalized){var bu=baidu._util_;baidu.forEach(["href","src","width","height"],function(name){bu.attrHooks[name]=baidu.extend(bu.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})})}if(!baidu.support.style){var bu=baidu._util_;bu.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return(elem.style.cssText=""+value)}}}baidu.dom.extend({prop:function(name,value){if(arguments.length<=0||typeof name==="function"){return this}var result,me=this,isSet=false;if(this.size()<=0){if(name&&value){return me}else{if(name&&!value){return undefined}else{return me}}}baidu.forEach(this,function(item,index){if(result){return}var ret,hooks,notxml,bd=baidu.dom,bu=baidu._util_,nType=item.nodeType;if(!item||nType===3||nType===8||nType===2){return}notxml=nType!==1||!baidu._util_.isXML(item);if(notxml){name=bu.propFix[name]||name;hooks=bu.propHooks[name]}switch(typeof name){case"string":if(typeof value==="undefined"){if(hooks&&"get" in hooks&&(ret=hooks.get(item,name))!==null){result=ret}else{result=item[name]}}else{if(typeof value==="function"){isSet=true;var ele=bd(item);ele.prop(name,value.call(item,index,ele.prop(name)))}else{isSet=true;if(hooks&&"set" in hooks&&(ret=hooks.set(item,value,name))!==undefined){return ret}else{item[name]=value}}}break;case"object":isSet=true;var ele=bd(item);for(key in name){ele.prop(key,name[key])}break;default:result=me;break}});return isSet?this:result}});baidu.makeArray=function(array,results){var ret=results||[];if(!array){return ret}array.length==null||~"string|function|regexp".indexOf(baidu.type(array))?Array.prototype.push.call(ret,array):baidu.merge(ret,array);return ret};baidu.extend(baidu._util_,{nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},valHooks:{option:{get:function(elem){var val=elem.attributes.value;return !val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null}i=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(baidu.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!baidu._util_.nodeName(option.parentNode,"optgroup"))){value=baidu.dom(option).val();if(one){return value}values.push(value)}}if(one&&!values.length&&options.length){return baidu(options[index]).val()}return values},set:function(elem,value){var values=baidu.makeArray(value);baidu(elem).find("option").each(function(){this.selected=baidu.array(values).indexOf(baidu(this).val())>=0});if(!values.length){elem.selectedIndex=-1}return values}}}});if(!baidu.support.getSetAttribute){var fixSpecified={name:true,id:true,coords:true};baidu._util_.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return(ret.value=value+"")}}}if(!baidu.support.checkOn){baidu.forEach(["radio","checkbox"],function(){baidu._util_.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}})}baidu.forEach(["radio","checkbox"],function(item){baidu._util_.valHooks[item]=baidu.extend(baidu._util_.valHooks[item],{set:function(elem,value){if(baidu.isArray(value)){return(elem.checked=baidu.array(value).indexOf(baidu(elem).val())>=0)}}})});baidu.dom.extend({val:function(value){var bd=baidu.dom,bu=baidu._util_,me=this,isSet=false,result;if(this.size()<=0){switch(typeof value){case"undefined":return undefined;break;default:return me;break}}baidu.forEach(me,function(elem,index){var hooks,rreturn=/\r/g;if(result){return}switch(typeof value){case"undefined":if(elem){hooks=bu.valHooks[elem.type]||bu.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get" in hooks&&(result=hooks.get(elem,"value"))!==undefined){return result}result=elem.value;return typeof result==="string"?result.replace(rreturn,""):result==null?"":result}return result;break;case"function":isSet=true;var tangramDom=bd(elem);tangramDom.val(value.call(elem,index,tangramDom.val()));break;default:isSet=true;if(elem.nodeType!==1){return}if(value==null){value=""}else{if(typeof value==="number"){value+=""}else{if(baidu.isArray(value)){value=baidu.forEach(value,function(value,index){return value==null?"":value+""})}}}hooks=bu.valHooks[elem.type]||bu.valHooks[elem.nodeName.toLowerCase()];if(!hooks||!("set" in hooks)||hooks.set(elem,value,"value")===undefined){elem.value=value}break}});return isSet?me:result}});baidu._util_.access=function(key,value,callback){if(this.size()<=0){return this}switch(baidu.type(key)){case"string":if(value===undefined){return callback.call(this,this[0],key)}else{for(var i=0,ele;ele=this[i];i++){callback.call(this,ele,key,baidu.type(value)==="function"?value.call(ele,i,callback.call(this,ele,key)):value)}}break;case"object":for(var i in key){baidu._util_.access.call(this,i,key[i],callback)}break}return this};baidu.dom.extend({getComputedStyle:function(key){var defaultView=this[0].ownerDocument.defaultView,computedStyle=defaultView&&defaultView.getComputedStyle&&defaultView.getComputedStyle(this[0],null),val=computedStyle?(computedStyle.getPropertyValue(key)||computedStyle[key]):"";return val||this[0].style[key]}});baidu.dom.extend({getCurrentStyle:function(){var css=document.documentElement.currentStyle?function(key){return this[0].currentStyle?this[0].currentStyle[key]:this[0].style[key]}:function(key){return this.getComputedStyle(key)};return function(key){return css.call(this,key)}}()});baidu._util_.getWidthOrHeight=function(){var ret={},cssShow={position:"absolute",visibility:"hidden",display:"block"};function swap(ele,options){var defaultVal={};for(var i in options){defaultVal[i]=ele.style[i];ele.style[i]=options[i]}return defaultVal}baidu.forEach(["Width","Height"],function(item){var cssExpand={Width:["Right","Left"],Height:["Top","Bottom"]}[item];ret["get"+item]=function(ele,extra){var tang=baidu.dom(ele),rect=ele["offset"+item],defaultValue=rect===0&&swap(ele,cssShow),delString="padding|border";defaultValue&&(rect=ele["offset"+item]);extra&&baidu.forEach(extra.split("|"),function(val){if(!~delString.indexOf(val)){rect+=parseFloat(tang.getCurrentStyle(val+cssExpand[0]))||0;rect+=parseFloat(tang.getCurrentStyle(val+cssExpand[1]))||0}else{delString=delString.replace(new RegExp("\\|?"+val+"\\|?"),"")}});delString&&baidu.forEach(delString.split("|"),function(val){rect-=parseFloat(tang.getCurrentStyle(val+cssExpand[0]+(val==="border"?"Width":"")))||0;rect-=parseFloat(tang.getCurrentStyle(val+cssExpand[1]+(val==="border"?"Width":"")))||0});defaultValue&&swap(ele,defaultValue);return rect}});return function(ele,key,extra){return ret[key==="width"?"getWidth":"getHeight"](ele,extra)}}();baidu.string.extend({toCamelCase:function(){var source=this.valueOf();if(source.indexOf("-")<0&&source.indexOf("_")<0){return source}return source.replace(/[-_][^-_]/g,function(match){return match.charAt(1).toUpperCase()})}});baidu.dom.styleFixer=function(){var alpha=/alpha\s*\(\s*opacity\s*=\s*(\d{1,3})/i,nonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,cssNumber="fillOpacity,fontWeight,opacity,orphans,widows,zIndex,zoom",cssProps={"float":baidu.support.cssFloat?"cssFloat":"styleFloat"},cssMapping={fontWeight:{normal:400,bold:700,bolder:700,lighter:100}},cssHooks={opacity:{},width:{},height:{},fontWeight:{get:function(ele,key){var ret=style.get(ele,key);return cssMapping.fontWeight[ret]||ret}}},style={set:function(ele,key,val){ele.style[key]=val}};baidu.extend(cssHooks.opacity,baidu.support.opacity?{get:function(ele,key){var ret=baidu.dom(ele).getCurrentStyle(key);return ret===""?"1":ret}}:{get:function(ele){return alpha.test((ele.currentStyle||ele.style).filter||"")?parseFloat(RegExp.$1)/100:"1"},set:function(ele,key,value){var filterString=(ele.currentStyle||ele.style).filter||"",opacityValue=value*100;ele.style.zoom=1;ele.style.filter=alpha.test(filterString)?filterString.replace(alpha,"Alpha(opacity="+opacityValue):filterString+" progid:dximagetransform.microsoft.Alpha(opacity="+opacityValue+")"}});baidu.forEach(["width","height"],function(item){cssHooks[item]={get:function(ele){return baidu._util_.getWidthOrHeight(ele,item)+"px"},set:function(ele,key,val){baidu.type(val)==="number"&&val<0&&(val=0);style.set(ele,key,val)}}});baidu.extend(style,document.documentElement.currentStyle?{get:function(ele,key){var val=baidu.dom(ele).getCurrentStyle(key),defaultLeft;if(nonpx.test(val)){defaultLeft=ele.style.left;ele.style.left=key==="fontSize"?"1em":val;val=ele.style.pixelLeft+"px";ele.style.left=defaultLeft}return val}}:{get:function(ele,key){return baidu.dom(ele).getCurrentStyle(key)}});return function(ele,key,val){var origKey=baidu.string(key).toCamelCase(),method=val===undefined?"get":"set",origVal,hooks;origKey=cssProps[origKey]||origKey;origVal=baidu.type(val)==="number"&&!~cssNumber.indexOf(origKey)?val+"px":val;hooks=cssHooks.hasOwnProperty(origKey)&&cssHooks[origKey][method]||style[method];return hooks(ele,origKey,origVal)}}();baidu.dom.extend({css:function(key,value){baidu.check("^(?:(?:string(?:,(?:number|string|function))?)|object)$","baidu.dom.css");return baidu._util_.access.call(this,key,value,function(ele,key,val){var styleFixer=baidu.dom.styleFixer;return styleFixer?styleFixer(ele,key,val):(val===undefined?this.getCurrentStyle(key):ele.style[key]=val)})}});baidu.dom.extend({text:function(value){var bd=baidu.dom,me=this,isSet=false,result;if(this.size()<=0){switch(typeof value){case"undefined":return undefined;break;default:return me;break}}var getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}else{for(;(node=elem[i]);i++){ret+=getText(node)}}return ret};baidu.forEach(me,function(elem,index){var tangramDom=bd(elem);if(result){return}switch(typeof value){case"undefined":result=getText(elem);return result;break;case"number":value=String(value);case"string":isSet=true;tangramDom.empty().append((elem&&elem.ownerDocument||document).createTextNode(value));break;case"function":isSet=true;tangramDom.text(value.call(elem,index,tangramDom.text()));break}});return isSet?me:result}});baidu._util_.getWindowOrDocumentWidthOrHeight=baidu._util_.getWindowOrDocumentWidthOrHeight||function(){var ret={window:{},document:{}};baidu.forEach(["Width","Height"],function(item){var clientProp="client"+item,offsetProp="offset"+item,scrollProp="scroll"+item;ret.window["get"+item]=function(ele){var doc=ele.document,rectValue=doc.documentElement[clientProp];return baidu.browser.isStrict&&rectValue||doc.body&&doc.body[clientProp]||rectValue};ret.document["get"+item]=function(ele){var doc=ele.documentElement;return doc[clientProp]>=doc[scrollProp]?doc[clientProp]:Math.max(ele.body[scrollProp],doc[scrollProp],ele.body[offsetProp],doc[offsetProp])}});return function(ele,type,key){return ret[type][key==="width"?"getWidth":"getHeight"](ele)}}();baidu.dom.extend({width:function(value){return baidu._util_.access.call(this,"width",value,function(ele,key,val){var hasValue=val!==undefined,parseValue=hasValue&&parseFloat(val),type=ele!=null&&ele==ele.window?"window":(ele.nodeType===9?"document":false);if(hasValue&&parseValue<0||isNaN(parseValue)){return}hasValue&&/^(?:\d*\.)?\d+$/.test(val+="")&&(val+="px");return type?baidu._util_.getWindowOrDocumentWidthOrHeight(ele,type,key):(hasValue?ele.style.width=val:baidu._util_.getWidthOrHeight(ele,key))})}});baidu.dom.extend({height:function(value){return baidu._util_.access.call(this,"height",value,function(ele,key,val){var hasValue=val!==undefined,parseValue=hasValue&&parseFloat(val),type=ele!=null&&ele==ele.window?"window":(ele.nodeType===9?"document":false);if(hasValue&&parseValue<0||isNaN(parseValue)){return}hasValue&&/^(?:\d*\.)?\d+$/.test(val+="")&&(val+="px");return type?baidu._util_.getWindowOrDocumentWidthOrHeight(ele,type,key):(hasValue?ele.style.height=val:baidu._util_.getWidthOrHeight(ele,key))})}});baidu.dom.extend({getWindow:function(){var doc=this.getDocument();return(this.size()<=0)?undefined:(doc.parentWindow||doc.defaultView)}});baidu.dom.extend({offset:function(){var offset={getDefaultOffset:function(ele,doc){var docElement=doc.documentElement,body=doc.body,defaultView=doc.defaultView,computedStyle=defaultView?defaultView.getComputedStyle(ele,null):ele.currentStyle,patrn=/^t(?:able|h|d)/i,offsetParent=ele.offsetParent,l=ele.offsetLeft,t=ele.offsetTop;while((ele=ele.parentNode)&&ele!==body&&ele!==docElement){if(baidu.support.fixedPosition&&computedStyle.position==="fixed"){break}computedStyle=defaultView?defaultView.getComputedStyle(ele,null):ele.currentStyle;l-=ele.scrollLeft;t-=ele.scrollTop;if(ele===offsetParent){l+=ele.offsetLeft;t+=ele.offsetTop;if(!baidu.support.hasBorderWidth&&!(baidu.support.hasTableCellBorderWidth&&patrn.test(ele.nodeName))){l+=parseFloat(computedStyle.borderLeftWidth)||0;t+=parseFloat(computedStyle.borderTopWidth)||0}offsetParent=ele.offsetParent}}if(~"static,relative".indexOf(computedStyle.position)){l+=body.offsetLeft;t+=body.offsetTop}if(baidu.support.fixedPosition&&computedStyle.position==="fixed"){l+=Math.max(docElement.scrollLeft,body.scrollLeft);t+=Math.max(docElement.scrollTop,body.scrollTop)}return{left:l,top:t}},setOffset:function(ele,options,index){var tang=baidu.dom(ele),type=baidu.type(options),currOffset=tang.offset(),currLeft=tang.getCurrentStyle("left"),currTop=tang.getCurrentStyle("top");type==="function"&&(options=options.call(ele,index,currOffset));if(!options||options.left===undefined&&options.top===undefined){return}currLeft=parseFloat(currLeft)||0;currTop=parseFloat(currTop)||0;options.left!=undefined&&(ele.style.left=options.left-currOffset.left+currLeft+"px");options.top!=undefined&&(ele.style.top=options.top-currOffset.top+currTop+"px");tang.getCurrentStyle("position")==="static"&&(ele.style.position="relative")},bodyOffset:function(body){var tang=baidu.dom(body);return{left:body.offsetLeft+parseFloat(tang.getCurrentStyle("marginLeft"))||0,top:body.offsetTop+parseFloat(tang.getCurrentStyle("marginTop"))||0}}};offset.getOffset="getBoundingClientRect" in document.documentElement?function(ele,doc){if(!ele.getBoundingClientRect){return offset.getDefaultOffset(ele,doc)}var rect=ele.getBoundingClientRect(),win=baidu.dom(doc).getWindow(),docElement=doc.documentElement,body=doc.body;return{left:rect.left+(win.pageXOffset||Math.max(docElement.scrollLeft,body.scrollLeft))-(docElement.clientLeft||body.clientLeft),top:rect.top+(win.pageYOffset||Math.max(docElement.scrollTop,body.scrollTop))-(docElement.clientTop||body.clientTop)}}:offset.getDefaultOffset;return function(options){if(!options){var ele=this[0],doc=baidu.dom(ele).getDocument();return offset[ele===doc.body?"bodyOffset":"getOffset"](ele,doc)}else{baidu.check("^(?:object|function)$","baidu.dom.offset");for(var i=0,item;item=this[i];i++){offset.setOffset(item,options,i)}return this}}}()});baidu.dom.extend({removeAttr:function(value){if(arguments.length<=0||!value||typeof value!=="string"){return this}baidu.forEach(this,function(item){var propName,attrNames,name,l,isBool,i=0;if(item.nodeType===1){var bd=baidu.dom,bu=baidu._util_;attrNames=value.toLowerCase().split(/\s+/);l=attrNames.length;for(;i<l;i++){name=attrNames[i];if(name){propName=bu.propFix[name]||name;isBool=bu.rboolean.test(name);if(!isBool){bd(item).attr(name,"")}item.removeAttribute(baidu.support.getSetAttribute?name:propName);if(isBool&&propName in item){item[propName]=false}}}}});return this}});baidu.dom.extend({attr:function(name,value){if(arguments.length<=0||typeof name==="function"){return this}var result,me=this,isSet=false;if(this.size()<=0){if(name&&value){return me}else{if(name&&!value){return undefined}else{return me}}}baidu.forEach(this,function(item,index){if(result){return}var ret,hooks,notxml,bd=baidu.dom,bu=baidu._util_,nType=item.nodeType;if(!item||nType===3||nType===8||nType===2){return}if(typeof item.getAttribute==="undefined"){var ele=bd(item);result=ele.prop(name,value)}switch(typeof name){case"string":notxml=nType!==1||!baidu._util_.isXML(item);if(notxml){name=name.toLowerCase();hooks=bu.attrHooks[name]||(bu.rboolean.test(name)?bu.boolHook:bu.nodeHook)}if(typeof value==="undefined"){if(hooks&&"get" in hooks&&notxml&&(ret=hooks.get(item,name))!==null){result=ret}else{ret=item.getAttribute(name);result=ret===null?undefined:ret}}else{if(typeof value==="function"){isSet=true;var ele=bd(item);ele.attr(name,value.call(item,index,ele.attr(name)))}else{isSet=true;var attrFn={val:true,css:true,html:true,text:true,width:true,height:true,offset:true};if(name in attrFn){result=bd(item)[name](value);return}if(value===null){bd(item).removeAttr(name);return}else{if(hooks&&"set" in hooks&&notxml&&(ret=hooks.set(item,value,name))!==undefined){return ret}else{item.setAttribute(name,""+value);return value}}}}break;case"object":isSet=true;var ele=bd(item);for(key in name){ele.attr(key,name[key])}break;default:result=me;break}});return isSet?this:result}});baidu.dom.extend({before:function(){baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.before");var parentNode=this[0]&&this[0].parentNode,array=!parentNode&&[],set;baidu._util_.smartInsert(this,arguments,function(node){parentNode?parentNode.insertBefore(node,this):baidu.merge(array,node.childNodes)});if(array){array=baidu.merge(array,this);this.length=0;baidu.merge(this,array)}return this}});baidu.dom.extend({bind:function(type,data,fn){return this.on(type,undefined,data,fn)}});baidu.dom.extend({children:function(selector){var result,a=[];this.each(function(index){baidu.forEach(this.children||this.childNodes,function(dom){dom.nodeType==1&&a.push(dom)})});return baidu.dom(baidu.dom.match(a,selector))}});baidu.dom.children=function(dom){baidu.check("string|HTMLElement","baidu.dom.children");return baidu.dom(baidu.isString(dom)?"#"+dom:dom).children().toArray()};baidu.dom.extend({contents:function(){var array=Array.prototype.slice.call(this),ret=[],nodeName;for(var i=0,ele;ele=array[i];i++){nodeName=ele.nodeName;ret.push.apply(ret,baidu.makeArray(nodeName&&nodeName.toLowerCase()==="iframe"?ele.contentDocument||ele.contentWindow.document:ele.childNodes))}this.length=0;return baidu.merge(this,ret)}});baidu.dom._NAME_ATTRS=(function(){var result={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};if(baidu.browser.ie<8){result["for"]="htmlFor";result["class"]="className"}else{result.htmlFor="for";result.className="class"}return result})();baidu.dom.extend({setAttr:function(key,value){var element=this[0];if("style"==key){element.style.cssText=value}else{key=baidu.dom._NAME_ATTRS[key]||key;element.setAttribute(key,value)}return element}});baidu.dom.create=function(tagName,opt_attributes){var el=document.createElement(tagName),attributes=opt_attributes||{};for(var i in attributes){baidu.dom.setAttr(el,i,attributes[i])}return el};baidu.dom.extend({data:function(){var guid=baidu.key,maps=baidu.global("_maps_HTMLElementData");return function(key,value){baidu.forEach(this,function(dom){!dom[guid]&&(dom[guid]=baidu.id())});if(baidu.isString(key)){if(typeof value=="undefined"){var data;return this[0]&&(data=maps[this[0][guid]])&&data[key]}baidu.forEach(this,function(dom){var data=maps[dom[guid]]=maps[dom[guid]]||{};data[key]=value})}else{if(baidu.type(key)=="object"){baidu.forEach(this,function(dom){var data=maps[dom[guid]]=maps[dom[guid]]||{};baidu.forEach(key,function(item){data[item]=key[item]})})}}return this}}()});baidu.lang.Class=function(){this.guid=baidu.id(this)};baidu.lang.Class.prototype.dispose=function(){baidu.id(this.guid,"delete");for(var property in this){typeof this[property]!="function"&&delete this[property]}this.disposed=true};baidu.lang.Class.prototype.toString=function(){return"[object "+(this._type_||this.__type||this._className||"Object")+"]"};baiduInstance=function(guid){return baidu.id(guid)};baidu.lang.Class.prototype.un=baidu.lang.Class.prototype.removeEventListener=function(type,handler){var i,t=this.__listeners;if(!t){return}if(typeof type=="undefined"){for(i in t){delete t[i]}return}type.indexOf("on")&&(type="on"+type);if(typeof handler=="undefined"){delete t[type]}else{if(t[type]){typeof handler=="string"&&(handler=t[type][handler])&&delete t[type][handler];for(i=t[type].length-1;i>=0;i--){if(t[type][i]===handler){t[type].splice(i,1)}}}}};baidu.lang.guid=function(){return baidu.id()};baidu.lang.isString=baidu.isString;baidu.lang.Event=function(type,target){this.type=type;this.returnValue=true;this.target=target||null;this.currentTarget=null};baidu.lang.Class.prototype.fire=baidu.lang.Class.prototype.dispatchEvent=function(event,options){baidu.lang.isString(event)&&(event=new baidu.lang.Event(event));!this.__listeners&&(this.__listeners={});options=options||{};for(var i in options){event[i]=options[i]}var i,n,me=this,t=me.__listeners,p=event.type;event.target=event.target||(event.currentTarget=me);p.indexOf("on")&&(p="on"+p);typeof me[p]=="function"&&me[p].apply(me,arguments);if(typeof t[p]=="object"){for(i=0,n=t[p].length;i<n;i++){t[p][i]&&t[p][i].apply(me,arguments)}}return event.returnValue};baidu.lang.Class.prototype.on=baidu.lang.Class.prototype.addEventListener=function(type,handler,key){if(typeof handler!="function"){return}!this.__listeners&&(this.__listeners={});var i,t=this.__listeners;type.indexOf("on")&&(type="on"+type);typeof t[type]!="object"&&(t[type]=[]);for(i=t[type].length-1;i>=0;i--){if(t[type][i]===handler){return handler}}t[type].push(handler);key&&typeof key=="string"&&(t[type][key]=handler);return handler};baidu.lang.createSingle=function(json){var c=new baidu.lang.Class();for(var key in json){c[key]=json[key]}return c};baidu.dom.ddManager=baidu.lang.createSingle({_targetsDroppingOver:{}});baidu.dom.extend({delegate:function(selector,type,data,fn){if(typeof data=="function"){fn=data,data=null}return this.on(type,selector,data,fn)}});baidu.dom.extend({filter:function(selector){return baidu.dom(baidu.dom.match(this,selector))}});baidu.dom.extend({remove:function(selector,keepData){arguments.length>0&&baidu.check("^string(?:,boolean)?$","baidu.dom.remove");var array=selector?this.filter(selector):this;for(var i=0,ele;ele=array[i];i++){if(!keepData&&ele.nodeType===1){baidu._util_.cleanData(ele.getElementsByTagName("*"));baidu._util_.cleanData([ele])}ele.parentNode&&ele.parentNode.removeChild(ele)}return this}});baidu.dom.extend({detach:function(selector){selector&&baidu.check("^string$","baidu.dom.detach");return this.remove(selector,true)}});baidu.dom._styleFixer=baidu.dom._styleFixer||{};baidu.dom._styleFilter=baidu.dom._styleFilter||[];baidu.dom._styleFilter.filter=function(key,value,method){for(var i=0,filters=baidu.dom._styleFilter,filter;filter=filters[i];i++){if(filter=filter[method]){value=filter(key,value)}}return value};baidu.dom.getStyle=function(element,key){var dom=baidu.dom;element=dom.g(element);key=baidu.string.toCamelCase(key);var value=element.style[key]||(element.currentStyle?element.currentStyle[key]:"")||dom.getComputedStyle(element,key);if(!value||value=="auto"){var fixer=dom._styleFixer[key];if(fixer){value=fixer.get?fixer.get(element,key,value):baidu.dom.getStyle(element,fixer)}}if(fixer=dom._styleFilter){value=fixer.filter(key,value,"get")}return value};baidu.page=baidu.page||{};baidu.page.getScrollTop=function(){var d=document;return window.pageYOffset||d.documentElement.scrollTop||d.body.scrollTop};baidu.page.getScrollLeft=function(){var d=document;return window.pageXOffset||d.documentElement.scrollLeft||d.body.scrollLeft};(function(){baidu.page.getMousePosition=function(){return{x:baidu.page.getScrollLeft()+xy.x,y:baidu.page.getScrollTop()+xy.y}};var xy={x:0,y:0};baidu.event.on(document,"onmousemove",function(e){e=window.event||e;xy.x=e.clientX;xy.y=e.clientY})})();baidu.dom.extend({off:function(events,selector,fn){var eb=baidu._util_.eventBase,me=this;if(!events){baidu.forEach(this,function(item){eb.removeAll(item)})}else{if(typeof events=="string"){if(typeof selector=="function"){fn=selector,selector=null}events=events.split(/[ ,]/);baidu.forEach(this,function(item){baidu.forEach(events,function(event){eb.remove(item,event,fn,selector)})})}else{if(typeof events=="object"){baidu.forEach(events,function(fn,event){me.off(event,selector,fn)})}}}return this}});baidu.event.un=baidu.un=function(element,evtName,handler){element=baidu.dom.g(element);baidu.dom(element).off(evtName.replace(/^\s*on/,""),handler);return element};baidu.event.preventDefault=function(event){event.originalEvent&&(event=event.originalEvent);if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}};(function(){var dragging=false,target,op,ox,oy,timer,left,top,lastLeft,lastTop,mozUserSelect;baidu.dom.drag=function(element,options){if(!(target=baidu.dom.g(element))){return false}op=baidu.object.extend({autoStop:true,capture:true,interval:16},options);lastLeft=left=parseInt(baidu.dom.getStyle(target,"left"))||0;lastTop=top=parseInt(baidu.dom.getStyle(target,"top"))||0;dragging=true;setTimeout(function(){var mouse=baidu.page.getMousePosition();ox=op.mouseEvent?(baidu.page.getScrollLeft()+op.mouseEvent.clientX):mouse.x;oy=op.mouseEvent?(baidu.page.getScrollTop()+op.mouseEvent.clientY):mouse.y;clearInterval(timer);timer=setInterval(render,op.interval)},1);var tangramDom=baidu.dom(document);op.autoStop&&tangramDom.on("mouseup",stop);tangramDom.on("selectstart",unselect);if(op.capture&&target.setCapture){target.setCapture()}else{if(op.capture&&window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}mozUserSelect=document.body.style.MozUserSelect;document.body.style.MozUserSelect="none";baidu.isFunction(op.ondragstart)&&op.ondragstart(target,op);return{stop:stop,dispose:stop,update:function(options){baidu.object.extend(op,options)}}};function stop(){dragging=false;clearInterval(timer);if(op.capture&&target.releaseCapture){target.releaseCapture()}else{if(op.capture&&window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}document.body.style.MozUserSelect=mozUserSelect;var tangramDom=baidu.dom(document);tangramDom.off("selectstart",unselect);op.autoStop&&tangramDom.off("mouseup",stop);baidu.isFunction(op.ondragend)&&op.ondragend(target,op,{left:lastLeft,top:lastTop})}function render(e){if(!dragging){clearInterval(timer);return}var rg=op.range||[],mouse=baidu.page.getMousePosition(),el=left+mouse.x-ox,et=top+mouse.y-oy;if(baidu.isObject(rg)&&rg.length==4){el=Math.max(rg[3],el);el=Math.min(rg[1]-target.offsetWidth,el);et=Math.max(rg[0],et);et=Math.min(rg[2]-target.offsetHeight,et)}target.style.left=el+"px";target.style.top=et+"px";lastLeft=el;lastTop=et;baidu.isFunction(op.ondrag)&&op.ondrag(target,op,{left:lastLeft,top:lastTop})}function unselect(e){return baidu.event.preventDefault(e,false)}})();baidu.dom.extend({setStyle:function(key,value){var dom=baidu.dom,fixer;element=this[0];key=baidu.string.toCamelCase(key);if(fixer=dom._styleFilter){value=fixer.filter(key,value,"set")}fixer=dom._styleFixer[key];(fixer&&fixer.set)?fixer.set(element,value,key):(element.style[fixer||key]=value);return element}});baidu.dom.draggable=function(element,options){options=baidu.object.extend({toggle:function(){return true}},options);options.autoStop=true;element=baidu.dom.g(element);options.handler=options.handler||element;var manager,events=["ondragstart","ondrag","ondragend"],i=events.length-1,eventName,dragSingle,draggableSingle={dispose:function(){dragSingle&&dragSingle.stop();baidu.event.un(options.handler,"onmousedown",handlerMouseDown);baidu.lang.Class.prototype.dispose.call(draggableSingle)}},me=this;if(manager=baidu.dom.ddManager){for(;i>=0;i--){eventName=events[i];options[eventName]=(function(eventName){var fn=options[eventName];return function(){baidu.lang.isFunction(fn)&&fn.apply(me,arguments);manager.dispatchEvent(eventName,{DOM:element})}})(eventName)}}if(element){function handlerMouseDown(e){var event=options.mouseEvent=window.event||e;options.mouseEvent={clientX:event.clientX,clientY:event.clientY};if(event.button>1||(baidu.lang.isFunction(options.toggle)&&!options.toggle())){return}if(baidu.lang.isFunction(options.onbeforedragstart)){options.onbeforedragstart(element)}dragSingle=baidu.dom.drag(element,options);draggableSingle.stop=dragSingle.stop;draggableSingle.update=dragSingle.update;baidu.event.preventDefault(event)}baidu.event.on(options.handler,"onmousedown",handlerMouseDown)}return{cancel:function(){draggableSingle.dispose()}}};baidu.dom.getPosition=function(element){element=baidu.dom.g(element);var doc=baidu.dom.getDocument(element),browser=baidu.browser,getStyle=baidu.dom.getStyle,BUGGY_GECKO_BOX_OBJECT=browser.isGecko>0&&doc.getBoxObjectFor&&getStyle(element,"position")=="absolute"&&(element.style.top===""||element.style.left===""),pos={left:0,top:0},viewport=(browser.ie&&!browser.isStrict)?doc.body:doc.documentElement,parent,box;if(element==viewport){return pos}if(element.getBoundingClientRect){box=element.getBoundingClientRect();pos.left=Math.floor(box.left)+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft);pos.top=Math.floor(box.top)+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop);pos.left-=doc.documentElement.clientLeft;pos.top-=doc.documentElement.clientTop;var htmlDom=doc.body,htmlBorderLeftWidth=parseInt(getStyle(htmlDom,"borderLeftWidth")),htmlBorderTopWidth=parseInt(getStyle(htmlDom,"borderTopWidth"));if(browser.ie&&!browser.isStrict){pos.left-=isNaN(htmlBorderLeftWidth)?2:htmlBorderLeftWidth;pos.top-=isNaN(htmlBorderTopWidth)?2:htmlBorderTopWidth}}else{parent=element;do{pos.left+=parent.offsetLeft;pos.top+=parent.offsetTop;if(browser.isWebkit>0&&getStyle(parent,"position")=="fixed"){pos.left+=doc.body.scrollLeft;pos.top+=doc.body.scrollTop;break}parent=parent.offsetParent}while(parent&&parent!=element);if(browser.opera>0||(browser.isWebkit>0&&getStyle(element,"position")=="absolute")){pos.top-=doc.body.offsetTop}parent=element.offsetParent;while(parent&&parent!=doc.body){pos.left-=parent.scrollLeft;if(!browser.opera||parent.tagName!="TR"){pos.top-=parent.scrollTop}parent=parent.offsetParent}}return pos};baidu.dom.intersect=function(element1,element2){var g=baidu.dom.g,getPosition=baidu.dom.getPosition,max=Math.max,min=Math.min;element1=g(element1);element2=g(element2);var pos1=getPosition(element1),pos2=getPosition(element2);return max(pos1.left,pos2.left)<=min(pos1.left+element1.offsetWidth,pos2.left+element2.offsetWidth)&&max(pos1.top,pos2.top)<=min(pos1.top+element1.offsetHeight,pos2.top+element2.offsetHeight)};baidu.dom.droppable=function(element,options){options=options||{};var manager=baidu.dom.ddManager,target=baidu.dom.g(element),guid=baidu.lang.guid(),_dragging=function(event){var _targetsDroppingOver=manager._targetsDroppingOver,eventData={trigger:event.DOM,reciever:target};if(baidu.dom.intersect(target,event.DOM)){if(!_targetsDroppingOver[guid]){(typeof options.ondropover=="function")&&options.ondropover.call(target,eventData);manager.dispatchEvent("ondropover",eventData);_targetsDroppingOver[guid]=true}}else{if(_targetsDroppingOver[guid]){(typeof options.ondropout=="function")&&options.ondropout.call(target,eventData);manager.dispatchEvent("ondropout",eventData)}delete _targetsDroppingOver[guid]}},_dragend=function(event){var eventData={trigger:event.DOM,reciever:target};if(baidu.dom.intersect(target,event.DOM)){typeof options.ondrop=="function"&&options.ondrop.call(target,eventData);manager.dispatchEvent("ondrop",eventData)}delete manager._targetsDroppingOver[guid]};manager.addEventListener("ondrag",_dragging);manager.addEventListener("ondragend",_dragend);return{cancel:function(){manager.removeEventListener("ondrag",_dragging);manager.removeEventListener("ondragend",_dragend)}}};baidu.dom.extend({eq:function(index){baidu.check("number","baidu.dom.eq");return baidu.dom(this.get(index))}});baidu.dom.extend({find:function(selector){var a=[],expr,id="__tangram__find__",td=baidu.dom();switch(baidu.type(selector)){case"string":this.each(function(){baidu.merge(td,baidu.query(selector,this))});break;case"HTMLElement":expr=selector.tagName+"#"+(selector.id?selector.id:(selector.id=id));this.each(function(){if(baidu.query(expr,this).length>0){a.push(selector)}});selector.id==id&&(selector.id="");if(a.length>0){baidu.merge(td,a)}break;case"$DOM":a=selector.get();this.each(function(){baidu.forEach(baidu.query("*",this),function(dom){for(var i=0,n=a.length;i<n;i++){dom===a[i]&&(td[td.length++]=a[i])}})});break}return td}});baidu.dom.extend({first:function(){return baidu.dom(this[0])}});baidu.dom.first=function(e){baidu.isString(e)&&(e="#"+e);return baidu.dom(e).children()[0]};baidu.dom.getAncestorBy=function(element,method){element=baidu.dom.g(element);while((element=element.parentNode)&&element.nodeType==1){if(method(element)){return element}}return null};baidu.dom.getAncestorByClass=function(element,className){element=baidu.dom.g(element);className=new RegExp("(^|\\s)"+baidu.string.trim(className)+"(\\s|\x24)");while((element=element.parentNode)&&element.nodeType==1){if(className.test(element.className)){return element}}return null};baidu.dom.getAncestorByTag=function(element,tagName){element=baidu.dom.g(element);tagName=tagName.toUpperCase();while((element=element.parentNode)&&element.nodeType==1){if(element.tagName==tagName){return element}}return null};baidu.dom.extend({getAttr:function(key){element=this[0];if("style"==key){return element.style.cssText}key=baidu.dom._NAME_ATTRS[key]||key;return element.getAttribute(key)}});baidu.dom.getParent=function(element){element=baidu.dom._g(element);return element.parentElement||element.parentNode||null};baidu.dom.extend({getText:function(){var ret="",childs,i=0,l;element=this[0];if(element.nodeType===3||element.nodeType===4){ret+=element.nodeValue}else{if(element.nodeType!==8){childs=element.childNodes;for(l=childs.length;i<l;i++){ret+=baidu.dom.getText(childs[i])}}}return ret}});baidu.dom.extend({has:function(selector){var a=[],td=baidu.dom(document.body);baidu.forEach(this,function(dom){td[0]=dom;td.find(selector).length&&a.push(dom)});return baidu.dom(a)}});baidu.dom.extend({hasAttr:function(name){element=this[0];var attr=element.attributes.getNamedItem(name);return !!(attr&&attr.specified)}});baidu.dom.extend({hasClass:function(value){if(arguments.length<=0||typeof value==="function"){return this}if(this.size()<=0){return false}value=value.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," ");var arr=value.split(" ");var result;baidu.forEach(this,function(item){var str=item.className;for(var i=0;i<arr.length;i++){if((" "+str+" ").indexOf(" "+arr[i]+" ")==-1){result=false;return}}if(result!==false){result=true;return}});return result}});(function(){var iframeDoc,iframe,curCSS,rmargin=/^margin/,rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rposition=/^(top|right|bottom|left)$/,elemdisplay={};baidu.extend(baidu._util_,{showHide:function(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=baidu._util_._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display=""}if((elem.style.display===""&&curCSS(elem,"display")==="none")||!baidu.dom.contains(elem.ownerDocument.documentElement,elem)){values[index]=baidu._util_._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){baidu._util_._data(elem,"olddisplay",display)}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}});if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,computed=getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed[name];if(ret===""&&!baidu.dom.contains(elem.ownerDocument.documentElement,elem)){ret=baidu.dom(elem).css(name)}if(!baidu.support.pixelMargin&&rmargin.test(name)&&rnumnonpx.test(ret)){width=style.width;style.width=ret;ret=computed.width;style.width=width}}return ret}}else{if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name]}if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft}}return ret===""?"auto":ret}}}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName]}var elem=baidu.dom("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||baidu.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close()}elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe)}elemdisplay[nodeName]=display;return display}})();baidu.dom.extend({hide:function(){baidu._util_.showHide(this);return this}});baidu.dom.extend({innerHeight:function(){if(this.size()<=0){return 0}var ele=this[0],type=ele!=null&&ele===ele.window?"window":(ele.nodeType===9?"document":false);return type?baidu._util_.getWindowOrDocumentWidthOrHeight(ele,type,"height"):baidu._util_.getWidthOrHeight(ele,"height","padding")}});baidu.dom.extend({innerWidth:function(){if(this.size()<=0){return 0}var ele=this[0],type=ele!=null&&ele===ele.window?"window":(ele.nodeType===9?"document":false);return type?baidu._util_.getWindowOrDocumentWidthOrHeight(ele,type,"width"):baidu._util_.getWidthOrHeight(ele,"width","padding")}});baidu.dom.extend({insertAfter:function(target){baidu.check("^(?:string|HTMLElement|\\$DOM)$","baidu.dom.insertAfter");baidu._util_.smartInsertTo(this,target,function(node){this.parentNode.insertBefore(node,this.nextSibling)},"after");return this}});baidu.dom.insertAfter=function(newElement,existElement){var get=baidu.dom._g;return baidu.dom(get(newElement)).insertAfter(get(existElement))[0]};baidu.dom.extend({insertBefore:function(target){baidu.check("^(?:string|HTMLElement|\\$DOM)$","baidu.dom.insertBefore");baidu._util_.smartInsertTo(this,target,function(node){this.parentNode.insertBefore(node,this)},"before");return this}});baidu.dom.insertBefore=function(newElement,existElement){var get=baidu.dom._g;return baidu.dom(get(newElement)).insertBefore(get(existElement))[0]};baidu.dom.extend({insertHTML:function(position,html){element=this[0];var range,begin;if(element.insertAdjacentHTML&&!baidu.browser.opera){element.insertAdjacentHTML(position,html)}else{range=element.ownerDocument.createRange();position=position.toUpperCase();if(position=="AFTERBEGIN"||position=="BEFOREEND"){range.selectNodeContents(element);range.collapse(position=="AFTERBEGIN")}else{begin=position=="BEFOREBEGIN";range[begin?"setStartBefore":"setEndAfter"](element);range.collapse(begin)}range.insertNode(range.createContextualFragment(html))}return element}});baidu.dom.extend({last:function(){return baidu.dom(this.get(-1))}});baidu.dom.last=function(element){element=baidu.dom.g(element);for(var node=element.lastChild;node;node=node.previousSibling){if(node.nodeType==1){return node}}return null};baidu.dom.extend({next:function(filter){var td=baidu.dom();baidu.forEach(this,function(dom){while((dom=dom.nextSibling)&&dom&&dom.nodeType!=1){}dom&&(td[td.length++]=dom)});return filter?td.filter(filter):td}});baidu.dom.extend({nextAll:function(selector){var array=[];baidu.forEach(this,function(dom){while(dom=dom.nextSibling){dom&&(dom.nodeType==1)&&array.push(dom)}});return baidu.dom(baidu.dom.match(array,selector))}});baidu.dom.extend({nextUntil:function(selector,filter){var array=baidu.array();baidu.forEach(this,function(dom){var a=baidu.array();while(dom=dom.nextSibling){dom&&(dom.nodeType==1)&&a.push(dom)}if(selector&&a.length){var b=baidu.dom.match(a,selector);if(b.length){a=a.slice(0,a.indexOf(b[0]))}}baidu.merge(array,a)});return baidu.dom(baidu.dom.match(array,filter))}});baidu.dom.extend({not:function(selector){var i,j,n,all=this.get(),a=baidu.isArray(selector)?selector:baidu.dom.match(this,selector);for(i=all.length-1;i>-1;i--){for(j=0,n=a.length;j<n;j++){a[j]===all[i]&&all.splice(i,1)}}return baidu.dom(all)}});baidu.dom.extend({offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body,exclude=/^(?:body|html)$/i;while(offsetParent&&baidu.dom(offsetParent).getCurrentStyle("position")==="static"&&!exclude.test(offsetParent.nodeName)){offsetParent=offsetParent.offsetParent}return offsetParent})}});baidu.dom.extend({one:function(type,data,fn){var me=this;if(typeof data=="function"){fn=data,data=undefined}if(typeof type=="object"&&type){baidu.forEach(type,function(fn,type){this.one(type,data,fn)},this);return this}var newfn=function(){baidu.dom(this).off(type,newfn);return fn.apply(me,arguments)};this.each(function(){var id=baidu.id(this);fn["_"+id+"_"+type]=newfn});return this.on(type,data,newfn)}});baidu.dom.opacity=function(element,opacity){element=baidu.dom.g(element);if(!baidu.browser.ie){element.style.opacity=opacity;element.style.KHTMLOpacity=opacity}else{element.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(opacity*100)+")"}};baidu.dom.extend({outerHeight:function(margin){if(this.size()<=0){return 0}var ele=this[0],type=ele!=null&&ele===ele.window?"window":(ele.nodeType===9?"document":false);return type?baidu._util_.getWindowOrDocumentWidthOrHeight(ele,type,"height"):baidu._util_.getWidthOrHeight(ele,"height","padding|border"+(margin?"|margin":""))}});baidu.dom.extend({outerWidth:function(margin){if(this.size()<=0){return 0}var ele=this[0],type=ele!=null&&ele===ele.window?"window":(ele.nodeType===9?"document":false);return type?baidu._util_.getWindowOrDocumentWidthOrHeight(ele,type,"width"):baidu._util_.getWidthOrHeight(ele,"width","padding|border"+(margin?"|margin":""))}});baidu.dom.extend({parent:function(filter){var array=[];baidu.forEach(this,function(dom){(dom=dom.parentNode)&&dom.nodeType==1&&array.push(dom)});return baidu.dom(baidu.dom.match(array,filter))}});baidu.dom.extend({parents:function(filter){var array=[];baidu.forEach(this,function(dom){var a=[];while((dom=dom.parentNode)&&dom.nodeType==1){a.push(dom)}baidu.merge(array,a)});return baidu.dom(baidu.dom.match(array,filter))}});baidu.dom.extend({parentsUntil:function(selector,filter){baidu.check("(string|HTMLElement)(,.+)?","baidu.dom.parentsUntil");var array=[];baidu.forEach(this,function(dom){var a=baidu.array();while((dom=dom.parentNode)&&dom.nodeType==1){a.push(dom)}if(selector&&a.length){var b=baidu.dom.match(a,selector);if(b.length){a=a.slice(0,a.indexOf(b[0]))}}baidu.merge(array,a)});return baidu.dom(baidu.dom.match(array,filter))}});baidu.dom.extend({position:function(){if(this.size()<=0){return 0}var patrn=/^(?:body|html)$/i,coordinate=this.offset(),offsetParent=this.offsetParent(),parentCoor=patrn.test(offsetParent[0].nodeName)?{left:0,top:0}:offsetParent.offset();coordinate.left-=parseFloat(this.getCurrentStyle("marginLeft"))||0;coordinate.top-=parseFloat(this.getCurrentStyle("marginTop"))||0;parentCoor.left+=parseFloat(offsetParent.getCurrentStyle("borderLeftWidth"))||0;parentCoor.top+=parseFloat(offsetParent.getCurrentStyle("borderTopWidth"))||0;return{left:coordinate.left-parentCoor.left,top:coordinate.top-parentCoor.top}}});baidu.dom.extend({prepend:function(){baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.prepend");baidu._util_.smartInsert(this,arguments,function(child){this.nodeType===1&&this.insertBefore(child,this.firstChild)});return this}});baidu.dom.extend({prependTo:function(target){baidu.check("^(?:string|HTMLElement|\\$DOM)$","baidu.dom.prependTo");baidu._util_.smartInsertTo(this,target,function(child){this.insertBefore(child,this.firstChild)});return this}});baidu.dom.extend({prev:function(filter){var array=[];baidu.forEach(this,function(dom){while(dom=dom.previousSibling){if(dom.nodeType==1){array.push(dom);break}}});return baidu.dom(baidu.dom.match(array,filter))}});baidu.dom.extend({prevAll:function(filter){var array=baidu.array();baidu.forEach(this,function(dom){var a=[];while(dom=dom.previousSibling){dom.nodeType==1&&a.push(dom)}baidu.merge(array,a.reverse())});return baidu.dom(typeof filter=="string"?baidu.dom.match(array,filter):array.unique())}});baidu.dom.extend({prevUntil:function(selector,filter){baidu.check("(string|HTMLElement)(,.+)?","baidu.dom.prevUntil");var array=[];baidu.forEach(this,function(dom){var a=baidu.array();while(dom=dom.previousSibling){dom&&(dom.nodeType==1)&&a.push(dom)}if(selector&&a.length){var b=baidu.dom.match(a,selector);if(b.length){a=a.slice(0,a.indexOf(b[0]))}}baidu.merge(array,a)});return baidu.dom(baidu.dom.match(array,filter))}});baidu.string.extend({escapeReg:function(){return this.replace(new RegExp("([.*+?^=!:\x24{}()|[\\]/\\\\])","g"),"\\\x241")}});baidu.dom.q=function(className,element,tagName){var result=[],trim=baidu.string.trim,len,i,elements,node;if(!(className=trim(className))){return result}if("undefined"==typeof element){element=document}else{element=baidu.dom.g(element);if(!element){return result}}tagName&&(tagName=trim(tagName).toUpperCase());if(element.getElementsByClassName){elements=element.getElementsByClassName(className);len=elements.length;for(i=0;i<len;i++){node=elements[i];if(tagName&&node.tagName!=tagName){continue}result[result.length]=node}}else{className=new RegExp("(^|\\s)"+baidu.string.escapeReg(className)+"(\\s|\x24)");elements=tagName?element.getElementsByTagName(tagName):(element.all||element.getElementsByTagName("*"));len=elements.length;for(i=0;i<len;i++){node=elements[i];className.test(node.className)&&(result[result.length]=node)}}return result};
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context,seed)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set,seed)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){Sizzle.error(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i])}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0};Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr){return[]}for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName("*"):[]}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type];left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue}if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);pass=not^found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){Sizzle.error(expr)}else{break}}old=expr}return curLoop};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(nodeType===1){if(typeof elem.textContent==="string"){return elem.textContent}else{if(typeof elem.innerText==="string"){return elem.innerText.replace(rReturn,"")}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}else{for(i=0;(node=elem[i]);i++){if(node.nodeType!==8){ret+=getText(node)}}}return ret};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(match[1])}}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}else{if(match[2]){Sizzle.error(match[0])}}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}match[4]=(match[4]||match[5]||"").replace(rBackslash,"");if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return(/h\d/i).test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===type||attr===null)},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"submit"===elem.type},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button"},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0}else{if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false}}return true}else{Sizzle.error(name)}}}},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":first=match[2];last=match[3];if(first===1&&last===0){return true}doneName=match[0];parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent[expando]=doneName}diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":!type&&Sizzle.attr?result!=null:type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape))}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i])}}else{for(;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}else{if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}}var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else{if(!aup){return -1}else{if(!bup){return 1}}}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return -1}cur=cur.nextSibling}return 1}}(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1]){return makeArray(context.getElementsByTagName(query),extra)}else{if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[2]),extra)}}}if(context.nodeType===9){if(query==="body"&&context.body){return makeArray([context.body],extra)}else{if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3]){return makeArray([elem],extra)}}else{return makeArray([],extra)}}}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else{if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old){context.setAttribute("id",nid)}else{nid=nid.replace(/'/g,"\\$&")}if(relativeHierarchySelector&&hasParent){context=context.parentNode}try{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}}catch(pseudoError){}finally{if(!old){oldContext.removeAttribute("id")}}}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=true}Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11){return ret}}}catch(e){}}return Sizzle(expr,null,null,[node]).length>0}}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem[expando]=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem[expando]=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}}elem=elem[dir]}checkSet[i]=match}}}if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true)}}else{if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}}else{Sizzle.contains=function(){return false}}}Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context,seed){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet,seed)}return Sizzle.filter(later,tmpSet)};baidu.dom.query=Sizzle})();baidu.dom.extend({removeClass:function(value){if(arguments.length<=0){baidu.forEach(this,function(item){item.className=""})}switch(typeof value){case"string":value=String(value).replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," ");var arr=value.split(" ");baidu.forEach(this,function(item){var str=item.className;for(var i=0;i<arr.length;i++){while((" "+str+" ").indexOf(" "+arr[i]+" ")>=0){str=(" "+str+" ").replace(" "+arr[i]+" "," ")}}item.className=str.replace(/^\s+/g,"").replace(/\s+$/g,"")});break;case"function":baidu.forEach(this,function(item,index,className){baidu.dom(item).removeClass(value.call(item,index,item.className))});break}return this}});baidu.dom.extend({removeData:function(){var guid=baidu.key,maps=baidu.global("_maps_HTMLElementData");return function(key){baidu.forEach(this,function(dom){!dom[guid]&&(dom[guid]=baidu.id())});baidu.forEach(this,function(dom){var map=maps[dom[guid]];if(typeof key=="string"){map&&delete map[key]}else{if(baidu.type(key)=="array"){baidu.forEach(key,function(i){map&&delete map[i]})}}});return this}}()});baidu.dom.extend({removeProp:function(value){if(arguments.length<=0||!value||typeof value!=="string"){return this}var bd=baidu.dom,bu=baidu._util_;value=bu.propFix[value]||value;baidu.forEach(this,function(item){try{item[value]=undefined;delete item[value]}catch(e){}});return this}});baidu.dom.removeStyle=function(){var ele=document.createElement("DIV"),fn,_g=baidu.dom._g;if(ele.style.removeProperty){fn=function(el,st){el=_g(el);el.style.removeProperty(st);return el}}else{if(ele.style.removeAttribute){fn=function(el,st){el=_g(el);el.style.removeAttribute(baidu.string.toCamelCase(st));return el}}}ele=null;return fn}();baidu.object.each=function(source,iterator){var returnValue,key,item;if("function"==typeof iterator){for(key in source){if(source.hasOwnProperty(key)){item=source[key];returnValue=iterator.call(source,item,key);if(returnValue===false){break}}}}return source};baidu.dom.extend({setStyles:function(styles){element=this[0];for(var key in styles){baidu.dom.setStyle(element,key,styles[key])}return element}});baidu.dom._styleFilter[baidu.dom._styleFilter.length]={set:function(key,value){if(value.constructor==Number&&!/zIndex|fontWeight|opacity|zoom|lineHeight/i.test(key)){value=value+"px"}return value}};baidu.event.getTarget=function(event){event.originalEvent&&(event=event.originalEvent);return event.target||event.srcElement};baidu.dom.setBorderBoxSize=function(element,size){var result={};size.width&&(result.width=parseFloat(size.width));size.height&&(result.height=parseFloat(size.height));function getNumericalStyle(element,name){return parseFloat(baidu.dom.getStyle(element,name))||0}if(baidu.browser.isStrict){if(size.width){result.width=parseFloat(size.width)-getNumericalStyle(element,"paddingLeft")-getNumericalStyle(element,"paddingRight")-getNumericalStyle(element,"borderLeftWidth")-getNumericalStyle(element,"borderRightWidth");result.width<0&&(result.width=0)}if(size.height){result.height=parseFloat(size.height)-getNumericalStyle(element,"paddingTop")-getNumericalStyle(element,"paddingBottom")-getNumericalStyle(element,"borderTopWidth")-getNumericalStyle(element,"borderBottomWidth");result.height<0&&(result.height=0)}}return baidu.dom.setStyles(element,result)};baidu.dom.setOuterHeight=baidu.dom.setBorderBoxHeight=function(element,height){return baidu.dom.setBorderBoxSize(element,{height:height})};baidu.dom.setOuterWidth=baidu.dom.setBorderBoxWidth=function(element,width){return baidu.dom.setBorderBoxSize(element,{width:width})};baidu.dom.resizable=function(element,options){var target,op,resizeHandle={},directionHandlePosition,orgStyles={},range,mozUserSelect,orgCursor,offsetParent,currentEle,handlePosition,timer,isCancel=false,isResizabled=false,defaultOptions={direction:["e","s","se"],minWidth:16,minHeight:16,classPrefix:"tangram",directionHandlePosition:{}};if(!(target=baidu.dom.g(element))&&baidu.dom.getStyle(target,"position")=="static"){return false}offsetParent=target.offsetParent;var orgPosition=baidu.dom.getStyle(target,"position");op=baidu.extend(defaultOptions,options);baidu.forEach(["minHeight","minWidth","maxHeight","maxWidth"],function(style){op[style]&&(op[style]=parseFloat(op[style]))});range=[op.minWidth||0,op.maxWidth||Number.MAX_VALUE,op.minHeight||0,op.maxHeight||Number.MAX_VALUE];render();function render(){handlePosition=baidu.extend({e:{right:"-5px",top:"0px",width:"7px",height:target.offsetHeight},s:{left:"0px",bottom:"-5px",height:"7px",width:target.offsetWidth},n:{left:"0px",top:"-5px",height:"7px",width:target.offsetWidth},w:{left:"-5px",top:"0px",height:target.offsetHeight,width:"7px"},se:{right:"1px",bottom:"1px",height:"16px",width:"16px"},sw:{left:"1px",bottom:"1px",height:"16px",width:"16px"},ne:{right:"1px",top:"1px",height:"16px",width:"16px"},nw:{left:"1px",top:"1px",height:"16px",width:"16px"}},op.directionHandlePosition);baidu.forEach(op.direction,function(key){var className=op.classPrefix.split(" ");className[0]=className[0]+"-resizable-"+key;var ele=baidu.dom.create("div",{className:className.join(" ")}),styles=handlePosition[key];styles.cursor=key+"-resize";styles.position="absolute";baidu.dom.setStyles(ele,styles);ele.key=key;ele.style.MozUserSelect="none";target.appendChild(ele);resizeHandle[key]=ele;baidu.dom(ele).on("mousedown",start)});isCancel=false}function cancel(){currentEle&&stop();baidu.object.each(resizeHandle,function(item){baidu.dom(item).off("mousedown",start);baidu.dom.remove(item)});isCancel=true}function update(options){if(!isCancel){op=baidu.extend(op,options||{});cancel();render()}}function start(e){isResizabled&&stop();var ele=baidu.event.getTarget(e),key=ele.key;currentEle=ele;isResizabled=true;if(ele.setCapture){ele.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}orgCursor=baidu.dom.getStyle(document.body,"cursor");baidu.dom.setStyle(document.body,"cursor",key+"-resize");var tangramDom=baidu.dom(document.body);tangramDom.on("mouseup",stop);tangramDom.on("selectstart",unselect);mozUserSelect=document.body.style.MozUserSelect;document.body.style.MozUserSelect="none";var orgMousePosition=baidu.page.getMousePosition();orgStyles=_getOrgStyle();timer=setInterval(function(){resize(key,orgMousePosition)},20);baidu.isFunction(op.onresizestart)&&op.onresizestart();baidu.event.preventDefault(e)}function stop(){if(currentEle&&currentEle.releaseCapture){currentEle.releaseCapture()}else{if(window.releaseEvents){window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}baidu.dom(document.body).off("mouseup",stop);baidu.dom(document).off("selectstart",unselect);document.body.style.MozUserSelect=mozUserSelect;baidu.dom(document.body).off("selectstart",unselect);clearInterval(timer);baidu.dom.setStyle(document.body,"cursor",orgCursor);currentEle=null;isResizabled=false;baidu.isFunction(op.onresizeend)&&op.onresizeend()}function resize(key,orgMousePosition){var xy=baidu.page.getMousePosition(),width=orgStyles.width,height=orgStyles.height,top=orgStyles.top,left=orgStyles.left,styles;if(key.indexOf("e")>=0){width=Math.max(xy.x-orgMousePosition.x+orgStyles.width,range[0]);width=Math.min(width,range[1])}else{if(key.indexOf("w")>=0){width=Math.max(orgMousePosition.x-xy.x+orgStyles.width,range[0]);width=Math.min(width,range[1]);left-=width-orgStyles.width}}if(key.indexOf("s")>=0){height=Math.max(xy.y-orgMousePosition.y+orgStyles.height,range[2]);height=Math.min(height,range[3])}else{if(key.indexOf("n")>=0){height=Math.max(orgMousePosition.y-xy.y+orgStyles.height,range[2]);height=Math.min(height,range[3]);top-=height-orgStyles.height}}styles={width:width,height:height,top:top,left:left};baidu.dom.setOuterHeight(target,height);baidu.dom.setOuterWidth(target,width);baidu.dom.setStyles(target,{top:top,left:left});resizeHandle.n&&baidu.dom.setStyle(resizeHandle.n,"width",width);resizeHandle.s&&baidu.dom.setStyle(resizeHandle.s,"width",width);resizeHandle.e&&baidu.dom.setStyle(resizeHandle.e,"height",height);resizeHandle.w&&baidu.dom.setStyle(resizeHandle.w,"height",height);baidu.isFunction(op.onresize)&&op.onresize({current:styles,original:orgStyles})}function unselect(e){return baidu.event.preventDefault(e,false)}function _getOrgStyle(){var offset_parent=baidu.dom.getPosition(target.offsetParent),offset_target=baidu.dom.getPosition(target),top,left;if(orgPosition=="absolute"){top=offset_target.top-(target.offsetParent==document.body?0:offset_parent.top);left=offset_target.left-(target.offsetParent==document.body?0:offset_parent.left)}else{top=parseFloat(baidu.dom.getStyle(target,"top"))||-parseFloat(baidu.dom.getStyle(target,"bottom"))||0;left=parseFloat(baidu.dom.getStyle(target,"left"))||-parseFloat(baidu.dom.getStyle(target,"right"))||0}baidu.dom.setStyles(target,{top:top,left:left});return{width:target.offsetWidth,height:target.offsetHeight,top:top,left:left}}return{cancel:cancel,update:update,enable:render}};baidu._util_.smartScroll=function(axis){var orie={scrollLeft:"pageXOffset",scrollTop:"pageYOffset"}[axis],is=axis==="scrollLeft",ret={};function isDocument(ele){return ele&&ele.nodeType===9}function getWindow(ele){return baidu.type(ele)=="Window"?ele:isDocument(ele)?ele.defaultView||ele.parentWindow:false}return{get:function(ele){var win=getWindow(ele);return win?(orie in win)?win[orie]:baidu.browser.isStrict&&win.document.documentElement[axis]||win.document.body[axis]:ele[axis]},set:function(ele,val){if(!ele){return}var win=getWindow(ele);win?win.scrollTo(is?val:this.get(ele),!is?val:this.get(ele)):ele[axis]=val}}};baidu.dom.extend({scrollLeft:function(){var ret=baidu._util_.smartScroll("scrollLeft");return function(value){value&&baidu.check("^(?:number|string)$","baidu.dom.scrollLeft");if(this.size()<=0){return value===undefined?0:this}return value===undefined?ret.get(this[0]):ret.set(this[0],value)||this}}()});baidu.dom.extend({scrollTop:function(){var ret=baidu._util_.smartScroll("scrollTop");return function(value){value&&baidu.check("^(?:number|string)$","baidu.dom.scrollTop");if(this.size()<=0){return value===undefined?0:this}return value===undefined?ret.get(this[0]):ret.set(this[0],value)||this}}()});baidu.dom.extend({setAttrs:function(attributes){element=this[0];for(var key in attributes){baidu.dom.setAttr(element,key,attributes[key])}return element}});baidu.dom.setPixel=function(el,style,n){typeof n!="undefined"&&(baidu.dom.g(el).style[style]=n+(!isNaN(n)?"px":""))};baidu.dom.setPosition=function(element,position){var coor={left:position.left-(parseFloat(baidu.dom.getStyle(element,"margin-left"))||0),top:position.top-(parseFloat(baidu.dom.getStyle(element,"margin-top"))||0)};element=baidu.dom.g(element);for(var i in coor){baidu.dom.setStyle(element,i,coor[i])}return element};baidu.dom.extend({show:function(){baidu._util_.showHide(this,true);return this}});baidu.dom.extend({siblings:function(filter){var array=[];baidu.forEach(this,function(dom){var p=[],n=[],t=dom;while(t=t.previousSibling){t.nodeType==1&&p.push(t)}while(dom=dom.nextSibling){dom.nodeType==1&&n.push(dom)}baidu.merge(array,p.reverse().concat(n))});return baidu.dom(baidu.dom.match(array,filter))}});baidu.dom.extend({slice:function(){var slice=Array.prototype.slice;return function(start,end){baidu.check("number(,number)?","baidu.dom.slice");return baidu.dom(slice.apply(this,arguments))}}()});baidu.dom.toggle=function(element){element=baidu.dom.g(element);element.style.display=element.style.display=="none"?"":"none";return element};baidu.dom.extend({toggleClass:function(value,status){var type=typeof value;var status=(typeof status==="undefined")?status:Boolean(status);if(arguments.length<=0){baidu.forEach(this,function(item){item.className=""})}switch(typeof value){case"string":value=value.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," ");var arr=value.split(" ");baidu.forEach(this,function(item){var str=item.className;for(var i=0;i<arr.length;i++){if(((" "+str+" ").indexOf(" "+arr[i]+" ")>-1)&&(typeof status==="undefined")){str=(" "+str+" ").replace(" "+arr[i]+" "," ")}else{if(((" "+str+" ").indexOf(" "+arr[i]+" ")===-1)&&(typeof status==="undefined")){str+=" "+arr[i]}else{if(((" "+str+" ").indexOf(" "+arr[i]+" ")===-1)&&(status===true)){str+=" "+arr[i]}else{if(((" "+str+" ").indexOf(" "+arr[i]+" ")>-1)&&(status===false)){str=str.replace(arr[i],"")}}}}}item.className=str.replace(/^\s+/g,"").replace(/\s+$/g,"")});break;case"function":baidu.forEach(this,function(item,index){baidu.dom(item).toggleClass(value.call(item,index,item.className),status)});break}return this}});baidu.dom.toggleClass=function(element,className){if(baidu.dom.hasClass(element,className)){baidu.dom.removeClass(element,className)}else{baidu.dom.addClass(element,className)}};baidu.dom.extend({trigger:function(){var eb=baidu._util_.eventBase;var ie=/msie/i.test(navigator.userAgent);var keys={keydown:1,keyup:1,keypress:1};var mouses={click:1,dblclick:1,mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1,contextmenu:1};var htmls={abort:1,blur:1,change:1,error:1,focus:1,focusin:1,focusout:1,load:1,unload:1,reset:1,resize:1,scroll:1,select:1,submit:1};var bubblesEvents={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};var triggerEvents={submit:1};var parameters={KeyEvents:["bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],MouseEvents:["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],HTMLEvents:["bubbles","cancelable"],UIEvents:["bubbles","cancelable","view","detail"],Events:["bubbles","cancelable"]};baidu.extend(bubblesEvents,keys);baidu.extend(bubblesEvents,mouses);var upp=function(str){return str.replace(/^\w/,function(s){return s.toUpperCase()})};var values=function(source){var result=[],resultLen=0,k;for(k in source){if(source.hasOwnProperty(k)){result[resultLen++]=source[k]}}return result};var parse=function(array,source){var i=0,size=array.length,obj={};for(;i<size;i++){obj[array[i]]=source[array[i]];delete source[array[i]]}return obj};var eventsHelper=function(type,eventType,options){options=baidu.extend({},options);var param=values(parse(parameters[eventType],options)),evnt=document.createEvent(eventType);param.unshift(type);switch(eventType){case"KeyEvents":evnt.initKeyEvent.apply(evnt,param);break;case"MouseEvents":evnt.initMouseEvent.apply(evnt,param);break;case"UIEvents":evnt.initUIEvent.apply(evnt,param);break;default:evnt.initEvent.apply(evnt,param);break}if(options.triggerData){evnt.triggerData=options.triggerData}baidu.extend(evnt,options);return evnt};var eventObject=function(options){var evnt;if(document.createEventObject){evnt=document.createEventObject();baidu.extend(evnt,options)}return evnt};var keyEvents=function(type,options){options=parse(parameters.KeyEvents,options);var evnt;if(document.createEvent){try{evnt=eventsHelper(type,"KeyEvents",options)}catch(e){try{evnt=eventsHelper(type,"Events",options)}catch(e){evnt=eventsHelper(type,"UIEvents",options)}}}else{options.keyCode=options.charCode>0?options.charCode:options.keyCode;evnt=eventObject(options)}return evnt};var mouseEvents=function(type,options){options=parse(parameters.MouseEvents,options);var evnt;if(document.createEvent){evnt=eventsHelper(type,"MouseEvents",options);if(options.relatedTarget&&!evnt.relatedTarget){if("mouseout"==type.toLowerCase()){evnt.toElement=options.relatedTarget}else{if("mouseover"==type.toLowerCase()){evnt.fromElement=options.relatedTarget}}}}else{options.button=options.button==0?1:options.button==1?4:baidu.lang.isNumber(options.button)?options.button:0;evnt=eventObject(options)}return evnt};var htmlEvents=function(type,options){options.bubbles=bubblesEvents.hasOwnProperty(type);options=parse(parameters.HTMLEvents,options);var evnt;if(document.createEvent){try{evnt=eventsHelper(type,"HTMLEvents",options)}catch(e){try{evnt=eventsHelper(type,"UIEvents",options)}catch(e){evnt=eventsHelper(type,"Events",options)}}}else{evnt=eventObject(options)}return evnt};var fire=function(element,type,triggerData){var evnt;var evnt={bubbles:true,cancelable:true,view:window,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0,button:0,relatedTarget:null};if(keys[type]){evnt=keyEvents(type,evnt)}else{if(mouses[type]){evnt=mouseEvents(type,evnt)}else{if(htmls[type]){evnt=htmlEvents(type,evnt)}else{return baidu(element).triggerHandler(type,triggerData)}}}if(evnt){if(triggerData){evnt.triggerData=triggerData}var eventReturn;if(element.dispatchEvent){eventReturn=element.dispatchEvent(evnt)}else{if(element.fireEvent){eventReturn=element.fireEvent("on"+type,evnt)}}if(eventReturn!==false&&triggerEvents[type]){try{if(element[type]){element[type]()}else{if(type=upp(type),element[type]){element[type]()}}}catch(e){}}}};return function(type,triggerData){this.each(function(){fire(this,type,triggerData)});return this}}()});baidu.dom.extend({unbind:function(type,fn){return this.off(type,fn)}});baidu.dom.extend({undelegate:function(selector,type,fn){return this.off(type,selector,fn)}});baidu.dom.extend({unique:function(fn){return baidu.dom(baidu.array(this.toArray()).unique(fn))}});baidu.dom._matchNode=function(element,direction,start){element=baidu.dom.g(element);for(var node=element[start];node;node=node[direction]){if(node.nodeType==1){return node}}return null};baidu.dom._styleFilter[baidu.dom._styleFilter.length]={get:function(key,value){if(/color/i.test(key)&&value.indexOf("rgb(")!=-1){var array=value.split(",");value="#";for(var i=0,color;color=array[i];i++){color=parseInt(color.replace(/[^\d]/gi,""),10).toString(16);value+=color.length==1?"0"+color:color}value=value.toUpperCase()}return value}};baidu.dom._styleFixer.display=baidu.browser.ie&&baidu.browser.ie<8?{set:function(element,value){element=element.style;if(value=="inline-block"){element.display="inline";element.zoom=1}else{element.display=value}}}:baidu.browser.firefox&&baidu.browser.firefox<3?{set:function(element,value){element.style.display=value=="inline-block"?"-moz-inline-box":value}}:null;baidu.dom._styleFixer["float"]=baidu.browser.ie?"styleFloat":"cssFloat";baidu.dom._styleFixer.opacity=baidu.browser.ie?{get:function(element){var filter=element.style.filter;return filter&&filter.indexOf("opacity=")>=0?(parseFloat(filter.match(/opacity=([^)]*)/)[1])/100)+"":"1"},set:function(element,value){var style=element.style;style.filter=(style.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(value==1?"":"alpha(opacity="+value*100+")");style.zoom=1}}:null;baidu.dom._styleFixer.width=baidu.dom._styleFixer.height={get:function(element,key,value){var key=key.replace(/^[a-z]/,function($1){return $1.toUpperCase()}),val=element["client"+key]||element["offset"+key];return val>0?val+"px":!value||value=="auto"?0+"px":val},set:function(element,value,key){element.style[key]=value}};baidu.dom._styleFixer.textOverflow=(function(){var fontSizeCache={};function pop(list){var o=list.length;if(o>0){o=list[o-1];list.length--}else{o=null}return o}function setText(element,text){element[baidu.browser.firefox?"textContent":"innerText"]=text}function count(element,width,ellipsis){var o=baidu.browser.ie?element.currentStyle||element.style:getComputedStyle(element,null),fontWeight=o.fontWeight,cacheName="font-family:"+o.fontFamily+";font-size:"+o.fontSize+";word-spacing:"+o.wordSpacing+";font-weight:"+((parseInt(fontWeight)||0)==401?700:fontWeight)+";font-style:"+o.fontStyle+";font-variant:"+o.fontVariant,cache=fontSizeCache[cacheName];if(!cache){o=element.appendChild(document.createElement("div"));o.style.cssText="float:left;"+cacheName;cache=fontSizeCache[cacheName]=[];for(var i=0;i<256;i++){i==32?(o.innerHTML="&nbsp;"):setText(o,String.fromCharCode(i));cache[i]=o.offsetWidth}setText(o,"\u4e00");cache[256]=o.offsetWidth;setText(o,"\u4e00\u4e00");cache[257]=o.offsetWidth-cache[256]*2;cache[258]=cache[".".charCodeAt(0)]*3+cache[257]*3;element.removeChild(o)}for(var node=element.firstChild,charWidth=cache[256],wordSpacing=cache[257],ellipsisWidth=cache[258],wordWidth=[],ellipsis=ellipsis?ellipsisWidth:0;node;node=node.nextSibling){if(width<ellipsis){element.removeChild(node)}else{if(node.nodeType==3){for(var i=0,text=node.nodeValue,length=text.length;i<length;i++){o=text.charCodeAt(i);wordWidth[wordWidth.length]=[width,node,i];width-=(i?wordSpacing:0)+(o<256?cache[o]:charWidth);if(width<ellipsis){break}}}else{o=node.tagName;if(o=="IMG"||o=="TABLE"){o=node;node=node.previousSibling;element.removeChild(o)}else{wordWidth[wordWidth.length]=[width,node];width-=node.offsetWidth}}}}if(width<ellipsis){while(o=pop(wordWidth)){width=o[0];node=o[1];o=o[2];if(node.nodeType==3){if(width>=ellipsisWidth){node.nodeValue=node.nodeValue.substring(0,o)+"...";return true}else{if(!o){element.removeChild(node)}}}else{if(count(node,width,true)){return true}else{element.removeChild(node)}}}element.innerHTML=""}}return{get:function(element){var browser=baidu.browser,getStyle=dom.getStyle;return(browser.opera?getStyle("OTextOverflow"):browser.firefox?element._baiduOverflow:getStyle("textOverflow"))||"clip"},set:function(element,value){var browser=baidu.browser;if(element.tagName=="TD"||element.tagName=="TH"||browser.firefox){element._baiduHTML&&(element.innerHTML=element._baiduHTML);if(value=="ellipsis"){element._baiduHTML=element.innerHTML;var o=document.createElement("div"),width=element.appendChild(o).offsetWidth;element.removeChild(o);count(element,width)}else{element._baiduHTML=""}}o=element.style;browser.opera?(o.OTextOverflow=value):browser.firefox?(element._baiduOverflow=value):(o.textOverflow=value)}}})();baidu.lang.isArray=baidu.isArray;baidu.lang.toArray=function(source){if(source===null||source===undefined){return[]}if(baidu.lang.isArray(source)){return source}if(typeof source.length!=="number"||typeof source==="string"||baidu.lang.isFunction(source)){return[source]}if(source.item){var l=source.length,array=new Array(l);while(l--){array[l]=source[l]}return array}return[].slice.call(source)};baidu.fn.extend({methodize:function(attr){var fn=this.fn;return function(){return fn.apply(this,[(attr?this[attr]:this)].concat([].slice.call(arguments)))}}});baidu.fn.extend({wrapReturnValue:function(wrapper,mode){var func=this.fn;mode=mode|0;return function(){var ret=func.apply(this,arguments);if(!mode){return new wrapper(ret)}if(mode>0){return new wrapper(arguments[mode-1])}return ret}}});baidu.fn.wrapReturnValue=function(func,wrapper,mode){return baidu.fn(func).wrapReturnValue(wrapper,mode)};baidu.fn.extend({multize:function(recursive,joinArray){var func=this.fn;function newFunc(){var list=arguments[0],fn=recursive?newFunc:func,ret=[],moreArgs=Array.prototype.slice.call(arguments,0),result;if(list instanceof Array){for(var i=0,item;item=list[i];i++){moreArgs[0]=item;result=fn.apply(this,moreArgs);if(joinArray){result&&(ret=ret.concat(result))}else{ret.push(result)}}return ret}else{return func.apply(this,arguments)}}return newFunc}});baidu.fn.multize=function(func,recursive,joinArray){return baidu.fn(func).multize(recursive,joinArray)};baidu.element=function(node){var gNode=baidu.dom._g(node);if(!gNode&&baidu.dom.query){gNode=baidu.dom.query(node)}return new baidu.element.Element(gNode)};baidu.element.Element=function(node){if(!baidu.element._init){baidu.element._makeChain();baidu.element._init=true}this._dom=(node.tagName||"").toLowerCase()=="select"?[node]:baidu.lang.toArray(node)};baidu.element._toChainFunction=function(func,index,joinArray){return baidu.fn.methodize(baidu.fn.wrapReturnValue(baidu.fn.multize(func,0,1),baidu.element.Element,index),"_dom")};baidu.element._makeChain=function(){var proto=baidu.element.Element.prototype,fnTransformer=baidu.element._toChainFunction;baidu.forEach(("draggable droppable resizable fixable").split(" "),function(fn){proto[fn]=fnTransformer(baidu.dom[fn],1)});baidu.forEach(("remove getText contains getAttr getPosition getStyle hasClass intersect hasAttr getComputedStyle").split(" "),function(fn){proto[fn]=proto[fn.replace(/^get[A-Z]/g,stripGet)]=fnTransformer(baidu.dom[fn],-1)});baidu.forEach(("addClass empty hide show insertAfter insertBefore insertHTML removeClass setAttr setAttrs setStyle setStyles show toggleClass toggle next first getAncestorByClass getAncestorBy getAncestorByTag getDocument getParent getWindow last next prev g removeStyle setBorderBoxSize setOuterWidth setOuterHeight setBorderBoxWidth setBorderBoxHeight setPosition children query").split(" "),function(fn){proto[fn]=proto[fn.replace(/^get[A-Z]/g,stripGet)]=fnTransformer(baidu.dom[fn],0)});proto.q=proto.Q=fnTransformer(function(arg1,arg2){return baidu.dom.q.apply(this,[arg2,arg1].concat([].slice.call(arguments,2)))},0);baidu.forEach(("on un").split(" "),function(fn){proto[fn]=fnTransformer(baidu.event[fn],0)});baidu.forEach(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(fnName){proto[fnName]=function(fn){return this.on(fnName,fn)}});function stripGet(match){return match.charAt(3).toLowerCase()}};baidu.element.extend=function(json){var e=baidu.element;baidu.object.each(json,function(item,key){e.Element.prototype[key]=baidu.element._toChainFunction(item,-1)})};baidu.event.EventArg=function(event,win){win=win||window;event=event||win.event;var doc=win.document;this.target=(event.target)||event.srcElement;this.keyCode=event.which||event.keyCode;for(var k in event){var item=event[k];if("function"!=typeof item){this[k]=item}}if(!this.pageX&&this.pageX!==0){this.pageX=(event.clientX||0)+(doc.documentElement.scrollLeft||doc.body.scrollLeft);this.pageY=(event.clientY||0)+(doc.documentElement.scrollTop||doc.body.scrollTop)}this._event=event};baidu.event.EventArg.prototype.preventDefault=function(){if(this._event.preventDefault){this._event.preventDefault()}else{this._event.returnValue=false}return this};baidu.event.EventArg.prototype.stopPropagation=function(){if(this._event.stopPropagation){this._event.stopPropagation()}else{this._event.cancelBubble=true}return this};baidu.event.EventArg.prototype.stop=function(){return this.stopPropagation().preventDefault()};baidu.object.values=function(source){var result=[],resultLen=0,k;for(k in source){if(source.hasOwnProperty(k)){result[resultLen++]=source[k]}}return result};baidu.lang.isNumber=baidu.isNumber;baidu.event.fire=function(){var browser=baidu.browser,keys={keydown:1,keyup:1,keypress:1},mouses={click:1,dblclick:1,mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1},htmls={abort:1,blur:1,change:1,error:1,focus:1,load:browser.ie?0:1,reset:1,resize:1,scroll:1,select:1,submit:1,unload:browser.ie?0:1},bubblesEvents={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},parameters={KeyEvents:["bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],MouseEvents:["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],HTMLEvents:["bubbles","cancelable"],UIEvents:["bubbles","cancelable","view","detail"],Events:["bubbles","cancelable"]};baidu.object.extend(bubblesEvents,keys);baidu.object.extend(bubblesEvents,mouses);function parse(array,source){var i=0,size=array.length,obj={};for(;i<size;i++){obj[array[i]]=source[array[i]];delete source[array[i]]}return obj}function eventsHelper(type,eventType,options){options=baidu.object.extend({},options);var param=baidu.object.values(parse(parameters[eventType],options)),evnt=document.createEvent(eventType);param.unshift(type);if("KeyEvents"==eventType){evnt.initKeyEvent.apply(evnt,param)}else{if("MouseEvents"==eventType){evnt.initMouseEvent.apply(evnt,param)}else{if("UIEvents"==eventType){evnt.initUIEvent.apply(evnt,param)}else{evnt.initEvent.apply(evnt,param)}}}baidu.object.extend(evnt,options);return evnt}function eventObject(options){var evnt;if(document.createEventObject){evnt=document.createEventObject();baidu.object.extend(evnt,options)}return evnt}function keyEvents(type,options){options=parse(parameters.KeyEvents,options);var evnt;if(document.createEvent){try{evnt=eventsHelper(type,"KeyEvents",options)}catch(keyError){try{evnt=eventsHelper(type,"Events",options)}catch(evtError){evnt=eventsHelper(type,"UIEvents",options)}}}else{options.keyCode=options.charCode>0?options.charCode:options.keyCode;evnt=eventObject(options)}return evnt}function mouseEvents(type,options){options=parse(parameters.MouseEvents,options);var evnt;if(document.createEvent){evnt=eventsHelper(type,"MouseEvents",options);if(options.relatedTarget&&!evnt.relatedTarget){if("mouseout"==type.toLowerCase()){evnt.toElement=options.relatedTarget}else{if("mouseover"==type.toLowerCase()){evnt.fromElement=options.relatedTarget}}}}else{options.button=options.button==0?1:options.button==1?4:baidu.lang.isNumber(options.button)?options.button:0;evnt=eventObject(options)}return evnt}function htmlEvents(type,options){options.bubbles=bubblesEvents.hasOwnProperty(type);options=parse(parameters.HTMLEvents,options);var evnt;if(document.createEvent){try{evnt=eventsHelper(type,"HTMLEvents",options)}catch(htmlError){try{evnt=eventsHelper(type,"UIEvents",options)}catch(uiError){evnt=eventsHelper(type,"Events",options)}}}else{evnt=eventObject(options)}return evnt}return function(element,type,options){var evnt;type=type.replace(/^on/i,"");element=baidu.dom._g(element);options=baidu.object.extend({bubbles:true,cancelable:true,view:window,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0,button:0,relatedTarget:null},options);if(keys[type]){evnt=keyEvents(type,options)}else{if(mouses[type]){evnt=mouseEvents(type,options)}else{if(htmls[type]){evnt=htmlEvents(type,options)}else{throw (new Error(type+" is not support!"))}}}if(evnt){if(element.dispatchEvent){element.dispatchEvent(evnt)}else{if(element.fireEvent){element.fireEvent("on"+type,evnt)}}}}}();baidu.event.get=function(event,win){return new baidu.event.EventArg(event,win)};baidu.event.getEvent=function(event){if(window.event){return window.event}else{var f=arguments.callee,evt;do{evt=f.arguments[0];if(evt&&(/Event/.test(evt)||evt.originalEvent)){return evt.originalEvent||evt}}while(f=f.caller);return null}};baidu.event.getKeyCode=function(event){event.originalEvent&&(event=event.originalEvent);return event.which||event.keyCode};baidu.event.getPageX=function(event){event.originalEvent&&(event=event.originalEvent);var result=event.pageX,doc=document;if(!result&&result!==0){result=(event.clientX||0)+(doc.documentElement.scrollLeft||doc.body.scrollLeft)}return result};baidu.event.getPageY=function(event){event.originalEvent&&(event=event.originalEvent);var result=event.pageY,doc=document;if(!result&&result!==0){result=(event.clientY||0)+(doc.documentElement.scrollTop||doc.body.scrollTop)}return result};baidu.event.once=function(element,type,listener){return baidu.dom(baidu.dom._g(element)).one(type,listener)[0]};baidu.event.stopPropagation=function(event){event.originalEvent&&(event=event.originalEvent);if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}};baidu.event.stop=function(event){event.originalEvent&&(event=event.originalEvent);baidu.event.stopPropagation(event);baidu.event.preventDefault(event)};baidu.fn.abstractMethod=function(){throw Error("unimplemented abstract method")};baidu.fn.extend({bind:function(scope){var func=this.fn,xargs=arguments.length>1?Array.prototype.slice.call(arguments,1):null;return function(){var fn=baidu.type(func)==="string"?scope[func]:func,args=xargs?xargs.concat(Array.prototype.slice.call(arguments,0)):arguments;return fn.apply(scope||fn,args)}}});baidu.fn.bind=function(func,scope){var fn=baidu.fn(func);return fn.bind.apply(fn,Array.prototype.slice.call(arguments,1))};baidu.lang.register=function(Class,constructorHook,methods){var reg=Class["\x06r"]||(Class["\x06r"]=[]);reg[reg.length]=constructorHook;for(var method in methods){Class.prototype[method]=methods[method]}};baidu.createChain("form",function(form){return typeof form==="undefined"?new baidu.form.$Form():new baidu.form.$Form(form)},function(form){this.form=form});baidu.form.extend({json:function(replacer){var form=this.form;var elements=form.elements,replacer=replacer||function(value,name){return value},data={},item,itemType,itemName,itemValue,opts,oi,oLen,oItem;function addData(name,value){var val=data[name];if(val){val.push||(data[name]=[val]);data[name].push(value)}else{data[name]=value}}for(var i=0,len=elements.length;i<len;i++){item=elements[i];itemName=item.name;if(!item.disabled&&itemName){itemType=item.type;itemValue=baidu.url.escapeSymbol(item.value);switch(itemType){case"radio":case"checkbox":if(!item.checked){break}case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":addData(itemName,replacer(itemValue,itemName));break;case"select-multiple":opts=item.options;oLen=opts.length;for(oi=0;oi<oLen;oi++){oItem=opts[oi];if(oItem.selected){addData(itemName,replacer(oItem.value,itemName))}}break}}}return data}});baidu.form.extend({serialize:function(replacer){var form=this.form;var elements=form.elements,replacer=replacer||function(value,name){return value},data=[],item,itemType,itemName,itemValue,opts,oi,oLen,oItem;function addData(name,value){data.push(name+"="+value)}for(var i=0,len=elements.length;i<len;i++){item=elements[i];itemName=item.name;if(!item.disabled&&itemName){itemType=item.type;itemValue=baidu.url.escapeSymbol(item.value);switch(itemType){case"radio":case"checkbox":if(!item.checked){break}case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":addData(itemName,replacer(itemValue,itemName));break;case"select-multiple":opts=item.options;oLen=opts.length;for(oi=0;oi<oLen;oi++){oItem=opts[oi];if(oItem.selected){addData(itemName,replacer(oItem.value,itemName))}}break}}}return data}});baidu.fx=baidu.fx||{};baidu.lang.inherits=function(subClass,superClass,type){var key,proto,selfProps=subClass.prototype,clazz=new Function();clazz.prototype=superClass.prototype;proto=subClass.prototype=new clazz();for(key in selfProps){proto[key]=selfProps[key]}subClass.prototype.constructor=subClass;subClass.superClass=superClass.prototype;typeof type=="string"&&(proto.__type=type);subClass.extend=function(json){for(var i in json){proto[i]=json[i]}return subClass};return subClass};baidu.fx.Timeline=function(options){baidu.lang.Class.call(this);this.interval=16;this.duration=500;this.dynamic=true;baidu.object.extend(this,options)};baidu.lang.inherits(baidu.fx.Timeline,baidu.lang.Class,"baidu.fx.Timeline").extend({launch:function(){var me=this;me.dispatchEvent("onbeforestart");typeof me.initialize=="function"&&me.initialize();me["\x06btime"]=new Date().getTime();me["\x06etime"]=me["\x06btime"]+(me.dynamic?me.duration:0);me["\x06pulsed"]();return me},"\x06pulsed":function(){var me=this;var now=new Date().getTime();me.percent=(now-me["\x06btime"])/me.duration;me.dispatchEvent("onbeforeupdate");if(now>=me["\x06etime"]){typeof me.render=="function"&&me.render(me.transition(me.percent=1));typeof me.finish=="function"&&me.finish();me.dispatchEvent("onafterfinish");me.dispose();return}typeof me.render=="function"&&me.render(me.transition(me.percent));me.dispatchEvent("onafterupdate");me["\x06timer"]=setTimeout(function(){me["\x06pulsed"]()},me.interval)},transition:function(percent){return percent},cancel:function(){this["\x06timer"]&&clearTimeout(this["\x06timer"]);this["\x06etime"]=this["\x06btime"];typeof this.restore=="function"&&this.restore();this.dispatchEvent("oncancel");this.dispose()},end:function(){this["\x06timer"]&&clearTimeout(this["\x06timer"]);this["\x06etime"]=this["\x06btime"];this["\x06pulsed"]()}});baidu.fx.create=function(element,options,fxName){var timeline=new baidu.fx.Timeline(options);timeline.element=element;timeline.__type=fxName||timeline.__type;timeline["\x06original"]={};var catt="baidu_current_effect";timeline.addEventListener("onbeforestart",function(){var me=this,guid;me.attribName="att_"+me.__type.replace(/\W/g,"_");guid=me.element.getAttribute(catt);me.element.setAttribute(catt,(guid||"")+"|"+me.guid+"|",0);if(!me.overlapping){(guid=me.element.getAttribute(me.attribName))&&window[baidu.guid]._instances[guid].cancel();me.element.setAttribute(me.attribName,me.guid,0)}});timeline["\x06clean"]=function(e){var me=this,guid;if(e=me.element){e.removeAttribute(me.attribName);guid=e.getAttribute(catt);guid=guid.replace("|"+me.guid+"|","");if(!guid){e.removeAttribute(catt)}else{e.setAttribute(catt,guid,0)}}};timeline.addEventListener("oncancel",function(){this["\x06clean"]();this["\x06restore"]()});timeline.addEventListener("onafterfinish",function(){this["\x06clean"]();this.restoreAfterFinish&&this["\x06restore"]()});timeline.protect=function(key){this["\x06original"][key]=this.element.style[key]};timeline["\x06restore"]=function(){var o=this["\x06original"],s=this.element.style,v;for(var i in o){v=o[i];if(typeof v=="undefined"){continue}s[i]=v;if(!v&&s.removeAttribute){s.removeAttribute(i)}else{if(!v&&s.removeProperty){s.removeProperty(i)}}}};return timeline};baidu.fx.collapse=function(element,options){if(!(element=baidu.dom.g(element))){return null}var e=element,value,attr,attrHV={vertical:{value:"height",offset:"offsetHeight",stylesValue:["paddingBottom","paddingTop","borderTopWidth","borderBottomWidth"]},horizontal:{value:"width",offset:"offsetWidth",stylesValue:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]}};var fx=baidu.fx.create(e,baidu.object.extend({orientation:"vertical",initialize:function(){attr=attrHV[this.orientation];this.protect(attr.value);this.protect("overflow");this.restoreAfterFinish=true;value=e[attr.offset];e.style.overflow="hidden"},transition:function(percent){return Math.pow(1-percent,2)},render:function(schedule){e.style[attr.value]=Math.floor(schedule*value)+"px"},finish:function(){baidu.dom.hide(e)}},options||{}),"baidu.fx.expand_collapse");return fx.launch()};baidu.lang.instance=function(){var maps=baidu.global("_maps_id");return function(guid){return maps[guid]||null}}();baidu.fx.current=function(element){if(!(element=baidu.dom.g(element))){return null}var a,guids,reg=/\|([^\|]+)\|/g;do{if(guids=element.getAttribute("baidu_current_effect")){break}}while((element=element.parentNode)&&element.nodeType==1);if(!guids){return null}if((a=guids.match(reg))){reg=/\|([^\|]+)\|/;for(var i=0;i<a.length;i++){reg.test(a[i]);a[i]=baidu.lang.instance(RegExp["\x241"])}}return a};baidu.fx.expand=function(element,options){if(!(element=baidu.dom.g(element))){return null}var e=element,value,attr,attrHV={vertical:{value:"height",offset:"offsetHeight",stylesValue:["paddingBottom","paddingTop","borderTopWidth","borderBottomWidth"]},horizontal:{value:"width",offset:"offsetWidth",stylesValue:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]}};var fx=baidu.fx.create(e,baidu.object.extend({orientation:"vertical",initialize:function(){attr=attrHV[this.orientation];baidu.dom.show(e);this.protect(attr.value);this.protect("overflow");this.restoreAfterFinish=true;value=e[attr.offset];function getStyleNum(d,style){var result=parseInt(baidu.dom.getStyle(d,style));result=isNaN(result)?0:result;result=baidu.lang.isNumber(result)?result:0;return result}baidu.forEach(attr.stylesValue,function(item){value-=getStyleNum(e,item)});e.style.overflow="hidden";e.style[attr.value]="1px"},transition:function(percent){return Math.sqrt(percent)},render:function(schedule){e.style[attr.value]=Math.floor(schedule*value)+"px"}},options||{}),"baidu.fx.expand_collapse");return fx.launch()};baidu.fx.opacity=function(element,options){if(!(element=baidu.dom.g(element))){return null}options=baidu.object.extend({from:0,to:1},options||{});var e=element;var fx=baidu.fx.create(e,baidu.object.extend({initialize:function(){baidu.dom.show(element);if(baidu.browser.ie){this.protect("filter")}else{this.protect("opacity");this.protect("KHTMLOpacity")}this.distance=this.to-this.from},render:function(schedule){var n=this.distance*schedule+this.from;if(!baidu.browser.ie){e.style.opacity=n;e.style.KHTMLOpacity=n}else{e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(n*100)+")"}}},options),"baidu.fx.opacity");return fx.launch()};baidu.fx.fadeIn=function(element,options){if(!(element=baidu.dom.g(element))){return null}var fx=baidu.fx.opacity(element,baidu.object.extend({from:0,to:1,restoreAfterFinish:true},options||{}));fx.__type="baidu.fx.fadeIn";return fx};baidu.fx.fadeOut=function(element,options){if(!(element=baidu.dom.g(element))){return null}var fx=baidu.fx.opacity(element,baidu.object.extend({from:1,to:0,restoreAfterFinish:true},options||{}));fx.addEventListener("onafterfinish",function(){baidu.dom.hide(this.element)});fx.__type="baidu.fx.fadeOut";return fx};baidu.fx.getTransition=function(name){var a=baidu.fx.transitions;if(!name||typeof a[name]!="string"){name="linear"}return new Function("percent",a[name])};baidu.fx.transitions={none:"return 0",full:"return 1",linear:"return percent",reverse:"return 1 - percent",parabola:"return Math.pow(percent, 2)",antiparabola:"return 1 - Math.pow(1 - percent, 2)",sinoidal:"return (-Math.cos(percent * Math.PI)/2) + 0.5",wobble:"return (-Math.cos(percent * Math.PI * (9 * percent))/2) + 0.5",spring:"return 1 - (Math.cos(percent * 4.5 * Math.PI) * Math.exp(-percent * 6))"};baidu.string.extend({formatColor:function(){var reg1=/^\#[\da-f]{6}$/i,reg2=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/i,keyword={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff0",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff"};return function(){var color=this.valueOf();if(reg1.test(color)){return color}else{if(reg2.test(color)){for(var s,i=1,color="#";i<4;i++){s=parseInt(RegExp["\x24"+i]).toString(16);color+=("00"+s).substr(s.length)}return color}else{if(/^\#[\da-f]{3}$/.test(color)){var s1=color.charAt(1),s2=color.charAt(2),s3=color.charAt(3);return"#"+s1+s1+s2+s2+s3+s3}else{if(keyword[color]){return keyword[color]}}}}return""}}()});baidu.fx.highlight=function(element,options){if(!(element=baidu.dom.g(element))){return null}var e=element;var fx=baidu.fx.create(e,baidu.object.extend({initialize:function(){var me=this,CS=baidu.dom.getStyle,FC=baidu.string.formatColor,color=FC(CS(e,"color"))||"#000000",bgc=FC(CS(e,"backgroundColor"));me.beginColor=me.beginColor||bgc||"#FFFF00";me.endColor=me.endColor||bgc||"#FFFFFF";me.finalColor=me.finalColor||me.endColor||me.element.style.backgroundColor;me.textColor==color&&(me.textColor="");this.protect("color");this.protect("backgroundColor");me.c_b=[];me.c_d=[];me.t_b=[];me.t_d=[];for(var n,i=0;i<3;i++){n=2*i+1;me.c_b[i]=parseInt(me.beginColor.substr(n,2),16);me.c_d[i]=parseInt(me.endColor.substr(n,2),16)-me.c_b[i];if(me.textColor){me.t_b[i]=parseInt(color.substr(n,2),16);me.t_d[i]=parseInt(me.textColor.substr(n,2),16)-me.t_b[i]}}},render:function(schedule){for(var me=this,a="#",b="#",n,i=0;i<3;i++){n=Math.round(me.c_b[i]+me.c_d[i]*schedule).toString(16);a+=("00"+n).substr(n.length);if(me.textColor){n=Math.round(me.t_b[i]+me.t_d[i]*schedule).toString(16);b+=("00"+n).substr(n.length)}}e.style.backgroundColor=a;me.textColor&&(e.style.color=b)},finish:function(){this.textColor&&(e.style.color=this.textColor);e.style.backgroundColor=this.finalColor}},options||{}),"baidu.fx.highlight");return fx.launch()};baidu.fx.mask=function(element,options){if(!(element=baidu.dom.g(element))||baidu.dom.getStyle(element,"position")!="absolute"){return null}var e=element,original={};options=options||{};var r=/^(\d+px|\d?\d(\.\d+)?%|100%|left|center|right)(\s+(\d+px|\d?\d(\.\d+)?%|100%|top|center|bottom))?/i;!r.test(options.startOrigin)&&(options.startOrigin="0px 0px");var options=baidu.object.extend({restoreAfterFinish:true,from:0,to:1},options||{});var fx=baidu.fx.create(e,baidu.object.extend({initialize:function(){e.style.display="";this.protect("clip");original.width=e.offsetWidth;original.height=e.offsetHeight;r.test(this.startOrigin);var t1=RegExp["\x241"].toLowerCase(),t2=RegExp["\x244"].toLowerCase(),ew=this.element.offsetWidth,eh=this.element.offsetHeight,dx,dy;if(/\d+%/.test(t1)){dx=parseInt(t1,10)/100*ew}else{if(/\d+px/.test(t1)){dx=parseInt(t1)}else{if(t1=="left"){dx=0}else{if(t1=="center"){dx=ew/2}else{if(t1=="right"){dx=ew}}}}}if(!t2){dy=eh/2}else{if(/\d+%/.test(t2)){dy=parseInt(t2,10)/100*eh}else{if(/\d+px/.test(t2)){dy=parseInt(t2)}else{if(t2=="top"){dy=0}else{if(t2=="center"){dy=eh/2}else{if(t2=="bottom"){dy=eh}}}}}}original.x=dx;original.y=dy},render:function(schedule){var n=this.to*schedule+this.from*(1-schedule),top=original.y*(1-n)+"px ",left=original.x*(1-n)+"px ",right=original.x*(1-n)+original.width*n+"px ",bottom=original.y*(1-n)+original.height*n+"px ";e.style.clip="rect("+top+right+bottom+left+")"},finish:function(){if(this.to<this.from){e.style.display="none"}}},options),"baidu.fx.mask");return fx.launch()};baidu.fx.move=function(element,options){if(!(element=baidu.dom.g(element))||baidu.dom.getStyle(element,"position")=="static"){return null}options=baidu.object.extend({x:0,y:0},options||{});if(options.x==0&&options.y==0){return null}var fx=baidu.fx.create(element,baidu.object.extend({initialize:function(){this.protect("top");this.protect("left");this.originX=parseInt(baidu.dom.getStyle(element,"left"))||0;this.originY=parseInt(baidu.dom.getStyle(element,"top"))||0},transition:function(percent){return 1-Math.pow(1-percent,2)},render:function(schedule){element.style.top=(this.y*schedule+this.originY)+"px";element.style.left=(this.x*schedule+this.originX)+"px"}},options),"baidu.fx.move");return fx.launch()};baidu.fx.moveBy=function(element,distance,options){if(!(element=baidu.dom.g(element))||baidu.dom.getStyle(element,"position")=="static"||typeof distance!="object"){return null}var d={};d.x=distance[0]||distance.x||0;d.y=distance[1]||distance.y||0;var fx=baidu.fx.move(element,baidu.object.extend(d,options||{}));return fx};baidu.fx.moveTo=function(element,point,options){if(!(element=baidu.dom.g(element))||baidu.dom.getStyle(element,"position")=="static"||typeof point!="object"){return null}var p=[point[0]||point.x||0,point[1]||point.y||0];var x=parseInt(baidu.dom.getStyle(element,"left"))||0;var y=parseInt(baidu.dom.getStyle(element,"top"))||0;var fx=baidu.fx.move(element,baidu.object.extend({x:p[0]-x,y:p[1]-y},options||{}));return fx};baidu.fx.scale=function(element,options){if(!(element=baidu.dom.g(element))){return null}options=baidu.object.extend({from:0.1,to:1},options||{});var r=/^(-?\d+px|\d?\d(\.\d+)?%|100%|left|center|right)(\s+(-?\d+px|\d?\d(\.\d+)?%|100%|top|center|bottom))?/i;!r.test(options.transformOrigin)&&(options.transformOrigin="0px 0px");var original={},fx=baidu.fx.create(element,baidu.object.extend({fade:true,initialize:function(){baidu.dom.show(element);var me=this,o=original,s=element.style,save=function(k){me.protect(k)};if(baidu.browser.ie){save("top");save("left");save("position");save("zoom");save("filter");this.offsetX=parseInt(baidu.dom.getStyle(element,"left"))||0;this.offsetY=parseInt(baidu.dom.getStyle(element,"top"))||0;if(baidu.dom.getStyle(element,"position")=="static"){s.position="relative"}r.test(this.transformOrigin);var t1=RegExp["\x241"].toLowerCase(),t2=RegExp["\x244"].toLowerCase(),ew=this.element.offsetWidth,eh=this.element.offsetHeight,dx,dy;if(/\d+%/.test(t1)){dx=parseInt(t1,10)/100*ew}else{if(/\d+px/.test(t1)){dx=parseInt(t1)}else{if(t1=="left"){dx=0}else{if(t1=="center"){dx=ew/2}else{if(t1=="right"){dx=ew}}}}}if(!t2){dy=eh/2}else{if(/\d+%/.test(t2)){dy=parseInt(t2,10)/100*eh}else{if(/\d+px/.test(t2)){dy=parseInt(t2)}else{if(t2=="top"){dy=0}else{if(t2=="center"){dy=eh/2}else{if(t2=="bottom"){dy=eh}}}}}}s.zoom=this.from;o.cx=dx;o.cy=dy}else{save("WebkitTransform");save("WebkitTransformOrigin");save("MozTransform");save("MozTransformOrigin");save("OTransform");save("OTransformOrigin");save("transform");save("transformOrigin");save("opacity");save("KHTMLOpacity");s.WebkitTransform=s.MozTransform=s.OTransform=s.transform="scale("+this.from+")";s.WebkitTransformOrigin=s.MozTransformOrigin=s.OTransformOrigin=s.transformOrigin=this.transformOrigin}},render:function(schedule){var s=element.style,b=this.to==1,b=typeof this.opacityTrend=="boolean"?this.opacityTrend:b,p=b?this.percent:1-this.percent,n=this.to*schedule+this.from*(1-schedule);if(baidu.browser.ie){s.zoom=n;if(this.fade){s.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(p*100)+")"}s.top=this.offsetY+original.cy*(1-n);s.left=this.offsetX+original.cx*(1-n)}else{s.WebkitTransform=s.MozTransform=s.OTransform=s.transform="scale("+n+")";if(this.fade){s.KHTMLOpacity=s.opacity=p}}}},options),"baidu.fx.scale");return fx.launch()};baidu.fx.zoomOut=function(element,options){if(!(element=baidu.dom.g(element))){return null}options=baidu.object.extend({to:0.1,from:1,opacityTrend:false,restoreAfterFinish:true,transition:function(n){return 1-Math.pow(1-n,2)}},options||{});var effect=baidu.fx.scale(element,options);effect.addEventListener("onafterfinish",function(){baidu.dom.hide(this.element)});return effect};baidu.fx.puff=function(element,options){return baidu.fx.zoomOut(element,baidu.object.extend({to:1.8,duration:800,transformOrigin:"50% 50%"},options||{}))};baidu.fx.pulsate=function(element,loop,options){if(!(element=baidu.dom.g(element))){return null}if(isNaN(loop)||loop==0){return null}var e=element;var fx=baidu.fx.create(e,baidu.object.extend({initialize:function(){this.protect("visibility")},transition:function(percent){return Math.cos(2*Math.PI*percent)},render:function(schedule){e.style.visibility=schedule>0?"visible":"hidden"},finish:function(){setTimeout(function(){baidu.fx.pulsate(element,--loop,options)},10)}},options),"baidu.fx.pulsate");return fx.launch()};baidu.fx.remove=function(element,options){var afterFinish=options.onafterfinish?options.onafterfinish:new Function();return baidu.fx.fadeOut(element,baidu.object.extend(options||{},{onafterfinish:function(){baidu.dom.remove(this.element);afterFinish.call(this)}}))};baidu.fx.scrollBy=function(element,distance,options){if(!(element=baidu.dom.g(element))||typeof distance!="object"){return null}var d={},mm={};d.x=distance[0]||distance.x||0;d.y=distance[1]||distance.y||0;var fx=baidu.fx.create(element,baidu.object.extend({initialize:function(){var t=mm.sTop=element.scrollTop;var l=mm.sLeft=element.scrollLeft;mm.sx=Math.min(element.scrollWidth-element.clientWidth-l,d.x);mm.sy=Math.min(element.scrollHeight-element.clientHeight-t,d.y)},transition:function(percent){return 1-Math.pow(1-percent,2)},render:function(schedule){element.scrollTop=(mm.sy*schedule+mm.sTop);element.scrollLeft=(mm.sx*schedule+mm.sLeft)},restore:function(){element.scrollTop=mm.sTop;element.scrollLeft=mm.sLeft}},options),"baidu.fx.scroll");return fx.launch()};baidu.fx.scrollTo=function(element,point,options){if(!(element=baidu.dom.g(element))||typeof point!="object"){return null}var d={};d.x=(point[0]||point.x||0)-element.scrollLeft;d.y=(point[1]||point.y||0)-element.scrollTop;return baidu.fx.scrollBy(element,d,options)};baidu.fx.shake=function(element,offset,options){if(!(element=baidu.dom.g(element))){return null}var e=element;offset=offset||[];function tt(){for(var i=0;i<arguments.length;i++){if(!isNaN(arguments[i])){return arguments[i]}}}var fx=baidu.fx.create(e,baidu.object.extend({initialize:function(){this.protect("top");this.protect("left");this.protect("position");this.restoreAfterFinish=true;if(baidu.dom.getStyle(e,"position")=="static"){e.style.position="relative"}var original=this["\x06original"];this.originX=parseInt(original.left||0);this.originY=parseInt(original.top||0);this.offsetX=tt(offset[0],offset.x,16);this.offsetY=tt(offset[1],offset.y,5)},transition:function(percent){var line=1-percent;return Math.floor(line*16)%2==1?line:percent-1},render:function(schedule){e.style.top=(this.offsetY*schedule+this.originY)+"px";e.style.left=(this.offsetX*schedule+this.originX)+"px"}},options||{}),"baidu.fx.shake");return fx.launch()};baidu.fx.zoomIn=function(element,options){if(!(element=baidu.dom.g(element))){return null}options=baidu.object.extend({to:1,from:0.1,restoreAfterFinish:true,transition:function(n){return Math.pow(n,2)}},options||{});return baidu.fx.scale(element,options)};baidu._util_.smartAjax=baidu._util_.smartAjax||function(method){return function(url,data,callback,type){if(baidu.type(data)==="function"){type=type||callback;callback=data;data=undefined}baidu.ajax({type:method,url:url,data:data,success:callback,dataType:type})}};baidu.get=baidu.get||baidu._util_.smartAjax("get");baidu.global.get=function(key){return baidu.global(key)};baidu.global.set=function(key,value,overwrite){return baidu.global(key,value,overwrite)};baidu.global.getZIndex=function(key,step){var zi=baidu.global.get("zIndex");if(key){zi[key]=zi[key]+(step||1)}return zi[key]};baidu.global.set("zIndex",{popup:50000,dialog:1000},true);baidu.i18n=baidu.i18n||{};baidu.i18n.cultures=baidu.i18n.cultures||{};baidu.i18n.cultures["en-US"]=baidu.object.extend(baidu.i18n.cultures["en-US"]||{},{calendar:{dateFormat:"yyyy-MM-dd",titleNames:"#{MM}&nbsp;#{yyyy}",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:{mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"}},timeZone:-5,whitespace:new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g"),number:{group:",",groupLength:3,decimal:".",positive:"",negative:"-",_format:function(number,isNegative){return baidu.i18n.number._format(number,{group:this.group,groupLength:this.groupLength,decimal:this.decimal,symbol:isNegative?this.negative:this.positive})}},currency:{symbol:"$"},language:{ok:"ok",cancel:"cancel",signin:"signin",signup:"signup"}});baidu.i18n.currentLocale="en-US";baidu.i18n.cultures["zh-CN"]=baidu.object.extend(baidu.i18n.cultures["zh-CN"]||{},{calendar:{dateFormat:"yyyy-MM-dd",titleNames:"#{yyyy}å¹´&nbsp;#{MM}æœˆ",monthNames:["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å","åä¸€","åäºŒ"],monthNamesShort:[1,2,3,4,5,6,7,8,9,10,11,12],dayNames:{mon:"ä¸€",tue:"äºŒ",wed:"ä¸‰",thu:"å››",fri:"äº”",sat:"å…­",sun:"æ—¥"}},timeZone:8,whitespace:new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g"),number:{group:",",groupLength:3,decimal:".",positive:"",negative:"-",_format:function(number,isNegative){return baidu.i18n.number._format(number,{group:this.group,groupLength:this.groupLength,decimal:this.decimal,symbol:isNegative?this.negative:this.positive})}},currency:{symbol:"ï¿¥"},language:{ok:"ç¡®å®š",cancel:"å–æ¶ˆ",signin:"æ³¨å†Œ",signup:"ç™»å½•"}});baidu.i18n.currentLocale="zh-CN";baidu.i18n.number=baidu.i18n.number||{format:function(number,sLocale,tLocale){var me=this,sOpt=sLocale&&baidu.i18n.cultures[sLocale].number,tOpt=baidu.i18n.cultures[tLocale||baidu.i18n.currentLocale].number,isNegative=false;if(typeof number==="string"){if(number.indexOf(sOpt.negative)>-1){isNegative=true;number=number.replace(sOpt.negative,"")}else{if(number.indexOf(sOpt.positive)>-1){number=number.replace(sOpt.positive,"")}}number=number.replace(new RegExp(sOpt.group,"g"),"")}else{if(number<0){isNegative=true;number*=-1}}number=parseFloat(number);if(isNaN(number)){return"NAN"}return tOpt._format?tOpt._format(number,isNegative):me._format(number,{group:tOpt.group||",",decimal:tOpt.decimal||".",groupLength:tOpt.groupLength,symbol:isNegative?tOpt.negative:tOpt.positive})},_format:function(number,options){var numberArray=String(number).split(options.decimal),preNum=numberArray[0].split("").reverse(),aftNum=numberArray[1]||"",len=0,remainder=0,result="";len=parseInt(preNum.length/options.groupLength);remainder=preNum.length%options.groupLength;len=remainder==0?len-1:len;for(var i=1;i<=len;i++){preNum.splice(options.groupLength*i+(i-1),0,options.group)}preNum=preNum.reverse();result=options.symbol+preNum.join("")+(aftNum.length>0?options.decimal+aftNum:"");return result}};baidu.i18n.currency=baidu.i18n.currency||{format:function(number,sLocale,tLocale){var me=this,sOpt=sLocale&&baidu.i18n.cultures[sLocale].currency,tOpt=baidu.i18n.cultures[tLocale||baidu.i18n.currentLocale].currency,result;if(typeof number==="string"){number=number.replace(sOpt.symbol)}return tOpt.symbol+this._format(number,sLocale,tLocale)},_format:function(number,sLocale,tLocale){return baidu.i18n.number.format(number,sLocale,tLocale||baidu.i18n.currentLocale)}};baidu.i18n.date=baidu.i18n.date||{getDaysInMonth:function(year,month){var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(month==1&&baidu.i18n.date.isLeapYear(year)){return 29}return days[month]},isLeapYear:function(year){return !(year%400)||(!(year%4)&&!!(year%100))},toLocaleDate:function(dateObject,sLocale,tLocale){return this._basicDate(dateObject,sLocale,tLocale||baidu.i18n.currentLocale)},_basicDate:function(dateObject,sLocale,tLocale){var tTimeZone=baidu.i18n.cultures[tLocale||baidu.i18n.currentLocale].timeZone,tTimeOffset=tTimeZone*60,sTimeZone,sTimeOffset,millisecond=dateObject.getTime();if(sLocale){sTimeZone=baidu.i18n.cultures[sLocale].timeZone;sTimeOffset=sTimeZone*60}else{sTimeOffset=-1*dateObject.getTimezoneOffset();sTimeZone=sTimeOffset/60}return new Date(sTimeZone!=tTimeZone?(millisecond+(tTimeOffset-sTimeOffset)*60000):millisecond)},format:function(dateObject,tLocale){var c=baidu.i18n.cultrues[tLocale||baidu.i18n.currentLocale];return baidu.date.format(baidu.i18n.date.toLocaleDate(dateObject,"",tLocale),c.calendar.dateFormat)}};baidu.i18n.string=baidu.i18n.string||{trim:function(source,locale){var pat=baidu.i18n.cultures[locale||baidu.i18n.currentLocale].whitespace;return String(source).replace(pat,"")},translation:function(source,locale){var tOpt=baidu.i18n.cultures[locale||baidu.i18n.currentLocale].language;return tOpt[source]||""}};baidu.json.decode=baidu.json.parse;baidu.json.stringify=(function(){var escapeMap={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function encodeString(source){if(/["\\\x00-\x1f]/.test(source)){source=source.replace(/["\\\x00-\x1f]/g,function(match){var c=escapeMap[match];if(c){return c}c=match.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})}return'"'+source+'"'}function encodeArray(source){var result=["["],l=source.length,preComma,i,item;for(i=0;i<l;i++){item=source[i];switch(typeof item){case"undefined":case"function":case"unknown":break;default:if(preComma){result.push(",")}result.push(baidu.json.stringify(item));preComma=1}}result.push("]");return result.join("")}function pad(source){return source<10?"0"+source:source}function encodeDate(source){return'"'+source.getFullYear()+"-"+pad(source.getMonth()+1)+"-"+pad(source.getDate())+"T"+pad(source.getHours())+":"+pad(source.getMinutes())+":"+pad(source.getSeconds())+'"'}return function(value){switch(typeof value){case"undefined":return"undefined";case"number":return isFinite(value)?String(value):"null";case"string":return encodeString(value);case"boolean":return String(value);default:if(value===null){return"null"}else{if(baidu.type(value)==="array"){return encodeArray(value)}else{if(baidu.type(value)==="date"){return encodeDate(value)}else{var result=["{"],encode=baidu.json.stringify,preComma,item;for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){item=value[key];switch(typeof item){case"undefined":case"unknown":case"function":break;default:if(preComma){result.push(",")}preComma=1;result.push(encode(key)+":"+encode(item))}}}result.push("}");return result.join("")}}}}}})();baidu.json.encode=baidu.json.stringify;baidu.lang.Class.prototype.addEventListeners=function(events,fn){if(typeof fn=="undefined"){for(var i in events){this.addEventListener(i,events[i])}}else{events=events.split(",");var i=0,len=events.length,event;for(;i<len;i++){this.addEventListener(baidu.trim(events[i]),fn)}}};baidu.lang.createClass=function(constructor,options){options=options||{};var superClass=options.superClass||baidu.lang.Class;var fn=function(){var me=this;options.decontrolled&&(me.__decontrolled=true);superClass.apply(me,arguments);for(i in fn.options){me[i]=fn.options[i]}constructor.apply(me,arguments);for(var i=0,reg=fn["\x06r"];reg&&i<reg.length;i++){reg[i].apply(me,arguments)}};fn.options=options.options||{};var C=function(){},cp=constructor.prototype;C.prototype=superClass.prototype;var fp=fn.prototype=new C();for(var i in cp){fp[i]=cp[i]}var type=options.className||options.type;typeof type=="string"&&(fp.__type=type);fp.constructor=cp.constructor;fn.extend=function(json){for(var i in json){fn.prototype[i]=json[i]}return fn};return fn};baidu.lang.decontrol=function(){var maps=baidu.global("_maps_id");return function(guid){delete maps[guid]}}();baidu.lang.eventCenter=baidu.lang.eventCenter||baidu.lang.createSingle();baidu.lang.getModule=function(name,opt_obj){var parts=name.split("."),cur=opt_obj||window,part;for(;part=parts.shift();){if(cur[part]!=null){cur=cur[part]}else{return null}}return cur};baidu.lang.isBoolean=baidu.isBoolean;baidu.lang.isDate=baidu.isDate;baidu.lang.isElement=baidu.isElement;baidu.lang.isObject=baidu.isObject;baidu.lang.isWindow=function(unknow){return baidu.type(unknow)=="Window"};baidu.lang.module=function(name,module,owner){var packages=name.split("."),len=packages.length-1,packageName,i=0;if(!owner){try{if(!(new RegExp("^[a-zA-Z_\x24][a-zA-Z0-9_\x24]*\x24")).test(packages[0])){throw""}owner=window["eval"](packages[0]);i=1}catch(e){owner=window}}for(;i<len;i++){packageName=packages[i];if(!owner[packageName]){owner[packageName]={}}owner=owner[packageName]}if(!owner[packages[len]]){owner[packages[len]]=module}};baidu.lang.register=function(Class,constructorHook,methods){var reg=Class["\x06r"]||(Class["\x06r"]=[]);reg[reg.length]=constructorHook;for(var method in methods){Class.prototype[method]=methods[method]}};baidu.global("_maps_id");baidu.number.extend({comma:function(length){var source=this;if(!length||length<1){length=3}source=String(source).split(".");source[0]=source[0].replace(new RegExp("(\\d)(?=(\\d{"+length+"})+$)","ig"),"$1,");return source.join(".")}});baidu.number.randomInt=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)};baidu.object.clone=function(source){var result=source,i,len;if(!source||source instanceof Number||source instanceof String||source instanceof Boolean){return result}else{if(baidu.lang.isArray(source)){result=[];var resultLen=0;for(i=0,len=source.length;i<len;i++){result[resultLen++]=baidu.object.clone(source[i])}}else{if(baidu.object.isPlain(source)){result={};for(i in source){if(source.hasOwnProperty(i)){result[i]=baidu.object.clone(source[i])}}}}}return result};baidu.object.keys=function(source){var result=[],resultLen=0,k;for(k in source){if(source.hasOwnProperty(k)){result[resultLen++]=k}}return result};baidu.object.map=function(source,iterator){var results={};for(var key in source){if(source.hasOwnProperty(key)){results[key]=iterator(source[key],key)}}return results};(function(){var isPlainObject=function(source){return baidu.lang.isObject(source)&&!baidu.lang.isFunction(source)};function mergeItem(target,source,index,overwrite,recursive){if(source.hasOwnProperty(index)){if(recursive&&isPlainObject(target[index])){baidu.object.merge(target[index],source[index],{overwrite:overwrite,recursive:recursive})}else{if(overwrite||!(index in target)){target[index]=source[index]}}}}baidu.object.merge=function(target,source,opt_options){var i=0,options=opt_options||{},overwrite=options.overwrite,whiteList=options.whiteList,recursive=options.recursive,len;if(whiteList&&whiteList.length){len=whiteList.length;for(;i<len;++i){mergeItem(target,source,whiteList[i],overwrite,recursive)}}else{for(i in source){mergeItem(target,source,i,overwrite,recursive)}}return target}})();baidu.page.createStyleSheet=function(options){var op=options||{},doc=op.document||document,s;if(baidu.browser.ie){if(!op.url){op.url=""}return doc.createStyleSheet(op.url,op.index)}else{s="<style type='text/css'></style>";op.url&&(s="<link type='text/css' rel='stylesheet' href='"+op.url+"'/>");baidu.dom.insertHTML(doc.getElementsByTagName("HEAD")[0],"beforeEnd",s);if(op.url){return null}var sheet=doc.styleSheets[doc.styleSheets.length-1],rules=sheet.rules||sheet.cssRules;return{self:sheet,rules:sheet.rules||sheet.cssRules,addRule:function(selector,style,i){if(sheet.addRule){return sheet.addRule(selector,style,i)}else{if(sheet.insertRule){isNaN(i)&&(i=rules.length);return sheet.insertRule(selector+"{"+style+"}",i)}}},removeRule:function(i){if(sheet.removeRule){sheet.removeRule(i)}else{if(sheet.deleteRule){isNaN(i)&&(i=0);sheet.deleteRule(i)}}}}}};baidu.page.getHeight=function(){var doc=document,body=doc.body,html=doc.documentElement,client=doc.compatMode=="BackCompat"?body:doc.documentElement;return Math.max(html.scrollHeight,body.scrollHeight,client.clientHeight)};baidu.page.getViewHeight=function(){var doc=document,client=doc.compatMode=="BackCompat"?doc.body:doc.documentElement;return client.clientHeight};baidu.page.getViewWidth=function(){var doc=document,client=doc.compatMode=="BackCompat"?doc.body:doc.documentElement;return client.clientWidth};baidu.page.getWidth=function(){var doc=document,body=doc.body,html=doc.documentElement,client=doc.compatMode=="BackCompat"?body:doc.documentElement;return Math.max(html.scrollWidth,body.scrollWidth,client.clientWidth)};baidu.page.lazyLoadImage=function(options){options=options||{};options.preloadHeight=options.preloadHeight||0;baidu.dom.ready(function(){var imgs=document.getElementsByTagName("IMG"),targets=imgs,len=imgs.length,i=0,viewOffset=getLoadOffset(),srcAttr="data-tangram-ori-src",target;if(options.className){targets=[];for(;i<len;++i){if(baidu.dom.hasClass(imgs[i],options.className)){targets.push(imgs[i])}}}function getLoadOffset(){return baidu.page.getScrollTop()+baidu.page.getViewHeight()+options.preloadHeight}for(i=0,len=targets.length;i<len;++i){target=targets[i];if(baidu.dom.getPosition(target).top>viewOffset){target.setAttribute(srcAttr,target.src);options.placeHolder?target.src=options.placeHolder:target.removeAttribute("src")}}var loadNeeded=function(){var viewOffset=getLoadOffset(),imgSrc,finished=true,i=0,len=targets.length;for(;i<len;++i){target=targets[i];imgSrc=target.getAttribute(srcAttr);imgSrc&&(finished=false);if(baidu.dom.getPosition(target).top<viewOffset&&imgSrc){target.src=imgSrc;target.removeAttribute(srcAttr);baidu.lang.isFunction(options.onlazyload)&&options.onlazyload(target)}}finished&&baidu.dom(window).off("scroll",loadNeeded)};baidu.dom(window).on("scroll",loadNeeded)})};baidu.page.load=function(resources,options,ignoreAllLoaded){options=options||{};var self=baidu.page.load,cache=self._cache=self._cache||{},loadingCache=self._loadingCache=self._loadingCache||{},parallel=options.parallel;function allLoadedChecker(){for(var i=0,len=resources.length;i<len;++i){if(!cache[resources[i].url]){setTimeout(arguments.callee,10);return}}options.onload()}function loadByDom(res,callback){var node,loaded,onready;switch(res.type.toLowerCase()){case"css":node=document.createElement("link");node.setAttribute("rel","stylesheet");node.setAttribute("type","text/css");break;case"js":node=document.createElement("script");node.setAttribute("type","text/javascript");node.setAttribute("charset",res.charset||self.charset);break;case"html":node=document.createElement("iframe");node.frameBorder="none";break;default:return}var elem=baidu.dom(node);onready=function(){if(!loaded&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){loaded=true;elem.off("load",onready);elem.off("readystatechange",onready);callback.call(window,node)}};elem.on("load",onready);elem.on("readystatechange",onready);if(res.type=="css"){(function(){if(loaded){return}try{node.sheet.cssRule}catch(e){setTimeout(arguments.callee,20);return}loaded=true;callback.call(window,node)})()}node.href=node.src=res.url;document.getElementsByTagName("head")[0].appendChild(node)}baidu.lang.isString(resources)&&(resources=[{url:resources}]);if(!(resources&&resources.length)){return}function loadResources(res){var url=res.url,shouldContinue=!!parallel,cacheData,callback=function(textOrNode){cache[res.url]=textOrNode;delete loadingCache[res.url];if(baidu.lang.isFunction(res.onload)){if(false===res.onload.call(window,textOrNode)){return}}!parallel&&self(resources.slice(1),options,true);if((!ignoreAllLoaded)&&baidu.lang.isFunction(options.onload)){allLoadedChecker()}};res.type=res.type||url.replace(/^[^\?#]+\.(css|js|html)(\?|#| |$)[^\?#]*/i,"$1");res.requestType=res.requestType||(res.type=="html"?"ajax":"dom");if(cacheData=cache[res.url]){callback(cacheData);return shouldContinue}if(!options.refresh&&loadingCache[res.url]){setTimeout(function(){loadResources(res)},10);return shouldContinue}loadingCache[res.url]=true;if(res.requestType.toLowerCase()=="dom"){loadByDom(res,callback)}else{baidu.ajax.get(res.url,function(xhr,responseText){callback(responseText)})}return shouldContinue}baidu.forEach(resources,loadResources)};baidu.page.load.charset="UTF8";baidu.page.loadCssFile=function(path){var element=document.createElement("link");element.setAttribute("rel","stylesheet");element.setAttribute("type","text/css");element.setAttribute("href",path);document.getElementsByTagName("head")[0].appendChild(element)};baidu.page.loadJsFile=function(path){var element=document.createElement("script");element.setAttribute("type","text/javascript");element.setAttribute("src",path);element.setAttribute("defer","defer");document.getElementsByTagName("head")[0].appendChild(element)};baidu.param=function(arg){arg=arg||arguments.callee.caller.arguments;var s="",n=arg.length;for(var i=0;i<n;i++){s+=","+baidu.type(arg[i])}return s?s.substr(1):""};baidu.platform=baidu.platform||function(){var ua=navigator.userAgent,result=function(){};baidu.forEach("Android iPad iPhone Linux Macintosh Windows X11".split(" "),function(item){var key=item.charAt(0).toUpperCase()+item.toLowerCase().substr(1);baidu["is"+key]=result["is"+key]=ua.indexOf(item)>-1});return result}();baidu.post=baidu.post||baidu._util_.smartAjax("post");baidu.regexp=baidu.regexp||{};baidu.regexp.compile=function(maps){return function(regString,modal){var reg,key=regString+"$$"+modal;!(reg=maps[key])&&(reg=maps[key]=new RegExp(regString,modal));reg.lastIndex>0&&(reg.lastIndex=0);return reg}}(baidu.global("_maps_RegExp"));baidu.createChain("sio",function(url){switch(typeof url){case"string":return new baidu.sio.$Sio(url);break}},function(url){this.url=url});baidu.sio._createScriptTag=function(scr,url,charset){scr.setAttribute("type","text/javascript");charset&&scr.setAttribute("charset",charset);scr.setAttribute("src",url);document.getElementsByTagName("head")[0].appendChild(scr)};baidu.sio._removeScriptTag=function(scr){if(scr.clearAttributes){scr.clearAttributes()}else{for(var attr in scr){if(scr.hasOwnProperty(attr)){delete scr[attr]}}}if(scr&&scr.parentNode){scr.parentNode.removeChild(scr)}scr=null};baidu.sio.extend({callByBrowser:function(opt_callback,opt_options){var url=this.url;var scr=document.createElement("SCRIPT"),scriptLoaded=0,options=opt_options||{},charset=options.charset,callback=opt_callback||function(){},timeOut=options.timeOut||0,timer;scr.onload=scr.onreadystatechange=function(){if(scriptLoaded){return}var readyState=scr.readyState;if("undefined"==typeof readyState||readyState=="loaded"||readyState=="complete"){scriptLoaded=1;try{callback();clearTimeout(timer)}finally{scr.onload=scr.onreadystatechange=null;baidu.sio._removeScriptTag(scr)}}};if(timeOut){timer=setTimeout(function(){scr.onload=scr.onreadystatechange=null;baidu.sio._removeScriptTag(scr);options.onfailure&&options.onfailure()},timeOut)}baidu.sio._createScriptTag(scr,url,charset)}});baidu.sio.extend({callByServer:function(callback,opt_options){var url=this.url;var scr=document.createElement("SCRIPT"),prefix="bd__cbs__",callbackName,callbackImpl,options=opt_options||{},charset=options.charset,queryField=options.queryField||"callback",timeOut=options.timeOut||0,timer,reg=new RegExp("(\\?|&)"+queryField+"=([^&]*)"),matches;if(baidu.lang.isFunction(callback)){callbackName=prefix+Math.floor(Math.random()*2147483648).toString(36);window[callbackName]=getCallBack(0)}else{if(baidu.lang.isString(callback)){callbackName=callback}else{if(matches=reg.exec(url)){callbackName=matches[2]}}}if(timeOut){timer=setTimeout(getCallBack(1),timeOut)}url=url.replace(reg,"\x241"+queryField+"="+callbackName);if(url.search(reg)<0){url+=(url.indexOf("?")<0?"?":"&")+queryField+"="+callbackName}baidu.sio._createScriptTag(scr,url,charset);function getCallBack(onTimeOut){return function(){try{if(onTimeOut){options.onfailure&&options.onfailure()}else{callback.apply(window,arguments);clearTimeout(timer)}window[callbackName]=null;delete window[callbackName]}catch(exception){}finally{baidu.sio._removeScriptTag(scr)}}}}});baidu.sio.extend({log:function(){url=this.url;var img=new Image(),key="tangram_sio_log_"+Math.floor(Math.random()*2147483648).toString(36);window[key]=img;img.onload=img.onerror=img.onabort=function(){img.onload=img.onerror=img.onabort=null;window[key]=null;img=null};img.src=url}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(window,undefined){baidu.query=function(selector,context,results){return baidu.merge(results||[],baidu.sizzle(selector,context))};var document=window.document,docElem=document.documentElement,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,strundefined="undefined",hasDuplicate=false,baseHasDuplicate=true,rquickExpr=/^#([\w\-]+$)|^(\w+$)|^\.([\w\-]+$)/,chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,rbackslash=/\\/g,rnonWord=/\W/,rstartsWithWord=/^\w/,rnonDigit=/\D/,rnth=/(-?)(\d*)(?:n([+\-]?\d*))?/,radjacent=/^\+|\s*/g,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rtnfr=/[\t\n\f\r]/g,characterEncoding="(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)",matchExpr={ID:new RegExp("#("+characterEncoding+"+)"),CLASS:new RegExp("\\.("+characterEncoding+"+)"),NAME:new RegExp("\\[name=['\"]*("+characterEncoding+"+)['\"]*\\]"),TAG:new RegExp("^("+characterEncoding.replace("[-","[-\\*")+"+)"),ATTR:new RegExp("\\[\\s*("+characterEncoding+"+)\\s*(?:(\\S?=)\\s*(?:(['\"])(.*?)\\3|(#?"+characterEncoding+"*)|)|)\\s*\\]"),PSEUDO:new RegExp(":("+characterEncoding+"+)(?:\\((['\"]?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\2\\))?"),CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/},origPOS=matchExpr.POS,leftMatchExpr=(function(){var type,fescape=function(all,num){return"\\"+(num-0+1)},leftMatch={};for(type in matchExpr){matchExpr[type]=new RegExp(matchExpr[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+matchExpr[type].source.replace(/\\(\d+)/g,fescape))}matchExpr.globalPOS=origPOS;return leftMatch})(),assert=function(fn){var pass=false,div=document.createElement("div");try{pass=fn(div)}catch(e){}div=null;return pass},assertGetIdNotName=assert(function(div){var pass=true,id="script"+(new Date()).getTime();div.innerHTML="<a name ='"+id+"'/>";docElem.insertBefore(div,docElem.firstChild);if(document.getElementById(id)){pass=false}docElem.removeChild(div);return pass}),assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return div.getElementsByTagName("*").length===0}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return false}div.lastChild.className="e";return div.getElementsByClassName("e").length!==1});[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results){results=results||[];context=context||document;var match,elem,contextXML,nodeType=context.nodeType;if(nodeType!==1&&nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}contextXML=isXML(context);if(!contextXML){if((match=rquickExpr.exec(selector))){if(match[1]){if(nodeType===9){elem=context.getElementById(match[1]);if(elem&&elem.parentNode){if(elem.id===match[1]){return makeArray([elem],results)}}else{return makeArray([],results)}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(match[1]))&&contains(context,elem)&&elem.id===match[1]){return makeArray([elem],results)}}}else{if(match[2]){if(selector==="body"&&context.body){return makeArray([context.body],results)}return makeArray(context.getElementsByTagName(selector),results)}else{if(assertUsableClassName&&match[3]&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[3]),results)}}}}}return select(selector,context,results,undefined,contextXML)};var select=function(selector,context,results,seed,contextXML){var m,set,checkSet,extra,ret,cur,pop,i,origContext=context,prune=true,parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context,seed,contextXML)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set,seed,contextXML)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&matchExpr.ID.test(parts[0])&&!matchExpr.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),(parts.length>=1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode)||context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){Sizzle.error(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i])}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){select(extra,origContext,results,seed,contextXML);uniqueSort(results)}return results};var isXML=Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var makeArray=function(array,results){results=results||[];var i=0,len=array.length;if(typeof len==="number"){for(;i<len;i++){results.push(array[i])}}else{for(;array[i];i++){results.push(array[i])}}return results};var uniqueSort=Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};var contains=Sizzle.contains=docElem.compareDocumentPosition?function(a,b){return !!(a.compareDocumentPosition(b)&16)}:docElem.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):false)}:function(a,b){while((b=b.parentNode)){if(b===a){return true}}return false};Sizzle.matches=function(expr,set){return select(expr,document,[],set,isXML(document))};Sizzle.matchesSelector=function(node,expr){return select(expr,document,[],[node],isXML(document)).length>0};Sizzle.find=function(expr,context,contextXML){var set,i,len,match,type,left;if(!expr){return[]}for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if((match=leftMatchExpr[type].exec(expr))){left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rbackslash,"");set=Expr.find[type](match,context,contextXML);if(set!=null){expr=expr.replace(matchExpr[type],"");break}}}}if(!set){set=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName("*"):[]}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(type in Expr.filter){if((match=leftMatchExpr[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type];left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue}if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);pass=not^found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(matchExpr[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){Sizzle.error(expr)}else{break}}old=expr}return curLoop};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}else{for(i=0;(node=elem[i]);i++){if(node.nodeType!==8){ret+=getText(node)}}}return ret};var Expr=Sizzle.selectors={match:matchExpr,leftMatch:leftMatchExpr,order:["ID","NAME","TAG"],attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:assertHrefNotNormalized?function(elem){return elem.getAttribute("href")}:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rnonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!rnonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,xml){dirCheck("parentNode",checkSet,part,xml)},"~":function(checkSet,part,xml){dirCheck("previousSibling",checkSet,part,xml)}},find:{ID:assertGetIdNotName?function(match,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}}:function(match,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},NAME:function(match,context){if(typeof context.getElementsByName!==strundefined){var ret=[],results=context.getElementsByName(match[1]),i=0,len=results.length;for(;i<len;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:assertTagNameNoComments?function(match,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(match[1])}}:function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[],i=0;for(;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,xml){match=" "+match[1].replace(rbackslash,"")+" ";if(xml){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(rtnfr," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(rbackslash,"")},TAG:function(match,curLoop){return match[1].replace(rbackslash,"").toLowerCase()},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[2]=match[2].replace(radjacent,"");var test=rnth.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!rnonDigit.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}else{if(match[2]){Sizzle.error(match[0])}}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,xml){var name=match[1]=match[1].replace(rbackslash,"");if(!xml&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}match[4]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not,xml){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||rstartsWithWord.test(match[3])){match[3]=select(match[3],document,[],curLoop,xml)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,!not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(matchExpr.POS.test(match[0])||matchExpr.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===null||attr.toLowerCase()===type)},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"submit"===elem.type},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button"},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href)},active:function(elem){return elem===elem.ownerDocument.activeElement},contains:function(elem,i,match){return(elem.textContent||elem.innerText||getText(elem)).indexOf(match[3])>=0}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="not"){var not=match[3],j=0,len=not.length;for(;j<len;j++){if(not[j]===elem){return false}}return true}else{Sizzle.error(name)}}},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":first=match[2];last=match[3];if(first===1&&last===0){return true}doneName=match[0];parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent[expando]=doneName}diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:assertGetIdNotName?function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match}:function(elem,match){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":!type&&Sizzle.attr?result!=null:type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};if(assertUsableClassName){Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(match[1])}}}var sortOrder,siblingCheck;if(docElem.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}else{if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}}var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else{if(!aup){return -1}else{if(!bup){return 1}}}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return -1}cur=cur.nextSibling}return 1}}if(document.querySelectorAll){(function(){var oldSelect=select,id="__sizzle__",rrelativeHierarchy=/^\s*[+~]/,rapostrophe=/'/g,rbuggyQSA=[];assert(function(div){div.innerHTML="<select><option selected></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\[[\\x20\\t\\n\\r\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){div.innerHTML="<p class=''></p>";if(div.querySelectorAll("[class^='']").length){rbuggyQSA.push("[*^$]=[\\x20\\t\\n\\r\\f]*(?:\"\"|'')")}div.innerHTML="<input type='hidden'>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,contextXML){if(!seed&&!contextXML&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(context.nodeType===9){try{return makeArray(context.querySelectorAll(selector),results)}catch(qsaError){}}else{if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,parent=context.parentNode,relativeHierarchySelector=rrelativeHierarchy.test(selector);if(!old){context.setAttribute("id",nid)}else{nid=nid.replace(rapostrophe,"\\$&")}if(relativeHierarchySelector&&parent){context=parent}try{if(!relativeHierarchySelector||parent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+selector),results)}}catch(qsaError){}finally{if(!old){oldContext.removeAttribute("id")}}}}}return oldSelect(selector,context,results,seed,contextXML)}})()}function dirCheck(dir,checkSet,part,xml){var elem,match,isElem,nodeCheck,doneName=done++,i=0,len=checkSet.length;if(typeof part==="string"&&!rnonWord.test(part)){part=part.toLowerCase();nodeCheck=part}for(;i<len;i++){elem=checkSet[i];if(elem){match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}isElem=elem.nodeType===1;if(isElem&&!xml){elem[expando]=doneName;elem.sizset=i}if(nodeCheck){if(elem.nodeName.toLowerCase()===part){match=elem;break}}else{if(isElem){if(typeof part!=="string"){if(elem===part){match=true;break}}else{if(Sizzle.filter(part,[elem]).length>0){match=elem;break}}}}elem=elem[dir]}checkSet[i]=match}}}var posProcess=function(selector,context,seed,contextXML){var match,tmpSet=[],later="",root=context.nodeType?[context]:context,i=0,len=root.length;while((match=matchExpr.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(matchExpr.PSEUDO,"")}if(Expr.relative[selector]){selector+="*"}for(;i<len;i++){select(selector,root[i],tmpSet,seed,contextXML)}return Sizzle.filter(later,tmpSet)};window.Sizzle=baidu.sizzle=Sizzle})(window);baidu.string.extend({decodeHTML:function(){var str=this.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return str.replace(/&#([\d]+);/g,function(_0,_1){return String.fromCharCode(parseInt(_1,10))})}});baidu.string.extend({encodeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}});baidu.string.filterFormat=function(source,opts){var data=Array.prototype.slice.call(arguments,1),toString=Object.prototype.toString;if(data.length){data=data.length==1?(opts!==null&&(/\[object Array\]|\[object Object\]/.test(toString.call(opts)))?opts:data):data;return source.replace(/#\{(.+?)\}/g,function(match,key){var filters,replacer,i,len,func;if(!data){return""}filters=key.split("|");replacer=data[filters[0]];if("[object Function]"==toString.call(replacer)){replacer=replacer(filters[0])}for(i=1,len=filters.length;i<len;++i){func=baidu.string.filterFormat[filters[i]];if("[object Function]"==toString.call(func)){replacer=func(replacer)}}return(("undefined"==typeof replacer||replacer===null)?"":replacer)})}return source};baidu.string.filterFormat.escapeJs=function(str){if(!str||"string"!=typeof str){return str}var i,len,charCode,ret=[];for(i=0,len=str.length;i<len;++i){charCode=str.charCodeAt(i);if(charCode>255){ret.push(str.charAt(i))}else{ret.push("\\x"+charCode.toString(16))}}return ret.join("")};baidu.string.filterFormat.js=baidu.string.filterFormat.escapeJs;baidu.string.filterFormat.escapeString=function(str){if(!str||"string"!=typeof str){return str}return str.replace(/["'<>\\\/`]/g,function($0){return"&#"+$0.charCodeAt(0)+";"})};baidu.string.filterFormat.e=baidu.string.filterFormat.escapeString;baidu.string.filterFormat.toInt=function(str){return parseInt(str,10)||0};baidu.string.filterFormat.i=baidu.string.filterFormat.toInt;baidu.string.extend({format:function(opts){var source=this.valueOf(),data=Array.prototype.slice.call(arguments,0),toString=Object.prototype.toString;if(data.length){data=data.length==1?(opts!==null&&(/\[object Array\]|\[object Object\]/.test(toString.call(opts)))?opts:data):data;return source.replace(/#\{(.+?)\}/g,function(match,key){var replacer=data[key];if("[object Function]"==toString.call(replacer)){replacer=replacer(key)}return("undefined"==typeof replacer?"":replacer)})}return source}});baidu.string.extend({getByteLength:function(){return this.replace(/[^\x00-\xff]/g,"ci").length}});baidu.string.extend({stripTags:function(){return(this||"").replace(/<[^>]+>/g,"")}});baidu.string.extend({subByte:function(len,tail){baidu.check("^(?:number(?:,(?:string|number))?)$","baidu.string.subByte");var source=this.valueOf();tail=tail||"";if(len<0||baidu.string(source).getByteLength()<=len){return source+tail}source=source.substr(0,len).replace(/([^\x00-\xff])/g,"\x241 ").substr(0,len).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"\x241");return source+tail}});baidu.string.extend({toHalfWidth:function(){return this.replace(/[\uFF01-\uFF5E]/g,function(c){return String.fromCharCode(c.charCodeAt(0)-65248)}).replace(/\u3000/g," ")}});baidu.string.extend({wbr:function(){return this.replace(/(?:<[^>]+>)|(?:&#?[0-9a-z]{2,6};)|(.{1})/gi,"$&<wbr>").replace(/><wbr>/g,">")}});baidu.swf=baidu.swf||{};baidu.swf.version=(function(){var n=navigator;if(n.plugins&&n.mimeTypes.length){var plugin=n.plugins["Shockwave Flash"];if(plugin&&plugin.description){return plugin.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0"}}else{if(window.ActiveXObject&&!window.opera){for(var i=12;i>=2;i--){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);if(c){var version=c.GetVariable("$version");return version.replace(/WIN/g,"").replace(/,/g,".")}}catch(e){}}}}})();baidu.swf.createHTML=function(options){options=options||{};var version=baidu.swf.version,needVersion=options.ver||"6.0.0",vUnit1,vUnit2,i,k,len,item,tmpOpt={},encodeHTML=baidu.string.encodeHTML;for(k in options){tmpOpt[k]=options[k]}options=tmpOpt;if(version){version=version.split(".");needVersion=needVersion.split(".");for(i=0;i<3;i++){vUnit1=parseInt(version[i],10);vUnit2=parseInt(needVersion[i],10);if(vUnit2<vUnit1){break}else{if(vUnit2>vUnit1){return""}}}}else{return""}var vars=options.vars,objProperties=["classid","codebase","id","width","height","align"];options.align=options.align||"middle";options.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";options.codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0";options.movie=options.url||"";delete options.vars;delete options.url;if("string"==typeof vars){options.flashvars=vars}else{var fvars=[];for(k in vars){item=vars[k];fvars.push(k+"="+encodeURIComponent(item))}options.flashvars=fvars.join("&")}var str=["<object "];for(i=0,len=objProperties.length;i<len;i++){item=objProperties[i];str.push(" ",item,'="',encodeHTML(options[item]),'"')}str.push(">");var params={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(k in options){item=options[k];k=k.toLowerCase();if(params[k]&&(item||item===false||item===0)){str.push('<param name="'+k+'" value="'+encodeHTML(item)+'" />')}}options.src=options.movie;options.name=options.id;delete options.id;delete options.movie;delete options.classid;delete options.codebase;options.type="application/x-shockwave-flash";options.pluginspage="http://www.macromedia.com/go/getflashplayer";str.push("<embed");var salign;for(k in options){item=options[k];if(item||item===false||item===0){if((new RegExp("^salign\x24","i")).test(k)){salign=item;continue}str.push(" ",k,'="',encodeHTML(item),'"')}}if(salign){str.push(' salign="',encodeHTML(salign),'"')}str.push("></embed></object>");return str.join("")};baidu.swf.create=function(options,target){options=options||{};var html=baidu.swf.createHTML(options)||options.errorMessage||"";if(target&&"string"==typeof target){target=document.getElementById(target)}baidu.dom.insertHTML(target||document.body,"beforeEnd",html)};baidu.swf.getMovie=function(name){var movie=document[name],ret;return baidu.browser.ie==9?movie&&movie.length?(ret=baidu.array.remove(baidu.lang.toArray(movie),function(item){return item.tagName.toLowerCase()!="embed"})).length==1?ret[0]:ret:movie:movie||window[name]};baidu.swf.Proxy=function(id,property,loadedHandler){var me=this,flash=this._flash=baidu.swf.getMovie(id),timer;if(!property){return this}timer=setInterval(function(){try{if(flash[property]){me._initialized=true;clearInterval(timer);if(loadedHandler){loadedHandler()}}}catch(e){}},100)};baidu.swf.Proxy.prototype.getFlash=function(){return this._flash};baidu.swf.Proxy.prototype.isReady=function(){return !!this._initialized};baidu.swf.Proxy.prototype.call=function(methodName,var_args){try{var flash=this.getFlash(),args=Array.prototype.slice.call(arguments);args.shift();if(flash[methodName]){flash[methodName].apply(flash,args)}}catch(e){}};baidu.url.getQueryValue=function(url,key){var reg=new RegExp("(^|&|\\?|#)"+baidu.string.escapeReg(key)+"=([^&#]*)(&|\x24|#)","");var match=url.match(reg);if(match){return match[2]}return null};baidu.url.jsonToQuery=function(json,replacer_opt){var result=[],itemLen,replacer=replacer_opt||function(value){return baidu.url.escapeSymbol(value)};baidu.object.each(json,function(item,key){if(baidu.lang.isArray(item)){itemLen=item.length;while(itemLen--){result.push(key+"="+replacer(item[itemLen],key))}}else{result.push(key+"="+replacer(item,key))}});return result.join("&")};baidu.url.queryToJson=function(url){var params=url.substr(url.lastIndexOf("?")+1).split("&"),len=params.length,ret=null,entry,key,val;for(var i=0;i<len;i++){entry=params[i].split("=");if(entry.length<2){continue}!ret&&(ret={});key=entry[0];val=entry[1];entry=ret[key];if(!entry){ret[key]=val}else{if(baidu.lang.isArray(entry)){entry.push(val)}else{ret[key]=[entry,val]}}}return ret};(function(){var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()};baidu.extend(baidu._util_,{camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)}});baidu.extend(baidu._util_,{cache:{},deletedIds:[],uuid:0,expando:"baidu"+("2.0.0"+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(elem){elem=elem.nodeType?baidu._util_.cache[elem[baidu._util_.expando]]:elem[baidu._util_.expando];return !!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!baidu._util_.acceptData(elem)){return}var thisCache,ret,internalKey=baidu._util_.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?baidu._util_.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||(!pvt&&!cache[id].data))&&getByName&&data===undefined){return}if(!id){if(isNode){elem[internalKey]=id=baidu._util_.deletedIds.pop()||++baidu._util_.uuid}else{id=internalKey}}if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=function(){}}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=baidu.extend(cache[id],name)}else{cache[id].data=baidu.extend(cache[id].data,name)}}thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={}}thisCache=thisCache.data}if(data!==undefined){thisCache[baidu._util_.camelCase(name)]=data}if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[baidu._util_.camelCase(name)]}}else{ret=thisCache}return ret},removeData:function(elem,name,pvt){if(!baidu._util_.acceptData(elem)){return}var thisCache,i,l,isNode=elem.nodeType,cache=isNode?baidu._util_.cache:elem,id=isNode?elem[baidu._util_.expando]:baidu._util_.expando;if(!cache[id]){return}if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!baidu.isArray(name)){if(name in thisCache){name=[name]}else{name=baidu._util_.camelCase(name);if(name in thisCache){name=[name]}else{name=name.split(" ")}}}for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]]}if(!(pvt?isEmptyDataObject:baidu.object.isEmpty)(thisCache)){return}}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return}}if(isNode){baidu._util_.cleanData([elem],true)}else{if(baidu.support.deleteExpando||cache!=cache.window){delete cache[id]}else{cache[id]=null}}},_data:function(elem,name,data){return baidu._util_.data(elem,name,data,true)},acceptData:function(elem){var noData=elem.nodeName&&baidu._util_.noData[elem.nodeName.toLowerCase()];return !noData||noData!==true&&elem.getAttribute("classid")===noData}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:baidu.isNumber(data)?+data:rbrace.test(data)?baidu.json.parse(data):data}catch(e){}baidu._util_.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&baidu.object.isEmpty(obj[name])){continue}if(name!=="toJSON"){return false}}return true}})();baidu.array=baidu.array||{};baidu.dom=baidu.dom||{};baidu.addClass=baidu.dom.addClass||{};baidu.g=baidu.G=baidu.dom.g||{};baidu.getAttr=baidu.dom.getAttr||{};baidu.getStyle=baidu.dom.getStyle||{};baidu.hide=baidu.dom.hide||{};baidu.insertHTML=baidu.dom.insertHTML||{};baidu.q=baidu.Q=baidu.dom.q||{};baidu.removeClass=baidu.dom.removeClass||{};baidu.setAttr=baidu.dom.setAttr||{};baidu.setAttrs=baidu.dom.setAttrs||{};baidu.dom.setOuterHeight=baidu.dom.setBorderBoxHeight||{};baidu.dom.setOuterWidth=baidu.dom.setBorderBoxWidth||{};baidu.setStyle=baidu.dom.setStyle||{};baidu.setStyles=baidu.dom.setStyles||{};baidu.show=baidu.dom.show||{};baidu.e=baidu.element=baidu.element||{};baidu.event=baidu.event||{};baidu.on=baidu.event.on||{};baidu.un=baidu.event.un||{};baidu.lang=baidu.lang||{};baidu.inherits=baidu.lang.inherits||{};baidu.object=baidu.object||{};baidu.string=baidu.string||{};baidu.decodeHTML=baidu.string.decodeHTML||{};baidu.encodeHTML=baidu.string.encodeHTML||{};baidu.format=baidu.string.format||{};baidu.trim=baidu.string.trim||{};var passport=passport||window.passport||{},baidu=passport.tangramInst||baidu||window.baidu;(function(ns){ns.apiDomain={staticDomain:(window.location?((window.location.protocol.toLowerCase()=="http:")?"http://passport.bdimg.com":"https://passport.baidu.com"):((document.location.protocol.toLowerCase()=="http:")?"http://passport.bdimg.com":"https://passport.baidu.com"))}})(passport);var magic=null;if(typeof magic!="function"){var magic=function(){}}magic._baiduInstName=magic._baiduInstName||"bdInst_"+new Date().getTime();var baiduInstance=baiduInstance||baidu.baiduInstance||window.baiduInstance;window[magic._baiduInstName]=window[magic._baiduInstName]||baiduInstance;magic.resourcePath="";magic.skinName="default";magic.version="1.0.0.0";/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",false,true);baidu.form=baidu.form||{};baidu.url=baidu.url||{};baidu.url.escapeSymbol=baidu.url.escapeSymbol||function(source){return String(source).replace(/[#%&+=\/\\\ \ã€€\f\r\n\t]/g,function(all){return"%"+(256+all.charCodeAt()).toString(16).substring(1).toUpperCase()})};baidu.form.json=baidu.form.json||function(form,replacer){var elements=form.elements,replacer=replacer||function(value,name){return value},data={},item,itemType,itemName,itemValue,opts,oi,oLen,oItem;function addData(name,value){var val=data[name];if(val){val.push||(data[name]=[val]);data[name].push(value)}else{data[name]=value}}for(var i=0,len=elements.length;i<len;i++){item=elements[i];itemName=item.name;if(!item.disabled&&itemName){itemType=item.type;itemValue=baidu.url.escapeSymbol(item.value);switch(itemType){case"radio":case"checkbox":if(!item.checked){break}case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":addData(itemName,replacer(itemValue,itemName));break;case"select-multiple":opts=item.options;oLen=opts.length;for(oi=0;oi<oLen;oi++){oItem=opts[oi];if(oItem.selected){addData(itemName,replacer(oItem.value,itemName))}}break}}}return data};magic.Base=function(){baidu.lang.Class.call(this);this._ids={};this._eid=this.guid+"__"};baidu.lang.inherits(magic.Base,baidu.lang.Class,"magic.Base").extend({getElement:function(id){return document.getElementById(this.$getId(id))},getElements:function(){var result={};var _ids=this._ids;for(var key in _ids){result[key]=this.getElement(key)}return result},$getId:function(key){key=baidu.lang.isString(key)?key:"";return this._ids[key]||(this._ids[key]=this._eid+key)},$mappingDom:function(key,dom){if(baidu.lang.isString(dom)){this._ids[key]=dom}else{if(dom&&dom.nodeType){dom.id?this._ids[key]=dom.id:dom.id=this.$getId(key)}}return this},$hide:function(ele){if((typeof ele).toLowerCase()=="string"||ele===""){ele=this.getElement(ele)}if(ele&&ele.style){ele.style.display="none";ele.style.visibility="hidden"}return this},$show:function(ele){if((typeof ele).toLowerCase()=="string"||ele===""){ele=this.getElement(ele)}if(ele&&ele.style){ele.style.display="block";ele.style.visibility="visible";ele.style.opacity="1"}return this},$dispose:function(){this.fire("ondispose")&&baidu.lang.Class.prototype.dispose.call(this)}});magic.control=magic.control||{};(function(){magic.setup=magic.setup||function(el,Type,options){var opt=parseAttr(el,"tang-param")||{};for(var i in options){opt[i]=options[i]}var ui=new Type(opt);ui.$mappingDom("",el);attachEvent(el,ui.guid);var doms=el.getElementsByTagName("*");for(var i=doms.length-1;i>=0;i--){attachEvent(doms[i],ui.guid)}return ui};function parseAttr(el,attr){var str=el.getAttribute(attr),keys,json=false;if(str&&(keys=str.match(reg[0]))){json={};for(var i=0,a;i<keys.length;i++){a=keys[i].match(reg[1]);!isNaN(a[2])&&(a[2]=+a[2]);reg[2].test(a[2])&&(a[2]=a[2].replace(reg[3],"\x242"));reg[4].test(a[2])&&(a[2]=reg[5].test(a[2]));json[a[1]]=a[2]}}return json}var reg=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i];function attachEvent(el,guid){var json=parseAttr(el,"tang-event");if(json){for(var i in json){var method=json[i].substr(1);method.indexOf("(")<0&&(method+="()");baidu.dom(el).on(i,new Function(magic._baiduInstName+"('"+guid+"') && "+magic._baiduInstName+"('"+guid+"')"+method))}}}})();passport=passport||{};passport.lib=passport.lib||{};passport.lib.RSAExport={};(function(exports){var dbits;var canary=244837814094590;var j_lm=((canary&16777215)==15715070);function BigInteger(a,b,c){if(a!=null){if("number"==typeof a){this.fromNumber(a,b,c)}else{if(b==null&&"string"!=typeof a){this.fromString(a,256)}else{this.fromString(a,b)}}}}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}if(j_lm&&(navigator.appName=="Microsoft Internet Explorer")){BigInteger.prototype.am=am2;dbits=30}else{if(j_lm&&(navigator.appName!="Netscape")){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=((1<<dbits)-1);BigInteger.prototype.DV=(1<<dbits);var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array();var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv){BI_RC[rr++]=vv}rr="a".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv}rr="A".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv}function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return(c==null)?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i){r[i]=this[i]}r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=(x<0)?-1:0;if(x>0){this[0]=x}else{if(x<-1){this[0]=x+DV}else{this.t=0}}}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16){k=4}else{if(b==8){k=3}else{if(b==256){k=8}else{if(b==2){k=1}else{if(b==32){k=5}else{if(b==4){k=2}else{this.fromRadix(s,b);return}}}}}}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=(k==8)?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-"){mi=true}continue}mi=false;if(sh==0){this[this.t++]=x}else{if(sh+k>this.DB){this[this.t-1]|=(x&((1<<(this.DB-sh))-1))<<sh;this[this.t++]=(x>>(this.DB-sh))}else{this[this.t-1]|=x<<sh}}sh+=k;if(sh>=this.DB){sh-=this.DB}}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0){this[this.t-1]|=((1<<(this.DB-sh))-1)<<sh}}this.clamp();if(mi){BigInteger.ZERO.subTo(this,this)}}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c){--this.t}}function bnToString(b){if(this.s<0){return"-"+this.negate().toString(b)}var k;if(b==16){k=4}else{if(b==8){k=3}else{if(b==2){k=1}else{if(b==32){k=5}else{if(b==4){k=2}else{return this.toRadix(b)}}}}}var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-(i*this.DB)%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&((1<<p)-1))<<(k-p);d|=this[--i]>>(p+=this.DB-k)}else{d=(this[i]>>(p-=k))&km;if(p<=0){p+=this.DB;--i}}if(d>0){m=true}if(m){r+=int2char(d)}}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return(this.s<0)?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0){return r}var i=this.t;r=i-a.t;if(r!=0){return(this.s<0)?-r:r}while(--i>=0){if((r=this[i]-a[i])!=0){return r}}return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0){return 0}return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM))}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i){r[i+n]=this[i]}for(i=n-1;i>=0;--i){r[i]=0}r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i){r[i-n]=this[i]}r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=(this.s<<bs)&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=(this[i]>>cbs)|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i){r[i]=0}r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0){r[this.t-ds-1]|=(this.s&bm)<<cbs}r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=(c<0)?-1:0;if(c<-1){r[i++]=this.DV+c}else{if(c>0){r[i++]=c}}r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0){r[i]=0}for(i=0;i<y.t;++i){r[i+x.t]=x.am(0,y[i],r,i,0,x.t)}r.s=0;r.clamp();if(this.s!=a.s){BigInteger.ZERO.subTo(r,r)}}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0){r[i]=0}for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0){r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)}r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0){return}var pt=this.abs();if(pt.t<pm.t){if(q!=null){q.fromInt(0)}if(r!=null){this.copyTo(r)}return}if(r==null){r=nbi()}var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0){return}var yt=y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=(q==null)?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys){y[y.t++]=0}while(--j>=0){var qd=(r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd){r.subTo(t,r)}}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms){BigInteger.ZERO.subTo(q,q)}}r.t=ys;r.clamp();if(nsh>0){r.rShiftTo(nsh,r)}if(ts<0){BigInteger.ZERO.subTo(r,r)}}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0){a.subTo(r,r)}return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0){return x.mod(this.m)}else{return x}}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1){return 0}var x=this[0];if((x&1)==0){return 0}var y=x&3;y=(y*(2-(x&15)*y))&15;y=(y*(2-(x&255)*y))&255;y=(y*(2-(((x&65535)*y)&65535)))&65535;y=(y*(2-x*y%this.DV))%this.DV;return(y>0)?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(m.DB-15))-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0){this.m.subTo(r,r)}return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2){x[x.t++]=0}for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=(j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0){x.subTo(this.m,x)}}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return((this.t>0)?(this[0]&1):this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1){return BigInteger.ONE}var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&(1<<i))>0){z.mulTo(r2,g,r)}else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven()){z=new Classic(m)}else{z=new Montgomery(m)}return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r}function bnIntValue(){if(this.s<0){if(this.t==1){return this[0]-this.DV}else{if(this.t==0){return -1}}}else{if(this.t==1){return this[0]}else{if(this.t==0){return 0}}}return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0]}function bnByteValue(){return(this.t==0)?this.s:(this[0]<<24)>>24}function bnShortValue(){return(this.t==0)?this.s:(this[0]<<16)>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){if(this.s<0){return -1}else{if(this.t<=0||(this.t==1&&this[0]<=0)){return 0}else{return 1}}}function bnpToRadix(b){if(b==null){b=10}if(this.signum()==0||b<2||b>36){return"0"}var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this.fromInt(0);if(b==null){b=10}var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0){mi=true}continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi){BigInteger.ZERO.subTo(this,this)}}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2){this.fromInt(1)}else{this.fromNumber(a,c);if(!this.testBit(a-1)){this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this)}if(this.isEven()){this.dAddOffset(1,0)}while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a){this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}}}else{var x=new Array(),t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0){x[0]&=((1<<t)-1)}else{x[0]=0}this.fromString(x,256)}}function bnToByteArray(){var i=this.t,r=new Array();r[0]=this.s;var p=this.DB-(i*this.DB)%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p){r[k++]=d|(this.s<<(this.DB-p))}while(i>=0){if(p<8){d=(this[i]&((1<<p)-1))<<(8-p);d|=this[--i]>>(p+=this.DB-8)}else{d=(this[i]>>(p-=8))&255;if(p<=0){p+=this.DB;--i}}if((d&128)!=0){d|=-256}if(k==0&&(this.s&128)!=(d&128)){++k}if(k>0||d!=this.s){r[k++]=d}}}return r}function bnEquals(a){return(this.compareTo(a)==0)}function bnMin(a){return(this.compareTo(a)<0)?this:a}function bnMax(a){return(this.compareTo(a)>0)?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i){r[i]=op(this[i],a[i])}if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i){r[i]=op(this[i],f)}r.t=this.t}else{f=this.s&this.DM;for(i=m;i<a.t;++i){r[i]=op(f,a[i])}r.t=a.t}r.s=op(this.s,a.s);r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i){r[i]=this.DM&~this[i]}r.t=this.t;r.s=~this.s;return r}function bnShiftLeft(n){var r=nbi();if(n<0){this.rShiftTo(-n,r)}else{this.lShiftTo(n,r)}return r}function bnShiftRight(n){var r=nbi();if(n<0){this.lShiftTo(-n,r)}else{this.rShiftTo(n,r)}return r}function lbit(x){if(x==0){return -1}var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0){++r}return r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i){if(this[i]!=0){return i*this.DB+lbit(this[i])}}if(this.s<0){return this.t*this.DB}return -1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i){r+=cbit(this[i]^x)}return r}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t){return(this.s!=0)}return((this[j]&(1<<(n%this.DB)))!=0)}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=(c<0)?-1:0;if(c>0){r[i++]=c}else{if(c<-1){r[i++]=this.DV+c}}r.t=i;r.clamp()}function bnAdd(a){var r=nbi();this.addTo(a,r);return r}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}function bnSquare(){var r=nbi();this.squareTo(r);return r}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r)}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(n,w){if(n==0){return}while(this.t<=w){this[this.t++]=0}this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t){this[this.t++]=0}++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp())}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0){r[--i]=0}var j;for(j=r.t-this.t;i<j;++i){r[i+this.t]=this.am(0,a[i],r,i,0,this.t)}for(j=Math.min(a.t,n);i<j;++i){this.am(0,a[i],r,i,0,n-i)}r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0){r[i]=0}for(i=Math.max(n-this.t,0);i<a.t;++i){r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n)}r.clamp();r.drShiftTo(1,r)}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t){return x.mod(this.m)}else{if(x.compareTo(this.m)<0){return x}else{var r=nbi();x.copyTo(r);this.reduce(r);return r}}}function barrettRevert(x){return x}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0){x.dAddOffset(1,this.m.t+1)}x.subTo(this.r2,x);while(x.compareTo(this.m)>=0){x.subTo(this.m,x)}}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0){return r}else{if(i<18){k=1}else{if(i<48){k=3}else{if(i<144){k=4}else{if(i<768){k=5}else{k=6}}}}}if(i<8){z=new Classic(m)}else{if(m.isEven()){z=new Barrett(m)}else{z=new Montgomery(m)}}var g=new Array(),n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1){w=(e[j]>>(i-k1))&km}else{w=(e[j]&((1<<(i+1))-1))<<(k1-i);if(j>0){w|=e[j-1]>>(this.DB+i-k1)}}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this.DB;--j}if(is1){g[w].copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0){z.sqrTo(r,r2)}else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&(1<<i))==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j}}}return z.revert(r)}function bnGCD(a){var x=(this.s<0)?this.negate():this.clone();var y=(a.s<0)?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0){return x}if(i<g){g=i}if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0){x.rShiftTo(i,x)}if((i=y.getLowestSetBit())>0){y.rShiftTo(i,y)}if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}}if(g>0){y.lShiftTo(g,y)}return y}function bnpModInt(n){if(n<=0){return 0}var d=this.DV%n,r=(this.s<0)?n-1:0;if(this.t>0){if(d==0){r=this[0]%n}else{for(var i=this.t-1;i>=0;--i){r=(d*r+this[i])%n}}}return r}function bnModInverse(m){var ac=m.isEven();if((this.isEven()&&ac)||m.signum()==0){return BigInteger.ZERO}var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}a.rShiftTo(1,a)}else{if(!b.isEven()){b.subTo(m,b)}}b.rShiftTo(1,b)}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}c.rShiftTo(1,c)}else{if(!d.isEven()){d.subTo(m,d)}}d.rShiftTo(1,d)}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac){a.subTo(c,a)}b.subTo(d,b)}else{v.subTo(u,v);if(ac){c.subTo(a,c)}d.subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0){return BigInteger.ZERO}if(d.compareTo(m)>=0){return d.subtract(m)}if(d.signum()<0){d.addTo(m,d)}else{return d}if(d.signum()<0){return d.add(m)}else{return d}}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i){if(x[0]==lowprimes[i]){return true}}return false}if(x.isEven()){return false}i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim){m*=lowprimes[j++]}m=x.modInt(m);while(i<j){if(m%lowprimes[i++]==0){return false}}}return x.millerRabin(t)}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0){return false}var r=n1.shiftRight(k);t=(t+1)>>1;if(t>lowprimes.length){t=lowprimes.length}var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0){return false}}if(y.compareTo(n1)!=0){return false}}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;function Arcfour(){this.i=0;this.j=0;this.S=new Array()}function ARC4init(key){var i,j,t;for(i=0;i<256;++i){this.S[i]=i}j=0;for(i=0;i<256;++i){j=(j+this.S[i]+key[i%key.length])&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t}this.i=0;this.j=0}function ARC4next(){var t;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[(t+this.S[this.i])&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour()}var rng_psize=256;var rng_state;var rng_pool;var rng_pptr;function rng_seed_int(x){rng_pool[rng_pptr++]^=x&255;rng_pool[rng_pptr++]^=(x>>8)&255;rng_pool[rng_pptr++]^=(x>>16)&255;rng_pool[rng_pptr++]^=(x>>24)&255;if(rng_pptr>=rng_psize){rng_pptr-=rng_psize}}function rng_seed_time(){rng_seed_int(new Date().getTime())}if(rng_pool==null){rng_pool=new Array();rng_pptr=0;var t;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t){rng_pool[rng_pptr++]=z.charCodeAt(t)&255}}while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=t>>>8;rng_pool[rng_pptr++]=t&255}rng_pptr=0;rng_seed_time()}function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr){rng_pool[rng_pptr]=0}rng_pptr=0}return rng_state.next()}function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i){ba[i]=rng_get_byte()}}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function parseBigInt(str,r){return new BigInteger(str,r)}function linebrk(s,n){var ret="";var i=0;while(i+n<s.length){ret+=s.substring(i,i+n)+"\n";i+=n}return ret+s.substring(i,s.length)}function byte2Hex(b){if(b<16){return"0"+b.toString(16)}else{return b.toString(16)}}function pkcs1pad2(s,n){if(n<s.length+11){console.error("Message too long for RSA");return null}var ba=new Array();var i=s.length-1;while(i>=0&&n>0){var c=s.charCodeAt(i--);if(c<128){ba[--n]=c}else{if((c>127)&&(c<2048)){ba[--n]=(c&63)|128;ba[--n]=(c>>6)|192}else{ba[--n]=(c&63)|128;ba[--n]=((c>>6)&63)|128;ba[--n]=(c>>12)|224}}}ba[--n]=0;var rng=new SecureRandom();var x=new Array();while(n>2){x[0]=0;while(x[0]==0){rng.nextBytes(x)}ba[--n]=x[0]}ba[--n]=2;ba[--n]=0;return new BigInteger(ba)}function RSAKey(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function RSASetPublic(N,E){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16)}else{console.error("Invalid RSA public key")}}function RSADoPublic(x){return x.modPowInt(this.e,this.n)}function RSAEncrypt(text){var m=pkcs1pad2(text,(this.n.bitLength()+7)>>3);if(m==null){return null}var c=this.doPublic(m);if(c==null){return null}var h=c.toString(16);if((h.length&1)==0){return h}else{return"0"+h}}RSAKey.prototype.doPublic=RSADoPublic;RSAKey.prototype.setPublic=RSASetPublic;RSAKey.prototype.encrypt=RSAEncrypt;function pkcs1unpad2(d,n){var b=d.toByteArray();var i=0;while(i<b.length&&b[i]==0){++i}if(b.length-i!=n-1||b[i]!=2){return null}++i;while(b[i]!=0){if(++i>=b.length){return null}}var ret="";while(++i<b.length){var c=b[i]&255;if(c<128){ret+=String.fromCharCode(c)}else{if((c>191)&&(c<224)){ret+=String.fromCharCode(((c&31)<<6)|(b[i+1]&63));++i}else{ret+=String.fromCharCode(((c&15)<<12)|((b[i+1]&63)<<6)|(b[i+2]&63));i+=2}}}return ret}function RSASetPrivate(N,E,D){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16);this.d=parseBigInt(D,16)}else{console.error("Invalid RSA private key")}}function RSASetPrivateEx(N,E,D,P,Q,DP,DQ,C){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16);this.d=parseBigInt(D,16);this.p=parseBigInt(P,16);this.q=parseBigInt(Q,16);this.dmp1=parseBigInt(DP,16);this.dmq1=parseBigInt(DQ,16);this.coeff=parseBigInt(C,16)}else{console.error("Invalid RSA private key")}}function RSAGenerate(B,E){var rng=new SecureRandom();var qs=B>>1;this.e=parseInt(E,16);var ee=new BigInteger(E,16);for(;;){for(;;){this.p=new BigInteger(B-qs,1,rng);if(this.p.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE)==0&&this.p.isProbablePrime(10)){break}}for(;;){this.q=new BigInteger(qs,1,rng);if(this.q.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE)==0&&this.q.isProbablePrime(10)){break}}if(this.p.compareTo(this.q)<=0){var t=this.p;this.p=this.q;this.q=t}var p1=this.p.subtract(BigInteger.ONE);var q1=this.q.subtract(BigInteger.ONE);var phi=p1.multiply(q1);if(phi.gcd(ee).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q);this.d=ee.modInverse(phi);this.dmp1=this.d.mod(p1);this.dmq1=this.d.mod(q1);this.coeff=this.q.modInverse(this.p);break}}}function RSADoPrivate(x){if(this.p==null||this.q==null){return x.modPow(this.d,this.n)}var xp=x.mod(this.p).modPow(this.dmp1,this.p);var xq=x.mod(this.q).modPow(this.dmq1,this.q);while(xp.compareTo(xq)<0){xp=xp.add(this.p)}return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq)}function RSADecrypt(ctext){var c=parseBigInt(ctext,16);var m=this.doPrivate(c);if(m==null){return null}return pkcs1unpad2(m,(this.n.bitLength()+7)>>3)}RSAKey.prototype.doPrivate=RSADoPrivate;RSAKey.prototype.setPrivate=RSASetPrivate;RSAKey.prototype.setPrivateEx=RSASetPrivateEx;RSAKey.prototype.generate=RSAGenerate;RSAKey.prototype.decrypt=RSADecrypt;(function(){var RSAGenerateAsync=function(B,E,callback){var rng=new SecureRandom();var qs=B>>1;this.e=parseInt(E,16);var ee=new BigInteger(E,16);var rsa=this;var loop1=function(){var loop4=function(){if(rsa.p.compareTo(rsa.q)<=0){var t=rsa.p;rsa.p=rsa.q;rsa.q=t}var p1=rsa.p.subtract(BigInteger.ONE);var q1=rsa.q.subtract(BigInteger.ONE);var phi=p1.multiply(q1);if(phi.gcd(ee).compareTo(BigInteger.ONE)==0){rsa.n=rsa.p.multiply(rsa.q);rsa.d=ee.modInverse(phi);rsa.dmp1=rsa.d.mod(p1);rsa.dmq1=rsa.d.mod(q1);rsa.coeff=rsa.q.modInverse(rsa.p);setTimeout(function(){callback()},0)}else{setTimeout(loop1,0)}};var loop3=function(){rsa.q=nbi();rsa.q.fromNumberAsync(qs,1,rng,function(){rsa.q.subtract(BigInteger.ONE).gcda(ee,function(r){if(r.compareTo(BigInteger.ONE)==0&&rsa.q.isProbablePrime(10)){setTimeout(loop4,0)}else{setTimeout(loop3,0)}})})};var loop2=function(){rsa.p=nbi();rsa.p.fromNumberAsync(B-qs,1,rng,function(){rsa.p.subtract(BigInteger.ONE).gcda(ee,function(r){if(r.compareTo(BigInteger.ONE)==0&&rsa.p.isProbablePrime(10)){setTimeout(loop3,0)}else{setTimeout(loop2,0)}})})};setTimeout(loop2,0)};setTimeout(loop1,0)};RSAKey.prototype.generateAsync=RSAGenerateAsync;var bnGCDAsync=function(a,callback){var x=(this.s<0)?this.negate():this.clone();var y=(a.s<0)?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0){callback(x);return}if(i<g){g=i}if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}var gcda1=function(){if((i=x.getLowestSetBit())>0){x.rShiftTo(i,x)}if((i=y.getLowestSetBit())>0){y.rShiftTo(i,y)}if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}if(!(x.signum()>0)){if(g>0){y.lShiftTo(g,y)}setTimeout(function(){callback(y)},0)}else{setTimeout(gcda1,0)}};setTimeout(gcda1,10)};BigInteger.prototype.gcda=bnGCDAsync;var bnpFromNumberAsync=function(a,b,c,callback){if("number"==typeof b){if(a<2){this.fromInt(1)}else{this.fromNumber(a,c);if(!this.testBit(a-1)){this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this)}if(this.isEven()){this.dAddOffset(1,0)}var bnp=this;var bnpfn1=function(){bnp.dAddOffset(2,0);if(bnp.bitLength()>a){bnp.subTo(BigInteger.ONE.shiftLeft(a-1),bnp)}if(bnp.isProbablePrime(b)){setTimeout(function(){callback()},0)}else{setTimeout(bnpfn1,0)}};setTimeout(bnpfn1,0)}}else{var x=new Array(),t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0){x[0]&=((1<<t)-1)}else{x[0]=0}this.fromString(x,256)}};BigInteger.prototype.fromNumberAsync=bnpFromNumberAsync})();var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64pad="=";function hex2b64(h){var i;var c;var ret="";for(i=0;i+3<=h.length;i+=3){c=parseInt(h.substring(i,i+3),16);ret+=b64map.charAt(c>>6)+b64map.charAt(c&63)}if(i+1==h.length){c=parseInt(h.substring(i,i+1),16);ret+=b64map.charAt(c<<2)}else{if(i+2==h.length){c=parseInt(h.substring(i,i+2),16);ret+=b64map.charAt(c>>2)+b64map.charAt((c&3)<<4)}}while((ret.length&3)>0){ret+=b64pad}return ret}function b64tohex(s){var ret="";var i;var k=0;var slop;for(i=0;i<s.length;++i){if(s.charAt(i)==b64pad){break}v=b64map.indexOf(s.charAt(i));if(v<0){continue}if(k==0){ret+=int2char(v>>2);slop=v&3;k=1}else{if(k==1){ret+=int2char((slop<<2)|(v>>4));slop=v&15;k=2}else{if(k==2){ret+=int2char(slop);ret+=int2char(v>>2);slop=v&3;k=3}else{ret+=int2char((slop<<2)|(v>>4));ret+=int2char(v&15);k=0}}}}if(k==1){ret+=int2char(slop<<2)}return ret}function b64toBA(s){var h=b64tohex(s);var i;var a=new Array();for(i=0;2*i<h.length;++i){a[i]=parseInt(h.substring(2*i,2*i+2),16)}return a}
/*! asn1-1.0.2.js (c) 2013 Kenji Urushima | kjur.github.com/jsrsasign/license
     */
var JSX=JSX||{};JSX.env=JSX.env||{};var L=JSX,OP=Object.prototype,FUNCTION_TOSTRING="[object Function]",ADD=["toString","valueOf"];JSX.env.parseUA=function(agent){var numberify=function(s){var c=0;return parseFloat(s.replace(/\./g,function(){return(c++==1)?"":"."}))},nav=navigator,o={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:nav&&nav.cajaVersion,secure:false,os:null},ua=agent||(navigator&&navigator.userAgent),loc=window&&window.location,href=loc&&loc.href,m;o.secure=href&&(href.toLowerCase().indexOf("https")===0);if(ua){if((/windows|win32/i).test(ua)){o.os="windows"}else{if((/macintosh/i).test(ua)){o.os="macintosh"}else{if((/rhino/i).test(ua)){o.os="rhino"}}}if((/KHTML/).test(ua)){o.webkit=1}m=ua.match(/AppleWebKit\/([^\s]*)/);if(m&&m[1]){o.webkit=numberify(m[1]);if(/ Mobile\//.test(ua)){o.mobile="Apple";m=ua.match(/OS ([^\s]*)/);if(m&&m[1]){m=numberify(m[1].replace("_","."))}o.ios=m;o.ipad=o.ipod=o.iphone=0;m=ua.match(/iPad|iPod|iPhone/);if(m&&m[0]){o[m[0].toLowerCase()]=o.ios}}else{m=ua.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/);if(m){o.mobile=m[0]}if(/webOS/.test(ua)){o.mobile="WebOS";m=ua.match(/webOS\/([^\s]*);/);if(m&&m[1]){o.webos=numberify(m[1])}}if(/ Android/.test(ua)){o.mobile="Android";m=ua.match(/Android ([^\s]*);/);if(m&&m[1]){o.android=numberify(m[1])}}}m=ua.match(/Chrome\/([^\s]*)/);if(m&&m[1]){o.chrome=numberify(m[1])}else{m=ua.match(/AdobeAIR\/([^\s]*)/);if(m){o.air=m[0]}}}if(!o.webkit){m=ua.match(/Opera[\s\/]([^\s]*)/);if(m&&m[1]){o.opera=numberify(m[1]);m=ua.match(/Version\/([^\s]*)/);if(m&&m[1]){o.opera=numberify(m[1])}m=ua.match(/Opera Mini[^;]*/);if(m){o.mobile=m[0]}}else{m=ua.match(/MSIE\s([^;]*)/);if(m&&m[1]){o.ie=numberify(m[1])}else{m=ua.match(/Gecko\/([^\s]*)/);if(m){o.gecko=1;m=ua.match(/rv:([^\s\)]*)/);if(m&&m[1]){o.gecko=numberify(m[1])}}}}}}return o};JSX.env.ua=JSX.env.parseUA();JSX.isFunction=function(o){return(typeof o==="function")||OP.toString.apply(o)===FUNCTION_TOSTRING};JSX._IEEnumFix=(JSX.env.ua.ie)?function(r,s){var i,fname,f;for(i=0;i<ADD.length;i=i+1){fname=ADD[i];f=s[fname];if(L.isFunction(f)&&f!=OP[fname]){r[fname]=f}}}:function(){};JSX.extend=function(subc,superc,overrides){if(!superc||!subc){throw new Error("extend failed, please check that all dependencies are included.")}var F=function(){},i;F.prototype=superc.prototype;subc.prototype=new F();subc.prototype.constructor=subc;subc.superclass=superc.prototype;if(superc.prototype.constructor==OP.constructor){superc.prototype.constructor=superc}if(overrides){for(i in overrides){if(L.hasOwnProperty(overrides,i)){subc.prototype[i]=overrides[i]}}L._IEEnumFix(subc.prototype,overrides)}};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(i){var h=i.toString(16);if((h.length%2)==1){h="0"+h}return h};this.bigIntToMinTwosComplementsHex=function(bigIntegerValue){var h=bigIntegerValue.toString(16);if(h.substr(0,1)!="-"){if(h.length%2==1){h="0"+h}else{if(!h.match(/^[0-7]/)){h="00"+h}}}else{var hPos=h.substr(1);var xorLen=hPos.length;if(xorLen%2==1){xorLen+=1}else{if(!h.match(/^[0-7]/)){xorLen+=2}}var hMask="";for(var i=0;i<xorLen;i++){hMask+="f"}var biMask=new BigInteger(hMask,16);var biNeg=biMask.xor(bigIntegerValue).add(BigInteger.ONE);h=biNeg.toString(16).replace(/^-/,"")}return h};this.getPEMStringFromHex=function(dataHex,pemHeader){var dataWA=CryptoJS.enc.Hex.parse(dataHex);var dataB64=CryptoJS.enc.Base64.stringify(dataWA);var pemBody=dataB64.replace(/(.{64})/g,"$1\r\n");pemBody=pemBody.replace(/\r\n$/,"");return"-----BEGIN "+pemHeader+"-----\r\n"+pemBody+"\r\n-----END "+pemHeader+"-----\r\n"}};KJUR.asn1.ASN1Object=function(){var isModified=true;var hTLV=null;var hT="00";var hL="00";var hV="";this.getLengthHexFromValue=function(){if(typeof this.hV=="undefined"||this.hV==null){throw"this.hV is null or undefined."}if(this.hV.length%2==1){throw"value hex must be even length: n="+hV.length+",v="+this.hV}var n=this.hV.length/2;var hN=n.toString(16);if(hN.length%2==1){hN="0"+hN}if(n<128){return hN}else{var hNlen=hN.length/2;if(hNlen>15){throw"ASN.1 length too long to represent by 8x: n = "+n.toString(16)}var head=128+hNlen;return head.toString(16)+hN}};this.getEncodedHex=function(){if(this.hTLV==null||this.isModified){this.hV=this.getFreshValueHex();this.hL=this.getLengthHexFromValue();this.hTLV=this.hT+this.hL+this.hV;this.isModified=false}return this.hTLV};this.getValueHex=function(){this.getEncodedHex();return this.hV};this.getFreshValueHex=function(){return""}};KJUR.asn1.DERAbstractString=function(params){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);var s=null;var hV=null;this.getString=function(){return this.s};this.setString=function(newS){this.hTLV=null;this.isModified=true;this.s=newS;this.hV=stohex(this.s)};this.setStringHex=function(newHexString){this.hTLV=null;this.isModified=true;this.s=null;this.hV=newHexString};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params.str!="undefined"){this.setString(params.str)}else{if(typeof params.hex!="undefined"){this.setStringHex(params.hex)}}}};JSX.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractTime=function(params){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);var s=null;var date=null;this.localDateToUTC=function(d){utc=d.getTime()+(d.getTimezoneOffset()*60000);var utcDate=new Date(utc);return utcDate};this.formatDate=function(dateObject,type){var pad=this.zeroPadding;var d=this.localDateToUTC(dateObject);var year=String(d.getFullYear());if(type=="utc"){year=year.substr(2,2)}var month=pad(String(d.getMonth()+1),2);var day=pad(String(d.getDate()),2);var hour=pad(String(d.getHours()),2);var min=pad(String(d.getMinutes()),2);var sec=pad(String(d.getSeconds()),2);return year+month+day+hour+min+sec+"Z"};this.zeroPadding=function(s,len){if(s.length>=len){return s}return new Array(len-s.length+1).join("0")+s};this.getString=function(){return this.s};this.setString=function(newS){this.hTLV=null;this.isModified=true;this.s=newS;this.hV=stohex(this.s)};this.setByDateValue=function(year,month,day,hour,min,sec){var dateObject=new Date(Date.UTC(year,month-1,day,hour,min,sec,0));this.setByDate(dateObject)};this.getFreshValueHex=function(){return this.hV}};JSX.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractStructured=function(params){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);var asn1Array=null;this.setByASN1ObjectArray=function(asn1ObjectArray){this.hTLV=null;this.isModified=true;this.asn1Array=asn1ObjectArray};this.appendASN1Object=function(asn1Object){this.hTLV=null;this.isModified=true;this.asn1Array.push(asn1Object)};this.asn1Array=new Array();if(typeof params!="undefined"){if(typeof params.array!="undefined"){this.asn1Array=params.array}}};JSX.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object);KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this);this.hT="01";this.hTLV="0101ff"};JSX.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object);KJUR.asn1.DERInteger=function(params){KJUR.asn1.DERInteger.superclass.constructor.call(this);this.hT="02";this.setByBigInteger=function(bigIntegerValue){this.hTLV=null;this.isModified=true;this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue)};this.setByInteger=function(intValue){var bi=new BigInteger(String(intValue),10);this.setByBigInteger(bi)};this.setValueHex=function(newHexString){this.hV=newHexString};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params.bigint!="undefined"){this.setByBigInteger(params.bigint)}else{if(typeof params["int"]!="undefined"){this.setByInteger(params["int"])}else{if(typeof params.hex!="undefined"){this.setValueHex(params.hex)}}}}};JSX.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object);KJUR.asn1.DERBitString=function(params){KJUR.asn1.DERBitString.superclass.constructor.call(this);this.hT="03";this.setHexValueIncludingUnusedBits=function(newHexStringIncludingUnusedBits){this.hTLV=null;this.isModified=true;this.hV=newHexStringIncludingUnusedBits};this.setUnusedBitsAndHexValue=function(unusedBits,hValue){if(unusedBits<0||7<unusedBits){throw"unused bits shall be from 0 to 7: u = "+unusedBits}var hUnusedBits="0"+unusedBits;this.hTLV=null;this.isModified=true;this.hV=hUnusedBits+hValue};this.setByBinaryString=function(binaryString){binaryString=binaryString.replace(/0+$/,"");var unusedBits=8-binaryString.length%8;if(unusedBits==8){unusedBits=0}for(var i=0;i<=unusedBits;i++){binaryString+="0"}var h="";for(var i=0;i<binaryString.length-1;i+=8){var b=binaryString.substr(i,8);var x=parseInt(b,2).toString(16);if(x.length==1){x="0"+x}h+=x}this.hTLV=null;this.isModified=true;this.hV="0"+unusedBits+h};this.setByBooleanArray=function(booleanArray){var s="";for(var i=0;i<booleanArray.length;i++){if(booleanArray[i]==true){s+="1"}else{s+="0"}}this.setByBinaryString(s)};this.newFalseArray=function(nLength){var a=new Array(nLength);for(var i=0;i<nLength;i++){a[i]=false}return a};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params.hex!="undefined"){this.setHexValueIncludingUnusedBits(params.hex)}else{if(typeof params.bin!="undefined"){this.setByBinaryString(params.bin)}else{if(typeof params.array!="undefined"){this.setByBooleanArray(params.array)}}}}};JSX.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object);KJUR.asn1.DEROctetString=function(params){KJUR.asn1.DEROctetString.superclass.constructor.call(this,params);this.hT="04"};JSX.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this);this.hT="05";this.hTLV="0500"};JSX.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object);KJUR.asn1.DERObjectIdentifier=function(params){var itox=function(i){var h=i.toString(16);if(h.length==1){h="0"+h}return h};var roidtox=function(roid){var h="";var bi=new BigInteger(roid,10);var b=bi.toString(2);var padLen=7-b.length%7;if(padLen==7){padLen=0}var bPad="";for(var i=0;i<padLen;i++){bPad+="0"}b=bPad+b;for(var i=0;i<b.length-1;i+=7){var b8=b.substr(i,7);if(i!=b.length-7){b8="1"+b8}h+=itox(parseInt(b8,2))}return h};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);this.hT="06";this.setValueHex=function(newHexString){this.hTLV=null;this.isModified=true;this.s=null;this.hV=newHexString};this.setValueOidString=function(oidString){if(!oidString.match(/^[0-9.]+$/)){throw"malformed oid string: "+oidString}var h="";var a=oidString.split(".");var i0=parseInt(a[0])*40+parseInt(a[1]);h+=itox(i0);a.splice(0,2);for(var i=0;i<a.length;i++){h+=roidtox(a[i])}this.hTLV=null;this.isModified=true;this.s=null;this.hV=h};this.setValueName=function(oidName){if(typeof KJUR.asn1.x509.OID.name2oidList[oidName]!="undefined"){var oid=KJUR.asn1.x509.OID.name2oidList[oidName];this.setValueOidString(oid)}else{throw"DERObjectIdentifier oidName undefined: "+oidName}};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params.oid!="undefined"){this.setValueOidString(params.oid)}else{if(typeof params.hex!="undefined"){this.setValueHex(params.hex)}else{if(typeof params.name!="undefined"){this.setValueName(params.name)}}}}};JSX.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object);KJUR.asn1.DERUTF8String=function(params){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,params);this.hT="0c"};JSX.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERNumericString=function(params){KJUR.asn1.DERNumericString.superclass.constructor.call(this,params);this.hT="12"};JSX.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERPrintableString=function(params){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,params);this.hT="13"};JSX.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERTeletexString=function(params){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,params);this.hT="14"};JSX.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERIA5String=function(params){KJUR.asn1.DERIA5String.superclass.constructor.call(this,params);this.hT="16"};JSX.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERUTCTime=function(params){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,params);this.hT="17";this.setByDate=function(dateObject){this.hTLV=null;this.isModified=true;this.date=dateObject;this.s=this.formatDate(this.date,"utc");this.hV=stohex(this.s)};if(typeof params!="undefined"){if(typeof params.str!="undefined"){this.setString(params.str)}else{if(typeof params.hex!="undefined"){this.setStringHex(params.hex)}else{if(typeof params.date!="undefined"){this.setByDate(params.date)}}}}};JSX.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERGeneralizedTime=function(params){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,params);this.hT="18";this.setByDate=function(dateObject){this.hTLV=null;this.isModified=true;this.date=dateObject;this.s=this.formatDate(this.date,"gen");this.hV=stohex(this.s)};if(typeof params!="undefined"){if(typeof params.str!="undefined"){this.setString(params.str)}else{if(typeof params.hex!="undefined"){this.setStringHex(params.hex)}else{if(typeof params.date!="undefined"){this.setByDate(params.date)}}}}};JSX.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERSequence=function(params){KJUR.asn1.DERSequence.superclass.constructor.call(this,params);this.hT="30";this.getFreshValueHex=function(){var h="";for(var i=0;i<this.asn1Array.length;i++){var asn1Obj=this.asn1Array[i];h+=asn1Obj.getEncodedHex()}this.hV=h;return this.hV}};JSX.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERSet=function(params){KJUR.asn1.DERSet.superclass.constructor.call(this,params);this.hT="31";this.getFreshValueHex=function(){var a=new Array();for(var i=0;i<this.asn1Array.length;i++){var asn1Obj=this.asn1Array[i];a.push(asn1Obj.getEncodedHex())}a.sort();this.hV=a.join("");return this.hV}};JSX.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERTaggedObject=function(params){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);this.hT="a0";this.hV="";this.isExplicit=true;this.asn1Object=null;this.setASN1Object=function(isExplicitFlag,tagNoHex,asn1Object){this.hT=tagNoHex;this.isExplicit=isExplicitFlag;this.asn1Object=asn1Object;if(this.isExplicit){this.hV=this.asn1Object.getEncodedHex();this.hTLV=null;this.isModified=true}else{this.hV=null;this.hTLV=asn1Object.getEncodedHex();this.hTLV=this.hTLV.replace(/^../,tagNoHex);this.isModified=false}};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params.tag!="undefined"){this.hT=params.tag}if(typeof params.explicit!="undefined"){this.isExplicit=params.explicit}if(typeof params.obj!="undefined"){this.asn1Object=params.obj;this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)}}};JSX.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);(function(undefined){var Hex={},decoder;Hex.decode=function(a){var i;if(decoder===undefined){var hex="0123456789ABCDEF",ignore=" \f\n\r\t\u00A0\u2028\u2029";decoder=[];for(i=0;i<16;++i){decoder[hex.charAt(i)]=i}hex=hex.toLowerCase();for(i=10;i<16;++i){decoder[hex.charAt(i)]=i}for(i=0;i<ignore.length;++i){decoder[ignore.charAt(i)]=-1}}var out=[],bits=0,char_count=0;for(i=0;i<a.length;++i){var c=a.charAt(i);if(c=="="){break}c=decoder[c];if(c==-1){continue}if(c===undefined){throw"Illegal character at offset "+i}bits|=c;if(++char_count>=2){out[out.length]=bits;bits=0;char_count=0}else{bits<<=4}}if(char_count){throw"Hex encoding incomplete: 4 bits missing"}return out};window.Hex=Hex})();(function(undefined){var Base64={},decoder;Base64.decode=function(a){var i;if(decoder===undefined){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ignore="= \f\n\r\t\u00A0\u2028\u2029";decoder=[];for(i=0;i<64;++i){decoder[b64.charAt(i)]=i}for(i=0;i<ignore.length;++i){decoder[ignore.charAt(i)]=-1}}var out=[];var bits=0,char_count=0;for(i=0;i<a.length;++i){var c=a.charAt(i);if(c=="="){break}c=decoder[c];if(c==-1){continue}if(c===undefined){throw"Illegal character at offset "+i}bits|=c;if(++char_count>=4){out[out.length]=(bits>>16);out[out.length]=(bits>>8)&255;out[out.length]=bits&255;bits=0;char_count=0}else{bits<<=6}}switch(char_count){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:out[out.length]=(bits>>10);break;case 3:out[out.length]=(bits>>16);out[out.length]=(bits>>8)&255;break}return out};Base64.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/;Base64.unarmor=function(a){var m=Base64.re.exec(a);if(m){if(m[1]){a=m[1]}else{if(m[2]){a=m[2]}else{throw"RegExp out of sync"}}}return Base64.decode(a)};window.Base64=Base64})();(function(undefined){var hardLimit=100,ellipsis="\u2026",DOM={tag:function(tagName,className){var t=document.createElement(tagName);t.className=className;return t},text:function(str){return document.createTextNode(str)}};function Stream(enc,pos){if(enc instanceof Stream){this.enc=enc.enc;this.pos=enc.pos}else{this.enc=enc;this.pos=pos}}Stream.prototype.get=function(pos){if(pos===undefined){pos=this.pos++}if(pos>=this.enc.length){throw"Requesting byte offset "+pos+" on a stream of length "+this.enc.length}return this.enc[pos]};Stream.prototype.hexDigits="0123456789ABCDEF";Stream.prototype.hexByte=function(b){return this.hexDigits.charAt((b>>4)&15)+this.hexDigits.charAt(b&15)};Stream.prototype.hexDump=function(start,end,raw){var s="";for(var i=start;i<end;++i){s+=this.hexByte(this.get(i));if(raw!==true){switch(i&15){case 7:s+="  ";break;case 15:s+="\n";break;default:s+=" "}}}return s};Stream.prototype.parseStringISO=function(start,end){var s="";for(var i=start;i<end;++i){s+=String.fromCharCode(this.get(i))}return s};Stream.prototype.parseStringUTF=function(start,end){var s="";for(var i=start;i<end;){var c=this.get(i++);if(c<128){s+=String.fromCharCode(c)}else{if((c>191)&&(c<224)){s+=String.fromCharCode(((c&31)<<6)|(this.get(i++)&63))}else{s+=String.fromCharCode(((c&15)<<12)|((this.get(i++)&63)<<6)|(this.get(i++)&63))}}}return s};Stream.prototype.parseStringBMP=function(start,end){var str="";for(var i=start;i<end;i+=2){var high_byte=this.get(i);var low_byte=this.get(i+1);str+=String.fromCharCode((high_byte<<8)+low_byte)}return str};Stream.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;Stream.prototype.parseTime=function(start,end){var s=this.parseStringISO(start,end),m=this.reTime.exec(s);if(!m){return"Unrecognized time: "+s}s=m[1]+"-"+m[2]+"-"+m[3]+" "+m[4];if(m[5]){s+=":"+m[5];if(m[6]){s+=":"+m[6];if(m[7]){s+="."+m[7]}}}if(m[8]){s+=" UTC";if(m[8]!="Z"){s+=m[8];if(m[9]){s+=":"+m[9]}}}return s};Stream.prototype.parseInteger=function(start,end){var len=end-start;if(len>4){len<<=3;var s=this.get(start);if(s===0){len-=8}else{while(s<128){s<<=1;--len}}return"("+len+" bit)"}var n=0;for(var i=start;i<end;++i){n=(n<<8)|this.get(i)}return n};Stream.prototype.parseBitString=function(start,end){var unusedBit=this.get(start),lenBit=((end-start-1)<<3)-unusedBit,s="("+lenBit+" bit)";if(lenBit<=20){var skip=unusedBit;s+=" ";for(var i=end-1;i>start;--i){var b=this.get(i);for(var j=skip;j<8;++j){s+=(b>>j)&1?"1":"0"}skip=0}}return s};Stream.prototype.parseOctetString=function(start,end){var len=end-start,s="("+len+" byte) ";if(len>hardLimit){end=start+hardLimit}for(var i=start;i<end;++i){s+=this.hexByte(this.get(i))}if(len>hardLimit){s+=ellipsis}return s};Stream.prototype.parseOID=function(start,end){var s="",n=0,bits=0;for(var i=start;i<end;++i){var v=this.get(i);n=(n<<7)|(v&127);bits+=7;if(!(v&128)){if(s===""){var m=n<80?n<40?0:1:2;s=m+"."+(n-m*40)}else{s+="."+((bits>=31)?"bigint":n)}n=bits=0}}return s};function ASN1(stream,header,length,tag,sub){this.stream=stream;this.header=header;this.length=length;this.tag=tag;this.sub=sub}ASN1.prototype.typeName=function(){if(this.tag===undefined){return"unknown"}var tagClass=this.tag>>6,tagConstructed=(this.tag>>5)&1,tagNumber=this.tag&31;switch(tagClass){case 0:switch(tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+tagNumber.toString(16)}case 1:return"Application_"+tagNumber.toString(16);case 2:return"["+tagNumber+"]";case 3:return"Private_"+tagNumber.toString(16)}};ASN1.prototype.reSeemsASCII=/^[ -~]+$/;ASN1.prototype.content=function(){if(this.tag===undefined){return null}var tagClass=this.tag>>6,tagNumber=this.tag&31,content=this.posContent(),len=Math.abs(this.length);if(tagClass!==0){if(this.sub!==null){return"("+this.sub.length+" elem)"}var s=this.stream.parseStringISO(content,content+Math.min(len,hardLimit));if(this.reSeemsASCII.test(s)){return s.substring(0,2*hardLimit)+((s.length>2*hardLimit)?ellipsis:"")}else{return this.stream.parseOctetString(content,content+len)}}switch(tagNumber){case 1:return(this.stream.get(content)===0)?"false":"true";case 2:return this.stream.parseInteger(content,content+len);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(content,content+len);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(content,content+len);case 6:return this.stream.parseOID(content,content+len);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(content,content+len);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(content,content+len);case 30:return this.stream.parseStringBMP(content,content+len);case 23:case 24:return this.stream.parseTime(content,content+len)}return null};ASN1.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+((this.sub===null)?"null":this.sub.length)+"]"};ASN1.prototype.print=function(indent){if(indent===undefined){indent=""}document.writeln(indent+this);if(this.sub!==null){indent+="  ";for(var i=0,max=this.sub.length;i<max;++i){this.sub[i].print(indent)}}};ASN1.prototype.toPrettyString=function(indent){if(indent===undefined){indent=""}var s=indent+this.typeName()+" @"+this.stream.pos;if(this.length>=0){s+="+"}s+=this.length;if(this.tag&32){s+=" (constructed)"}else{if(((this.tag==3)||(this.tag==4))&&(this.sub!==null)){s+=" (encapsulates)"}}s+="\n";if(this.sub!==null){indent+="  ";for(var i=0,max=this.sub.length;i<max;++i){s+=this.sub[i].toPrettyString(indent)}}return s};ASN1.prototype.toDOM=function(){var node=DOM.tag("div","node");node.asn1=this;var head=DOM.tag("div","head");var s=this.typeName().replace(/_/g," ");head.innerHTML=s;var content=this.content();if(content!==null){content=String(content).replace(/</g,"&lt;");var preview=DOM.tag("span","preview");preview.appendChild(DOM.text(content));head.appendChild(preview)}node.appendChild(head);this.node=node;this.head=head;var value=DOM.tag("div","value");s="Offset: "+this.stream.pos+"<br/>";s+="Length: "+this.header+"+";if(this.length>=0){s+=this.length}else{s+=(-this.length)+" (undefined)"}if(this.tag&32){s+="<br/>(constructed)"}else{if(((this.tag==3)||(this.tag==4))&&(this.sub!==null)){s+="<br/>(encapsulates)"}}if(content!==null){s+="<br/>Value:<br/><b>"+content+"</b>";if((typeof oids==="object")&&(this.tag==6)){var oid=oids[content];if(oid){if(oid.d){s+="<br/>"+oid.d}if(oid.c){s+="<br/>"+oid.c}if(oid.w){s+="<br/>(warning!)"}}}}value.innerHTML=s;node.appendChild(value);var sub=DOM.tag("div","sub");if(this.sub!==null){for(var i=0,max=this.sub.length;i<max;++i){sub.appendChild(this.sub[i].toDOM())}}node.appendChild(sub);head.onclick=function(){node.className=(node.className=="node collapsed")?"node":"node collapsed"};return node};ASN1.prototype.posStart=function(){return this.stream.pos};ASN1.prototype.posContent=function(){return this.stream.pos+this.header};ASN1.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)};ASN1.prototype.fakeHover=function(current){this.node.className+=" hover";if(current){this.head.className+=" hover"}};ASN1.prototype.fakeOut=function(current){var re=/ ?hover/;this.node.className=this.node.className.replace(re,"");if(current){this.head.className=this.head.className.replace(re,"")}};ASN1.prototype.toHexDOM_sub=function(node,className,stream,start,end){if(start>=end){return}var sub=DOM.tag("span",className);sub.appendChild(DOM.text(stream.hexDump(start,end)));node.appendChild(sub)};ASN1.prototype.toHexDOM=function(root){var node=DOM.tag("span","hex");if(root===undefined){root=node}this.head.hexNode=node;this.head.onmouseover=function(){this.hexNode.className="hexCurrent"};this.head.onmouseout=function(){this.hexNode.className="hex"};node.asn1=this;node.onmouseover=function(){var current=!root.selected;if(current){root.selected=this.asn1;this.className="hexCurrent"}this.asn1.fakeHover(current)};node.onmouseout=function(){var current=(root.selected==this.asn1);this.asn1.fakeOut(current);if(current){root.selected=null;this.className="hex"}};this.toHexDOM_sub(node,"tag",this.stream,this.posStart(),this.posStart()+1);this.toHexDOM_sub(node,(this.length>=0)?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent());if(this.sub===null){node.appendChild(DOM.text(this.stream.hexDump(this.posContent(),this.posEnd())))}else{if(this.sub.length>0){var first=this.sub[0];var last=this.sub[this.sub.length-1];this.toHexDOM_sub(node,"intro",this.stream,this.posContent(),first.posStart());for(var i=0,max=this.sub.length;i<max;++i){node.appendChild(this.sub[i].toHexDOM(root))}this.toHexDOM_sub(node,"outro",this.stream,last.posEnd(),this.posEnd())}}return node};ASN1.prototype.toHexString=function(root){return this.stream.hexDump(this.posStart(),this.posEnd(),true)};ASN1.decodeLength=function(stream){var buf=stream.get(),len=buf&127;if(len==buf){return len}if(len>3){throw"Length over 24 bits not supported at position "+(stream.pos-1)}if(len===0){return -1}buf=0;for(var i=0;i<len;++i){buf=(buf<<8)|stream.get()}return buf};ASN1.hasContent=function(tag,len,stream){if(tag&32){return true}if((tag<3)||(tag>4)){return false}var p=new Stream(stream);if(tag==3){p.get()}var subTag=p.get();if((subTag>>6)&1){return false}try{var subLength=ASN1.decodeLength(p);return((p.pos-stream.pos)+subLength==len)}catch(exception){return false}};ASN1.decode=function(stream){if(!(stream instanceof Stream)){stream=new Stream(stream,0)}var streamStart=new Stream(stream),tag=stream.get(),len=ASN1.decodeLength(stream),header=stream.pos-streamStart.pos,sub=null;if(ASN1.hasContent(tag,len,stream)){var start=stream.pos;if(tag==3){stream.get()}sub=[];if(len>=0){var end=start+len;while(stream.pos<end){sub[sub.length]=ASN1.decode(stream)}if(stream.pos!=end){throw"Content size is not correct for container starting at offset "+start}}else{try{for(;;){var s=ASN1.decode(stream);if(s.tag===0){break}sub[sub.length]=s}len=start-stream.pos}catch(e){throw"Exception while decoding undefined length content: "+e}}}else{stream.pos+=len}return new ASN1(streamStart,header,len,tag,sub)};ASN1.test=function(){var test=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}];for(var i=0,max=test.length;i<max;++i){var pos=0,stream=new Stream(test[i].value,0),res=ASN1.decodeLength(stream);if(res!=test[i].expected){document.write("In test["+i+"] expected "+test[i].expected+" got "+res+"\n")}}};window.ASN1=ASN1})();ASN1.prototype.getHexStringValue=function(){var hexString=this.toHexString();var offset=this.header*2;var length=this.length*2;return hexString.substr(offset,length)};RSAKey.prototype.parseKey=function(pem){try{var reHex=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/;var der=reHex.test(pem)?Hex.decode(pem):Base64.unarmor(pem);var asn1=ASN1.decode(der);if(asn1.sub.length===9){var modulus=asn1.sub[1].getHexStringValue();this.n=parseBigInt(modulus,16);var public_exponent=asn1.sub[2].getHexStringValue();this.e=parseInt(public_exponent,16);var private_exponent=asn1.sub[3].getHexStringValue();this.d=parseBigInt(private_exponent,16);var prime1=asn1.sub[4].getHexStringValue();this.p=parseBigInt(prime1,16);var prime2=asn1.sub[5].getHexStringValue();this.q=parseBigInt(prime2,16);var exponent1=asn1.sub[6].getHexStringValue();this.dmp1=parseBigInt(exponent1,16);var exponent2=asn1.sub[7].getHexStringValue();this.dmq1=parseBigInt(exponent2,16);var coefficient=asn1.sub[8].getHexStringValue();this.coeff=parseBigInt(coefficient,16)}else{if(asn1.sub.length===2){var bit_string=asn1.sub[1];var sequence=bit_string.sub[0];var modulus=sequence.sub[0].getHexStringValue();this.n=parseBigInt(modulus,16);var public_exponent=sequence.sub[1].getHexStringValue();this.e=parseInt(public_exponent,16)}else{return false}}return true}catch(ex){return false}};RSAKey.prototype.getPrivateBaseKey=function(){var options={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};var seq=new KJUR.asn1.DERSequence(options);return seq.getEncodedHex()};RSAKey.prototype.getPrivateBaseKeyB64=function(){return hex2b64(this.getPrivateBaseKey())};RSAKey.prototype.getPublicBaseKey=function(){var options={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull()]};var first_sequence=new KJUR.asn1.DERSequence(options);options={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var second_sequence=new KJUR.asn1.DERSequence(options);options={hex:"00"+second_sequence.getEncodedHex()};var bit_string=new KJUR.asn1.DERBitString(options);options={array:[first_sequence,bit_string]};var seq=new KJUR.asn1.DERSequence(options);return seq.getEncodedHex()};RSAKey.prototype.getPublicBaseKeyB64=function(){return hex2b64(this.getPublicBaseKey())};RSAKey.prototype.wordwrap=function(str,width){width=width||64;if(!str){return str}var regex="(.{1,"+width+"})( +|$\n?)|(.{1,"+width+"})";return str.match(RegExp(regex,"g")).join("\n")};RSAKey.prototype.getPrivateKey=function(){var key="-----BEGIN RSA PRIVATE KEY-----\n";key+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n";key+="-----END RSA PRIVATE KEY-----";return key};RSAKey.prototype.getPublicKey=function(){var key="-----BEGIN PUBLIC KEY-----\n";key+=this.wordwrap(this.getPublicBaseKeyB64())+"\n";key+="-----END PUBLIC KEY-----";return key};RSAKey.prototype.hasPublicKeyProperty=function(obj){obj=obj||{};return obj.hasOwnProperty("n")&&obj.hasOwnProperty("e")};RSAKey.prototype.hasPrivateKeyProperty=function(obj){obj=obj||{};return obj.hasOwnProperty("n")&&obj.hasOwnProperty("e")&&obj.hasOwnProperty("d")&&obj.hasOwnProperty("p")&&obj.hasOwnProperty("q")&&obj.hasOwnProperty("dmp1")&&obj.hasOwnProperty("dmq1")&&obj.hasOwnProperty("coeff")};RSAKey.prototype.parsePropertiesFrom=function(obj){this.n=obj.n;this.e=obj.e;if(obj.hasOwnProperty("d")){this.d=obj.d;this.p=obj.p;this.q=obj.q;this.dmp1=obj.dmp1;this.dmq1=obj.dmq1;this.coeff=obj.coeff}};var JSEncryptRSAKey=function(key){RSAKey.call(this);if(key){if(typeof key==="string"){this.parseKey(key)}else{if(this.hasPrivateKeyProperty(key)||this.hasPublicKeyProperty(key)){this.parsePropertiesFrom(key)}}}};JSEncryptRSAKey.prototype=new RSAKey();JSEncryptRSAKey.prototype.constructor=JSEncryptRSAKey;var JSEncrypt=function(options){options=options||{};this.default_key_size=parseInt(options.default_key_size)||1024;this.default_public_exponent=options.default_public_exponent||"010001";this.log=options.log||false;this.key=null};JSEncrypt.prototype.setKey=function(key){if(this.log&&this.key){console.warn("A key was already set, overriding existing.")}this.key=new JSEncryptRSAKey(key)};JSEncrypt.prototype.setPrivateKey=function(privkey){this.setKey(privkey)};JSEncrypt.prototype.setPublicKey=function(pubkey){this.setKey(pubkey)};JSEncrypt.prototype.decrypt=function(string){try{return this.getKey().decrypt(b64tohex(string))}catch(ex){return false}};JSEncrypt.prototype.encrypt=function(string){try{return hex2b64(this.getKey().encrypt(string))}catch(ex){return false}};JSEncrypt.prototype.getKey=function(cb){if(!this.key){this.key=new JSEncryptRSAKey();if(cb&&{}.toString.call(cb)==="[object Function]"){this.key.generateAsync(this.default_key_size,this.default_public_exponent,cb);return}this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key};JSEncrypt.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()};JSEncrypt.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()};JSEncrypt.prototype.getPublicKey=function(){return this.getKey().getPublicKey()};JSEncrypt.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()};exports.JSEncrypt=JSEncrypt})(passport.lib.RSAExport);passport.lib.RSA=passport.lib.RSAExport.JSEncrypt;function _(name){alert("undefined:"+name)}var passport=passport||window.passport||{};passport.err=passport.err||{};(function(ns){var lang=null;if((typeof(ns.getCurrent)).toLowerCase()==="function"){lang=ns.getCurrent()}else{lang={errMsg:{},labelText:{}}}lang.errMsg.login={"-1":{msg:'\u7cfb\u7edf\u9519\u8bef,\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#login"  target="_blank">\u95ee\u9898\u53cd\u9988</a>',field:""},"1":{msg:"\u60a8\u8f93\u5165\u7684\u5e10\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e",field:"userName"},"2":{msg:"\u60a8\u8f93\u5165\u7684\u5e10\u53f7\u4e0d\u5b58\u5728\uff0c\u53ef<a href='http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#login_7' target='_blank'>\u67e5\u770b\u5e2e\u52a9</a>\u6216<a href='http://passport.baidu.com/v2/?reg#{urldata}' target='_blank'>\u7acb\u5373\u6ce8\u518c</a>",field:"userName"},"3":{msg:"\u9a8c\u8bc1\u7801\u4e0d\u5b58\u5728\u6216\u5df2\u8fc7\u671f,\u8bf7\u91cd\u65b0\u8f93\u5165",field:""},"4":{msg:'\u60a8\u8f93\u5165\u7684\u5e10\u53f7\u6216\u5bc6\u7801\u6709\u8bef,<a href="http://passport.baidu.com/?getpassindex#{urldata}"  target="_blank" >\u5fd8\u8bb0\u5bc6\u7801</a>\uff1f',field:"password"},"5":{msg:"\u8bf7\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u64cd\u4f5c,\u6216\u91cd\u65b0\u767b\u5f55",field:""},"6":{msg:"\u60a8\u8f93\u5165\u7684\u9a8c\u8bc1\u7801\u6709\u8bef",field:"verifyCode"},"16":{msg:'\u60a8\u7684\u5e10\u53f7\u56e0\u5b89\u5168\u95ee\u9898\u5df2\u88ab\u9650\u5236\u767b\u5f55,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#login"  target="_blank" >\u95ee\u9898\u53cd\u9988</a>',field:""},"257":{msg:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",field:"verifyCode"},"120016":{msg:"",field:""},"400031":{msg:"\u8bf7\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u64cd\u4f5c,\u6216\u91cd\u65b0\u767b\u5f55",field:""},"400032":{msg:"",field:""},"400034":{msg:"",field:""},"401007":{msg:"\u60a8\u7684\u624b\u673a\u53f7\u5173\u8054\u4e86\u5176\u4ed6\u5e10\u53f7\uff0c\u8bf7\u9009\u62e9\u767b\u5f55",field:""},"120021":{msg:"\u767b\u5f55\u5931\u8d25,\u8bf7\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u64cd\u4f5c,\u6216\u91cd\u65b0\u767b\u5f55",field:""},"500010":{msg:"\u767b\u5f55\u8fc7\u4e8e\u9891\u7e41,\u8bf724\u5c0f\u65f6\u540e\u518d\u8bd5",field:""},"200010":{msg:"\u9a8c\u8bc1\u7801\u4e0d\u5b58\u5728\u6216\u5df2\u8fc7\u671f",field:""},"100005":{msg:"\u7cfb\u7edf\u9519\u8bef,\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5",field:""},"120019":{msg:"\u8bf7\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u64cd\u4f5c,\u6216\u91cd\u65b0\u767b\u5f55",field:"userName"},"110024":{msg:'\u6b64\u5e10\u53f7\u6682\u672a\u6fc0\u6d3b,<a href="#{gotourl}" >\u91cd\u53d1\u9a8c\u8bc1\u90ae\u4ef6</a>',field:""},"100023":{msg:'\u5f00\u542fCookie\u4e4b\u540e\u624d\u80fd\u767b\u5f55,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#login"  target="_blank" >\u5982\u4f55\u5f00\u542f</a>?',field:""},"400401":{msg:"",field:""}};lang.errMsg.checkVerifycode={"500002":{msg:"\u60a8\u8f93\u5165\u7684\u9a8c\u8bc1\u7801\u6709\u8bef",field:"verifyCode"},"500018":{msg:"\u9a8c\u8bc1\u7801\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u8bd5",field:"verifyCode"}};lang.labelText.login={verifyCode:"\u9a8c\u8bc1\u7801",verifyCodeStaErr:"\u60a8\u8f93\u5165\u7684\u9a8c\u8bc1\u7801\u6709\u8bef",verifyCodeLenErr:"\u60a8\u8f93\u5165\u7684\u9a8c\u8bc1\u7801\u6709\u8bef",captcha:"\u9a8c\u8bc1\u7801",captchaErr:"\u60a8\u8f93\u5165\u7684\u52a8\u6001\u5bc6\u7801\u6709\u8bef,\u8bf7\u91cd\u8bd5",captchaAlt:"\u9a8c\u8bc1\u7801\u56fe\u7247",captchaChange:"\u6362\u4e00\u5f20",memberPassLabel:"\u4e0b\u6b21\u81ea\u52a8\u767b\u5f55",login:"\u767b\u5f55",fgtPwd:"\u5fd8\u8bb0\u5bc6\u7801\uff1f",feedback:"\u95ee\u9898\u53cd\u9988",register:"\u7acb\u5373\u6ce8\u518c",phoneNum:"\u624b\u673a\u53f7",account:"\u90ae\u7bb1",userName:"\u624b\u673a/\u90ae\u7bb1/\u7528\u6237\u540d",password:"\u5bc6\u7801",passwordResetWarn:'\u5bc6\u7801\u9519\u8bef,\u60a8\u5728#{resetpwd}\u4fee\u6539\u8fc7\u5bc6\u7801,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#login"  target="_blank" >\u95ee\u9898\u53cd\u9988</a>',passwordResetIn:"\u4e2a\u6708\u4ee5\u5185",passwordResetOut:"\u4e2a\u6708\u4ee5\u524d",unameMailLengthError:"\u90ae\u7bb1\u8fc7\u957f,\u8bf7\u91cd\u65b0\u8f93\u5165",unameInputError:"\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef,\u82e5\u672a\u7ed1\u5b9a\u90ae\u7bb1,\u8bf7\u4f7f\u7528\u7528\u6237\u540d\u767b\u5f55",smsPhone:"\u624b\u673a\u53f7",smsPhoneMsg:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff0c\u672a\u6ce8\u518c\u5c06\u81ea\u52a8\u521b\u5efa\u767e\u5ea6\u5e10\u53f7",smsVerifyCode:"\u52a8\u6001\u5bc6\u7801",logining:"\u767b\u5f55\u4e2d...",loginsuccess:"\u767b\u5f55\u6210\u529f",submitTimeup:"\u767b\u5f55\u8d85\u65f6,\u8bf7\u7a0d\u540e\u518d\u8bd5",backToLogin:"<<\u8fd4\u56de\u767b\u5f55",qrcodeTitle:"\u624b\u673a\u626b\u63cfï¼Œ\u5b89\u5168\u767b\u5f55",qrcodeMsg:'\u8bf7\u4f7f\u7528<a href="#{appHref}" target="_blank">#{appName}</a>\u626b\u63cf\u767b\u5f55',appName:"\u624B\u673A\u767E\u5EA6app",appHref:"http://wuxian.baidu.com/baidusearch/",sysError:"\u7cfb\u7edf\u9519\u8bef\uff0c\u4f11\u606f\u4e00\u4f1a\u513f\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",sysUpdate:"\u670d\u52a1\u6b63\u5728\u5347\u7ea7\u4e2d,\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5",cookieDisable:'\u5f00\u542fCookie\u4e4b\u540e\u624d\u80fd\u767b\u5f55,<a href="http://passport.baidu.com/v2/?ucenterfeedback#login"  target="_blank" >\u5982\u4f55\u5f00\u542f</a>?',captchaErr:"\u52a8\u6001\u5bc6\u7801\u9519\u8bef"};ns.getCurrent=function(){return lang}})(passport.err);var passport=passport||window.passport||{};passport.data=passport.data||{};(function(ns){var _blankFunc=function(){};function Promise(initCallback){this._requests=[];this._value=null;this._exception=null;this._isComplete=false;var promise=this;initCallback(function(value){promise._fulfillPromise(value)},function(value){promise._breakPromise(value)})}Promise.prototype={get_isComplete:function(){return this._isComplete},get_value:function(){if(!this._isComplete){return undefined}if(this._exception){throw this._exception}return this._value},call:function(name,params){var args=[];for(var i=0,l=arguments.length-1;i<l;i++){args[i]=arguments[i+1]}return this.when(function(v){return v[name].apply(v,args)})},getValue:function(name){return this.when(function(v){return v[name]})},setValue:function(name,value){this.whenOnly(function(v){v[name]=value})},when:function(fulfillPromise,breakPromise,context){return Promise.when(this,fulfillPromise,breakPromise,context)},whenOnly:function(fulfillPromise,breakPromise,context){Promise.whenOnly(this,fulfillPromise,breakPromise,context)},success:function(fulfillPromise,context){return this.when(fulfillPromise,_blankFunc,context)},fail:function(breakPromise,context){return this.when(_blankFunc,breakPromise,context)},_enqueueOne:function(op){if(this._isComplete){this._notify(op)}else{this._requests.push(op)}},_notify:function(op){if(this._exception){if(op.breakPromise){op.breakPromise(this._exception)}}else{if(op.fulfillPromise){op.fulfillPromise(this._value)}}},_notifyAll:function(){for(var i=0,l=this._requests.length;i<l;i++){this._notify(this._requests[i])}},_fulfillPromise:function(value){this._value=value;this._exception=null;this._isComplete=true;this._notifyAll()},_breakPromise:function(exception){this._value=null;this._exception=exception||new Error("An error occured");this._isComplete=true;this._notifyAll()}};Promise.when=function(promise,fulfillPromise,breakPromise,context){return new Promise(function(fp,bp){Promise.make(promise)._enqueueOne({fulfillPromise:function(value){if(fulfillPromise){fp(fulfillPromise.call(context,value))}else{fp(value)}},breakPromise:function(exception){if(breakPromise){try{fp(breakPromise.call(context,exception))}catch(e){bp(e)}}else{bp(exception)}}})})};Promise.whenOnly=function(promise,fulfillPromise,breakPromise,context){Promise.make(promise)._enqueueOne({fulfillPromise:function(value){if(fulfillPromise){fulfillPromise.call(context,value)}},breakPromise:function(exception){if(breakPromise){breakPromise.call(context,exception)}}})};Promise.make=function(value){if(value instanceof Promise){return value}return Promise.immediate(value)};Promise.immediate=function(value){return new Promise(function(fulfillPromise,breakPromise){fulfillPromise(value)})};var Base={};(function(Base){var trimer=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g");Base.trim=function(source){return String(source).replace(trimer,"")};Base.getUniqueId=function(prefix){return prefix+Math.floor(Math.random()*2147483648).toString(36)};Base.g=function(id){if(!id){return null}if("string"==typeof id||id instanceof String){return document.getElementById(id)}else{if(id.nodeName&&(id.nodeType==1||id.nodeType==9)){return id}}return null};Base.getParent=function(a){a=Base.g(a);return a.parentElement||a.parentNode||null};Base.encodeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};Base.array=Base.array||{};Base.array.indexOf=function(source,match,fromIndex){var len=source.length,iterator=match;fromIndex=fromIndex|0;if(fromIndex<0){fromIndex=Math.max(0,len+fromIndex)}for(;fromIndex<len;fromIndex++){if(fromIndex in source&&source[fromIndex]===match){return fromIndex}}return -1};Base.browser=Base.browser||{};Base.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp["\x246"]||RegExp["\x242"]):undefined;Base.insertHTML=function(element,position,html){element=Base.g(element);var range,begin;if(element.insertAdjacentHTML&&!Base.browser.opera){element.insertAdjacentHTML(position,html)}else{range=element.ownerDocument.createRange();position=position.toUpperCase();if(position=="AFTERBEGIN"||position=="BEFOREEND"){range.selectNodeContents(element);range.collapse(position=="AFTERBEGIN")}else{begin=position=="BEFOREBEGIN";range[begin?"setStartBefore":"setEndAfter"](element);range.collapse(begin)}range.insertNode(range.createContextualFragment(html))}return element}})(Base);ns.base=Base;var Request={};(function(Request){var _postContainer="__bdpp_pstc__"+new Date().getTime(),_postForm=_postContainer+"_form",_postTarget=_postContainer+"_ifr";var _buildQuery=function(query){if(typeof(query)=="object"){var builder=[];for(var p in query){var value=query[p];if(value!==undefined&&value!==null){if(builder.length){builder.push("&")}var valueString=encodeURIComponent(typeof(value)=="boolean"?(value?"1":"0"):value.toString());builder.push(encodeURIComponent(p),"=",valueString)}}return builder.join("")}if(typeof(query)=="string"){return query}return null};var _appendQuery=function(url,query){query=_buildQuery(query);if(typeof(query)=="string"){var hasQuery=(/\?/g).test(url);url+=(hasQuery?"&":"?")+_buildQuery(query)}return url};var _createScriptTag=function(scr,url,charset){scr.setAttribute("type","text/javascript");charset&&scr.setAttribute("charset",charset);scr.setAttribute("src",url);document.getElementsByTagName("head")[0].appendChild(scr)};var _removeScriptTag=function(scr){if(scr.clearAttributes){scr.clearAttributes()}else{for(var attr in scr){if(scr.hasOwnProperty(attr)){delete scr[attr]}}}if(scr&&scr.parentNode){scr.parentNode.removeChild(scr)}scr=null};var _callByServer=function(url,callback,opt_options){var scr=document.createElement("SCRIPT"),prefix="bd__cbs__",callbackName,callbackImpl,options=opt_options||{},charset=options.charset,queryField=options.queryField||"callback",timeOut=options.timeOut||0,timer,reg=new RegExp("(\\?|&)"+queryField+"=([^&]*)"),matches;callbackName=Base.getUniqueId(prefix);window[callbackName]=getCallBack(0);if(timeOut){timer=setTimeout(getCallBack(1),timeOut)}url=url.replace(reg,"\x241"+queryField+"="+callbackName);if(url.search(reg)<0){url+=(url.indexOf("?")<0?"?":"&")+queryField+"="+callbackName}_createScriptTag(scr,url,charset);function getCallBack(onTimeOut){return function(){try{if(onTimeOut){options.onfailure&&options.onfailure()}else{callback.apply(window,arguments);clearTimeout(timer)}window[callbackName]=null;delete window[callbackName]}catch(exception){}finally{_removeScriptTag(scr)}}}};var _renderDataForm=function(url,segments){var builder=[];builder.push("<form id='",_postForm,"' target='",_postTarget,"' ");builder.push("action='",Base.encodeHTML(url),"' method='post'>");for(var p in segments){if(segments.hasOwnProperty(p)){var value=segments[p];if(value!==undefined&&value!==null){var valueString=Base.encodeHTML(typeof(value)=="boolean"?(value?"1":"0"):value);builder.push("<input type='hidden' name='",Base.encodeHTML(p),"' value='",valueString,"' />")}}}builder.push("</form>");return builder.join("")};var _postInIframe=function(url,data,callback,options){options=options||{};var timeOut=options.timeOut||0,timer=false,callbackName=Base.getUniqueId("bd__pcbs__");data[options.queryField||"callback"]="parent."+callbackName;var formHtml=_renderDataForm(url,data);if(Base.g(_postForm)){Base.getParent(_postForm).innerHTML=formHtml}else{var htmlBuilder=[];htmlBuilder.push("<div id='",_postContainer,"' style='display:none;'>");htmlBuilder.push("<div>",formHtml,"</div>");htmlBuilder.push("<iframe name='",_postTarget,"' src='"+((window.location?window.location.protocol.toLowerCase():document.location.protocol.toLowerCase())=="https:"?"https://passport.baidu.com/passApi/html/_blank.html":"about:blank")+"' style='display:none;'></iframe>");htmlBuilder.push("</div>");Base.insertHTML(document.body,"beforeEnd",htmlBuilder.join(""))}window[callbackName]=getCallBack();if(timeOut){timer=setTimeout(getCallBack(1),timeOut)}function getCallBack(onTimeOut){return function(){try{if(onTimeOut){options.onfailure&&options.onfailure()}else{callback.apply(window,arguments);timer&&clearTimeout(timer)}window[callbackName]=null;delete window[callbackName]}catch(exception){}}}Base.g(_postForm).submit()};Request.jsonp=function(url,query,options){options=options||{};var originUrl=url;return new Promise(function(fulfillPromise,breakProimise){url=_appendQuery(url,query);_callByServer(url,function(jsonResult){if(options.processData){jsonResult=options.processData(jsonResult)}fulfillPromise&&fulfillPromise(jsonResult)},{charset:options.charset,queryField:options.queryField,timeOut:options.timeOut,onfailure:function(){breakProimise&&breakProimise()}})})};Request.submit=function(url,data,options){if(url&&data){return new Promise(function(fulfillPromise,breakProimise){_postInIframe(url,data,function(jsonResult){if(options.processData){jsonResult=options.processData(jsonResult)}fulfillPromise&&fulfillPromise(jsonResult)},options)})}};var _loadImgList=[];Request.load=function(src){return new Promise(function(fulfillPromise,breakProimise){var index=_loadImgList.push(new Image)-1,done=false,timer=setTimeout(function(){done=true;fulfillPromise&&fulfillPromise()},1000);_loadImgList[index].onload=function(){clearTimeout(timer);if(!done){fulfillPromise&&fulfillPromise()}done=true;_loadImgList[index]=_loadImgList[index].onload=null};_loadImgList[index].src=src})}})(Request);var _domain="https://passport.baidu.com",_getInterfaces={getApiInfo:"/v2/api/?getapi",getLoginHistory:"/v2/api/?loginhistory",loginCheck:"/v2/api/?logincheck",getVerifyCodeStr:"/v2/?reggetcodestr",checkUserName:"/v2/?regnamesugg",checkPassword:"/v2/?regpwdcheck",checkMail:"/v2/?regmailcheck",isUserNoName:"/v2/api/?ucenteradduname",checkPhone:"/v2/?regphonecheck",sendPhoneCode:"/v2/?regphonesend",multiBind:"/v2/?multiaccountassociate",multiUnbind:"/v2/?multiaccountdisassociate",multiCheckUserName:"/v2/?multiaccountusername",multiGetaccounts:"/v2/?multiaccountget",multiSwitchuser:"/v2/?loginswitch",checkVerifycode:"/v2/?checkvcode",getRsaKey:"/v2/getpublickey",authwidGetverify:"/v2/sapi/authwidgetverify"},_postInterfaces={login:"/v2/api/?login",reg:"/v2/api/?reg",fillUserName:"/v2/api/?ucenteradduname",regPhone:"/v2/api/?regphone"},_paramNameMapping={getApiInfo:{apiType:"class"},login:{memberPass:"mem_pass",safeFlag:"safeflg",isPhone:"isPhone",timeSpan:"ppui_logintime",logLoginType:"logLoginType"},fillUserName:{selectedSuggestName:"pass_fillinusername_suggestuserradio",timeSpan:"ppui_fillusernametime"},reg:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"},regPhone:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"}},_paramValueMapping={loginCheck:{isPhone:function(val,params){return val?"true":"false"}},login:{memberPass:function(val,params){return(val?"on":"")}}},_paramDefaultValue={checkPassword:{fromreg:1},reg:{registerType:1,verifypass:function(params){return params.password}}},_paramSpaceIgnoreList={password:true},_resultProcessFunc={login:function(jsonResult){}},_errInfoFieldMapping={checkUserName:"reg",checkMail:"reg",checkPhone:"regPhone",sendPhoneCode:"regPhone",multiCheckUserName:"multiBind",multiSwitchuser:"changeUser",checkVerifycode:"checkVerifycode"},_errMsg=passport.err.getCurrent().errMsg||passport.err.getCurrent(),_ctx={};ns.setContext=function(ctxInfo){_ctx.product=ctxInfo.product||_ctx.product;_ctx.charset=ctxInfo.charset||_ctx.charset;_ctx.staticPage=ctxInfo.staticPage||_ctx.staticPage;_ctx.token=ctxInfo.token||_ctx.token;_ctx.subpro=ctxInfo.subpro||_ctx.subpro};function defineInterface(interfaceName,url,isPost){if(url){if(!isPost){return function(params){return Request.jsonp(_domain+url,processParam(params,interfaceName,_paramNameMapping[interfaceName],_paramValueMapping[interfaceName],false),{charset:"utf-8",processData:function(jsonResult){return processResult(interfaceName,jsonResult)}})}}else{return function(params){params=params||{};return Request.submit(_domain+url,processParam(params,interfaceName,_paramNameMapping[interfaceName],_paramValueMapping[interfaceName],true),{charset:"utf-8",processData:function(jsonResult){if(jsonResult){for(var p in jsonResult){if(jsonResult.hasOwnProperty(p)){var v=jsonResult[p];if(v){jsonResult[p]=decodeURIComponent(v)}}}}return processResult(interfaceName,jsonResult)}})}}}else{return _blankFunc}}function processParam(params,interfaceName,paramNameMap,paramValueMap,isPost){var retParam=(isPost?{staticpage:_ctx.staticPage,charset:_ctx.charset||document.characterSet||document.charset||""}:{}),defaultParam=_paramDefaultValue[interfaceName];if(defaultParam){for(var p in defaultParam){if(defaultParam.hasOwnProperty(p)){var v=defaultParam[p];retParam[p]=(typeof(v)=="function"?v(params):v)}if(p=="verifypass"){retParam[p]=decodeURIComponent(retParam[p])}}}retParam.token=_ctx.token;retParam.tpl=_ctx.product||"";retParam.subpro=_ctx.subpro;retParam.apiver="v3";retParam.tt=new Date().getTime();if(params){paramNameMap=paramNameMap||{};paramValueMap=paramValueMap||{};for(var p in params){if(params.hasOwnProperty(p)){var valFn=paramValueMap[p],val=(!!valFn?valFn(params[p],params):params[p]);if(typeof(val)=="string"){if(isPost){val=decodeURIComponent(val)}if(!_paramSpaceIgnoreList[p]){val=Base.trim(val)}}retParam[paramNameMap[p]||p.toLowerCase()]=val}}}return retParam}function processResult(interfaceName,jsonResult){if(jsonResult){var processFunc=_resultProcessFunc[interfaceName];if(processFunc){processFunc(jsonResult)}var errInfo=jsonResult.errInfo,data=jsonResult,result=data;if(!errInfo){errInfo={no:jsonResult.err_no,msg:jsonResult.err_msg||""};delete data.err_no;delete data.err_msg;result={data:data,errInfo:processReturnErrInfo(interfaceName,errInfo,data)}}else{data.errInfo=processReturnErrInfo(interfaceName,errInfo,data)}return result}return jsonResult}function processReturnErrInfo(interfaceName,errInfo,data){var cfg=_errMsg[_errInfoFieldMapping[interfaceName]||interfaceName];if(cfg&&errInfo&&(errInfo.no!=0)){var msgDefine=cfg[errInfo.no]||cfg["-1"];if(msgDefine){var msg=msgDefine.msg;errInfo.msg=msg;errInfo.field=msgDefine.field}}return errInfo}for(var p in _getInterfaces){if(_getInterfaces.hasOwnProperty(p)){ns[p]=defineInterface(p,_getInterfaces[p])}}for(var p in _postInterfaces){if(_postInterfaces.hasOwnProperty(p)){ns[p]=defineInterface(p,_postInterfaces[p],true)}}function processSimpleResult(jsonResult){if(jsonResult){var errInfo=jsonResult.errInfo,data=jsonResult;if(!errInfo){for(var p in jsonResult){if(jsonResult.hasOwnProperty(p)){var v=jsonResult[p];if(v){jsonResult[p]=decodeURIComponent(v)}}}}if(!errInfo){errInfo={no:jsonResult.err_no,msg:jsonResult.err_msg||""};delete data.err_no;delete data.err_msg;jsonResult={data:data,errInfo:errInfo}}}return jsonResult}ns.jsonp=function(url,params){if(url.indexOf("http")!=0){url=_domain+url}params=params||{};params.apiver="v3";params.tt=new Date().getTime();return Request.jsonp(url,params,{charset:"utf-8",processData:function(jsonResult){return processSimpleResult(jsonResult)}})};ns.post=function(url,data){data=data||{};if(data.apitype=="wap"){url=url}else{url=_domain+url}data.staticpage=data.staticpage||_ctx.staticPage;data.charset=data.charset||_ctx.charset||document.characterSet||document.charset||"";data.token=data.token||_ctx.token;data.tpl=data.tpl||_ctx.product;return Request.submit(url,data,{charset:"utf-8",processData:function(jsonResult){return processSimpleResult(jsonResult)}})};ns.request=Request})(passport.data);var passport=passport||window.passport||{};passport.analysis=passport.analysis||{};(function(ns){var log=function(api,data){var logintype=api.config.diaPassLogin?"dialogLogin":"basicLogin";var merge=api.config.loginMerge?1:0;var tpl=api.config.product||"isnull";var protocol=window.location?window.location.protocol.toLowerCase():document.location.protocol.toLowerCase();var otherValue="";var t="&_t="+new Date().getTime();for(var i in data){otherValue=otherValue+"&"+i+"="+data[i]}if(protocol=="http:"){var link="http://nsclick.baidu.com/v.gif?pid=111&url=&logintype="+logintype+"&merge="+merge+"&tpl="+tpl+otherValue+t}else{if(protocol=="https:"){var link="https://passport.baidu.com/img/v.gif?cdnversion=10341718.gif?logintype="+logintype+"&merge="+merge+"&tpl="+tpl+otherValue+t}}if(link){var img=new Image();img.onload=img.onerror=function(){img.onload=img.onerror=null;img=null};img.src=link}};ns.login={render:function(api){log(api,{type:"firstrender",loginurl:encodeURIComponent(document.location.href)});baidu(api.getPhoenixElement("pass_phoenix_list_login")).on("click",function(evt){var $target=baidu(evt.target),currentSite;if($target&&$target.attr("title")){switch($target.attr("title")){case"æ™®é€šç™»å½•":currentSite="normal";break;case"äºŒç»´ç ç™»å½•":currentSite="qrcode";break;case"çŸ­ä¿¡ç™»å½•":currentSite="sms";break;case"QQå¸å·":currentSite="qq";break;case"æ–°æµªå¾®åš":currentSite="weibo";break;case"äººäººç½‘":currentSite="renren";break;case"è…¾è®¯å¾®åš":currentSite="tqq";break;case"é£žä¿¡":currentSite="fetion";break}log(api,{phoenix:currentSite})}});var formEle=api.getElement();baidu(formEle).on("click",function(event){if(!api.loginfirstclick){api.loginfirstclick=true;log(api,{type:"loginfirst"})}});var $form=api.getElement("form");baidu($form).on("submit",function(event){if(!api.loginfirstsubmit){api.loginfirstsubmit=true;log(api,{type:"loginfirstsubmit"})}})},loginSuccess:function(api,args){log(api,{type:"loginsuccess"})},loginError:function(api,args){},validateError:function(api,ele){if(ele.validate){log(api,{errno:encodeURIComponent(ele.validate.msg),type:"loginerrno"})}return{preventEvent:false,preventDefault:false}},fieldKeyup:function(api,args){if(!api.KEYUPFLAG){log(api,{type:"typein"});api.KEYUPFLAG=true}}}})(passport.analysis);var passport=passport||window.passport||{};passport.hook=passport.hook||{};(function(ns){var _domain=(window.location?((window.location.protocol.toLowerCase()=="http:")?"http://passport.baidu.com":"https://passport.baidu.com"):((document.location.protocol.toLowerCase()=="http:")?"http://passport.baidu.com":"https://passport.baidu.com")),_bizMods={uni_armorwidget:"/passApi/js/uni_armorwidget_f2746e4a.js",uni_forceverify:"/passApi/js/uni_forceverify_fb33da4a.js",uni_accConnect:"/passApi/js/uni_accConnect_wrapper_ffd826c9.js",uni_wrapper:"/passApi/js/uni_wrapper_ffd826c9.js"},uni_wrapper="uni_wrapper",verifyModName="uni_forceverify",bindModName="uni_armorwidget",connectModName="uni_accConnect",connect,_loadedCssFiles={};var loginSuccessed=function(api,args){var returnValue=api.fire("loginSuccess",args);if(!returnValue){return}if(window.location){window.location.href=args.rsp.data.u}else{document.location.href=args.rsp.data.u}};var get_flash_info=function(){var is_exists=0;var version=0;var filename=null;var isIE=
/*@cc_on!@*/
0;if(isIE){var swf=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(swf){is_exists=1;version=swf.GetVariable("$version")}}else{if(navigator&&navigator.plugins&&navigator.plugins.length>0&&navigator.plugins["Shockwave Flash"]){var swf=navigator.plugins["Shockwave Flash"];if(swf){filename=swf.filename;is_exists=1;if(swf.version){version=swf.version}else{version=swf.description}}}}return{isexists:is_exists,ver:version,filename:filename}};var loginCrossToHao123=function(hao123Param){var protocol=document.location.protocol.toLowerCase();if(protocol!="https:"){passport.data.request.load(protocol+"//v.tieba.com/platform/agency/setbdu?bdu="+encodeURIComponent(hao123Param)+"&t="+new Date().getTime())}passport.data.request.load(protocol+"//user.nuomi.com/pclogin/main/crossdomain?bdu="+encodeURIComponent(hao123Param)+"&t="+new Date().getTime());passport.data.request.load(protocol+"//passport.chuanke.com/api/sync?bdu="+encodeURIComponent(hao123Param)+"&t="+new Date().getTime());return passport.data.request.load(protocol+"//user.hao123.com/static/crossdomain.php?bdu="+encodeURIComponent(hao123Param)+"&t="+new Date().getTime())};function bindAction(options){var me=this;var optionsNo={"120016":{isLogin:false,msg:"æ‚¨çš„å¸å·å­˜åœ¨å®‰å…¨é£Žé™©ï¼Œæˆ‘ä»¬å·²ç»ä¸ºæ‚¨é‡‡å–ä¿æŠ¤ç­–ç•¥ï¼Œå»ºè®®æ‚¨å…ˆç»‘å®šå¯†ä¿æ‰‹æœºã€‚"},"400032":{isLogin:true,msg:"å¿«æ¥ç»‘å®šå¯†ä¿å·¥å…·å§ï¼Œæå‡å¸å·å®‰å…¨æ€§çš„åŒæ—¶å¯ä»¥å¿«é€Ÿæ‰¾å›žå¯†ç ã€‚"},"400034":{isLogin:false,msg:{phone:"è¯·ç»‘å®šæ‚¨çš„æ‰‹æœºå·ç ä½œä¸ºæ‚¨çš„å¯†ä¿æ‰‹æœºï¼Œæå‡å¸å·å®‰å…¨æ€§çš„åŒæ—¶è¿˜å¯ä»¥å¿«é€Ÿæ‰¾å›žå¯†ç ã€‚",email:"è¯·ç»‘å®šä¸€ä¸ªæ‚¨çš„å¸¸ç”¨é‚®ç®±ä½œä¸ºæ‚¨çš„å¯†ä¿é‚®ç®±ï¼Œæå‡å¸å·å®‰å…¨æ€§çš„åŒæ—¶è¿˜å¯ä»¥å¿«é€Ÿæ‰¾å›žå¯†ç ã€‚"}}}[options.errno];var args=options.args,title=options.title,msg=optionsNo.msg,auth_title=options.auth_title,auth_msg=options.auth_msg,isLogin=optionsNo.isLogin,cfg=options.cfg;var bindEmailWidget,bindPhoneWidget;var requestBindToken=function(api,options,callback){var args=options.args,data={action:options.type||"init",u:api.config.u,tpl:api.config.product,ltoken:args.rsp.data.ltoken,lstr:args.rsp.data.lstr},requestUrl="";api.REQUESTBINDTOKENURL="/v2/?loginspmbindsecureinfo";passport.data.jsonp("https://passport.baidu.com"+api.REQUESTBINDTOKENURL,data).success(function(result){if(result.errInfo.no==0){callback&&callback({bindEmailToken:result.data.bindEmailToken,bindMobileToken:result.data.bindMobileToken,authsid:result.data.authsid,loginproxy:result.data.loginproxy,otherValue:data})}else{alert(api.lang.sysError)}})};var bindEmail=function(data){var addMsg=((typeof msg).toLowerCase()=="string")?msg:msg.email;if(isLogin){addMsg+="æ‚¨å¯ä»¥<a class='bindLink bindJumpEmail'>è·³è¿‡æ­¤æ­¥éª¤</a>æˆ–<a class='bindLink bindPhoneBtn'>ç»‘å®šå¯†ä¿æ‰‹æœº</a>ã€‚"}else{addMsg+="æ‚¨ä¹Ÿå¯ä»¥<a class='bindLink bindPhoneBtn'>ç»‘å®šå¯†ä¿æ‰‹æœº</a>ã€‚"}return passport.pop.ArmorWidget("bindemail",{token:data.bindEmailToken,authsid:data.authsid,title:title||"ç»‘å®šå¯†ä¿é‚®ç®±",otherValue:data.otherValue,msg:addMsg,subpro:me.config.subpro,onSubmitSuccess:function(self,result){var self=self;requestBindToken(me,{args:args,type:"check"},function(checkData){self&&self.hide&&self.hide();args.isCompleted=true;if(checkData.loginproxy){passport.data.jsonp(checkData.loginproxy).success(function(result){cfg.onCompleted&&cfg.onCompleted(result,function(){cfg.onCancel&&cfg.onCancel(args)})})}else{cfg.onCancel&&cfg.onCancel(args)}})},onRender:function(){var me=this;baidu(".bindPhoneBtn").on("click",function(){me.close();bindPhoneWidget.show()});baidu(".bindJumpEmail").on("click",function(evt){evt.preventDefault();me.close();args.isCompleted=true;cfg.onCancel&&cfg.onCancel(args)});baidu("#"+me.getId("header_a")).on("click",function(){if(isLogin){args.isCompleted=true;cfg.onCancel&&cfg.onCancel(args)}})}})};var bindPhone=function(data){var addMsg=((typeof msg).toLowerCase()=="string")?msg:msg.phone;if(isLogin&&data.bindEmailToken){addMsg+="æ‚¨å¯ä»¥<a class='bindLink bindJumpPhone'>è·³è¿‡æ­¤æ­¥éª¤</a>æˆ–<a class='bindLink bindEmailBtn'>ç»‘å®šå¯†ä¿é‚®ç®±</a>ã€‚"}else{if(data.bindEmailToken){addMsg+="æ‚¨ä¹Ÿå¯ä»¥<a class='bindLink bindEmailBtn'>ç»‘å®šå¯†ä¿é‚®ç®±</a>ã€‚"}}return passport.pop.ArmorWidget("bindmobile",{token:data.bindMobileToken,authsid:data.authsid,title:title||"ç»‘å®šå¯†ä¿æ‰‹æœº",otherValue:data.otherValue,msg:addMsg,subpro:me.config.subpro,onSubmitSuccess:function(self,result){var self=self;requestBindToken(me,{args:args,type:"check"},function(checkData){self&&self.hide&&self.hide();args.isCompleted=true;if(checkData.loginproxy){passport.data.jsonp(checkData.loginproxy).success(function(result){cfg.onCompleted&&cfg.onCompleted(result,function(){cfg.onCancel&&cfg.onCancel(args)})})}else{cfg.onCancel&&cfg.onCancel(args)}})},onRender:function(me){var me=this;baidu(".bindEmailBtn").on("click",function(evt){evt.preventDefault();me.close();bindEmailWidget=bindEmailWidget||bindEmail(data);bindEmailWidget.show()});baidu(".bindJumpPhone").on("click",function(evt){evt.preventDefault();me.close();args.isCompleted=true;cfg.onCancel&&cfg.onCancel(args)});baidu("#"+me.getId("header_a")).on("click",function(){if(isLogin){args.isCompleted=true;cfg.onCancel&&cfg.onCancel(args)}})}})};requestBindToken(me,{args:args,type:"init"},function(data){passport._use(bindModName,_bizMods[bindModName],function(){if(data.bindMobileToken){bindPhoneWidget=bindPhone(data);bindPhoneWidget.show()}else{if(data.bindEmailToken){bindEmailWidget=bindEmail(data);bindEmailWidget.show()}else{alert(me.lang.sysError)}}})})}function verifyAction(options){var me=this,warnHtml,warnMsg,rspData=options.rspData,cfg=options.cfg,args=options.args;var getWarnHTML=function(msg){var msg=msg||"ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨çš„å¸å·ç–‘ä¼¼è¢«ç›—ï¼Œå­˜åœ¨å®‰å…¨é£Žé™©ã€‚è¯·å°½å¿«ä¿®æ”¹å¯†ç ã€‚";return'<div class="passport-forceverify-risk"><p class="passport-forceverify-risk-msg">'+msg+'</p><div  class="passport-forceverify-risk-con clearfix"><a class="passport-forceverify-risk-btn" href="http://passport.baidu.com/v2/account/password" target="_blank" >ç«‹å³ä¿®æ”¹</a><a class="passport-forceverify-risk-next" id="passport_forceverify_risk_next" href="###">ä¸‹æ¬¡æé†’</a></div></div>'};if(rspData&&rspData.secstate){if(rspData.secstate=="risk"){warnHtml=getWarnHTML("æ‚¨çš„å¸å·ç–‘ä¼¼è¢«ç›—ï¼Œå­˜åœ¨ä¸¥é‡çš„å®‰å…¨é£Žé™©ï¼Œè¯·æ‚¨å°½å¿«ä¿®æ”¹å¯†ç ã€‚<br/>* åœ¨æ‚¨æˆåŠŸä¿®æ”¹å¯†ç å‰ï¼Œæ‚¨æ¯æ¬¡ç™»å½•éƒ½éœ€è¦è¿›è¡Œå®‰å…¨éªŒè¯");warnMsg='ç³»ç»Ÿç›‘æµ‹åˆ°æ‚¨çš„å¸å·ç–‘ä¼¼è¢«ç›—ï¼Œä¸ºç¡®ä¿æœ¬äººæ“ä½œï¼Œè¯·å…ˆè¿›è¡Œå®‰å…¨éªŒè¯ã€‚å¦‚æžœä»¥ä¸‹å¯†ä¿å·¥å…·ä¸æ˜¯æ‚¨æœ¬äººç»‘å®šï¼Œæˆ–å·²ç»è¢«ç›—å·è€…æ›´æ”¹ï¼Œè¯·ç›´æŽ¥è¿›å…¥<a href="#" id="passport_forceverify_risk_appeal" target="_blank">äººå·¥ç”³è¯‰</a>'}else{if(rspData.secstate=="cheat"){warnMsg="æ‚¨çš„å¸å·ç–‘ä¼¼è¢«ç›—ï¼Œå­˜åœ¨ä¸¥é‡çš„å®‰å…¨é£Žé™©ï¼Œè¯·å…ˆè¿›è¡Œå®‰å…¨éªŒè¯ï¼ŒéªŒè¯æˆåŠŸåŽæ‚¨å¯ä»¥æ­£å¸¸ä½¿ç”¨è¯¥å¸å·ã€‚"}else{warnMsg="ç”±äºŽæ‚¨çš„å¸å·å­˜åœ¨å®‰å…¨é£Žé™©ï¼Œä¸ºäº†ç¡®ä¿æ‚¨çš„å¸å·å®‰å…¨ï¼Œè¯·å…ˆè¿›è¡Œå®‰å…¨éªŒè¯ï¼ŒéªŒè¯æˆåŠŸåŽæ‚¨å¯ä»¥æ­£å¸¸ä½¿ç”¨è¯¥å¸å·ã€‚"}}}var verifyOpt={"400031":{title:"ç™»å½•ä¿æŠ¤",msg:"æ‚¨çš„å¸å·å·²å¼€å¯ç™»å½•ä¿æŠ¤æœåŠ¡ï¼Œç™»å½•å‰è¯·å…ˆè¿›è¡Œå®‰å…¨éªŒè¯ã€‚"},"5":{title:"ç™»å½•å®‰å…¨éªŒè¯",msg:"æ‚¨æ‰€å¤„çš„ç½‘ç»œçŽ¯å¢ƒå­˜åœ¨å®‰å…¨é£Žé™©ï¼Œä¸ºä¿è¯å¸å·å®‰å…¨ï¼Œè¯·å…ˆè¿›è¡Œå®‰å…¨éªŒè¯",onSuccess:function(self,data){var gotoUrl=rspData.gotourl+"&authsid="+data.authsid;passport.data.jsonp(gotoUrl).success(function(result){me._ownerDialog&&me._ownerDialog.show();self.hide();if(result.errInfo.no==0||result.data.errno==0){me.getElement("error").innerHTML='è¯·é‡æ–°ç™»å½•ï¼Œæˆ–<a href="https://passport.baidu.com/?getpass_index" target="_blank">æ‰¾å›žå¯†ç </a>'}else{me.getElement("error").innerHTML=me.lang.sysError}})},onGetapiError:function(){me.getElement("error").innerHTML="æ‚¨æ‰€å¤„çš„ç½‘ç»œçŽ¯å¢ƒå­˜åœ¨å®‰å…¨é£Žé™©ï¼Œè¯·10åˆ†é’Ÿå†è¯•"}},"120019":{title:"ç™»å½•è§£å†»éªŒè¯",msg:"æ‚¨æœ€è¿‘å¯†ç è¾“å…¥é”™è¯¯è¿‡äºŽé¢‘ç¹ï¼Œä¸ºä¿è¯å¸å·å®‰å…¨ï¼Œè¯·å…ˆè¿›è¡Œå®‰å…¨éªŒè¯",onSuccess:function(self,data){var gotoUrl=rspData.gotourl+"&authsid="+data.authsid;passport.data.jsonp(gotoUrl).success(function(result){me._ownerDialog&&me._ownerDialog.show();self.hide();if(result.errInfo.no==0||result.data.errno==0){me.getElement("error").innerHTML='è¯·é‡æ–°ç™»å½•ï¼Œæˆ–<a href="https://passport.baidu.com/?getpass_index" target="_blank">æ‰¾å›žå¯†ç </a>'}else{me.getElement("error").innerHTML=me.lang.sysError}})},onGetapiError:function(){me.getElement("error").innerHTML='ç™»å½•å¯†ç é”™è¯¯å·²è¾¾ä¸Šé™ï¼Œæ‚¨å¯ä»¥<a href="https://passport.baidu.com/?getpass_index" target="_blank">æ‰¾å›žå¯†ç </a>æˆ–3å°æ—¶åŽå†è¯•'}},"120021":{title:"å®‰å…¨éªŒè¯",msg:warnMsg,defaultHTML:warnHtml,onSuccess:function(self){passport.data.jsonp(rspData.loginproxy).success(function(result){self.show();if(result.errInfo.no==0){args.isCompleted=true;if(warnHtml){self.getElement("article").innerHTML=warnHtml;baidu(self.getElement("header_a")).on("click",function(){self.hide();cfg.onCompleted&&cfg.onCompleted(result,function(){cfg.onCancel&&cfg.onCancel(args)})});baidu(document.getElementById("passport_forceverify_risk_next")).on("click",function(){self.hide();cfg.onCompleted&&cfg.onCompleted(result,function(){cfg.onCancel&&cfg.onCancel(args)})})}else{self.hide();cfg.onCompleted&&cfg.onCompleted(result,function(){cfg.onCancel&&cfg.onCancel(args)})}}else{alert(me.lang.sysError)}});return false},onRender:function(self){if(document.getElementById("passport_forceverify_risk_appeal")){document.getElementById("passport_forceverify_risk_appeal").href=self.url_forgot}}},riskCheat:{token:"risk",title:"å®‰å…¨éªŒè¯",msg:warnMsg,defaultHTML:warnHtml,onRender:function(self){baidu(document.getElementById("passport_forceverify_risk_next")).on("click",function(){self.hide();cfg.onCancel&&cfg.onCancel()});if(document.getElementById("passport_forceverify_risk_appeal")){document.getElementById("passport_forceverify_risk_appeal").href=self.url_forgot}}}}[options.errno];passport._use(verifyModName,_bizMods[verifyModName],function(){forceverifyLoginverify=passport.pop.Forceverify({token:rspData.authtoken,title:verifyOpt.title,msg:verifyOpt.msg,subpro:me.config.subpro,onRender:function(self){verifyOpt.onRender&&verifyOpt.onRender(self)},onSubmitSuccess:function(self,data){if(verifyOpt.onSuccess){verifyOpt.onSuccess(self,data);return}var loginProxyUrl=rspData.loginproxy;passport.data.jsonp(loginProxyUrl).success(function(result){if(result.errInfo.no==0||result.data.errno==0){self.hide();args.isCompleted=true;cfg.onCompleted&&cfg.onCompleted(result,function(){cfg.onCancel&&cfg.onCancel(args)})}else{self.hide();me._ownerDialog&&me._ownerDialog.show();me.getElement("error").innerHTML=me.lang.sysError}})},onGetapiError:function(self){me._ownerDialog&&me._ownerDialog.show();if(verifyOpt.onGetapiError){verifyOpt.onGetapiError(self);return}me.getElement("error").innerHTML=me.lang.sysError},onHide:function(){cfg.onCancel&&cfg.onCancel();if(me.config.loginMerge&&me.getElement("isPhone")){me.getElement("isPhone").value=""}}},true)})}function multiChoiceAction(options){var me=this,rspData=options.rspData;var userList=[],accounts=rspData.accounts.split(";");for(var i=0;i<accounts.length;i++){var item=accounts[i].split(",");userList.push({username:item[0],portrait:item[1]})}passport._load(_domain+_bizMods[uni_wrapper],true,function(){var loginMultichoice=passport.pop.init({type:"loginMultichoice",tangram:true,apiOpt:{phone:rspData.userName,userList:userList},onChoicedUser:function(diaChoice,result){loginMultichoice.hide();me._ownerDialog&&me._ownerDialog.show();me.getElement("userName").value=result.username;me.getElement("isPhone").value="false";if(me.config.loginMerge&&me.getElement("loginMerge")){me.getElement("loginMerge").value=""}if(me.currentLoginType=="sms"){me.getElement("smsHiddenFields_switchuname").value=result.username;me._submitSmsForm()}else{if(!me.config.loginMerge){me._collectData();me.switchTo("normal");me._restoreData("phone")}me.submit()}},onHide:function(){me.getElement("userName").value=rspData.userName;me.getElement("isPhone").value=""}});loginMultichoice.show()})}function webToClientAction(options){var me=this,swfId=me.$getId("pass_b2c_swf"),rspData=options.args.rsp.data,flashInfo=get_flash_info();var ishit=0;if(rspData&&rspData.bckv){ishit=parseInt(rspData.bckv,10)>0}var flash=null;passport.CONSTANT=passport.CONSTANT||{};passport.CONSTANT.b2c_getlogin=function(info){};passport.CONSTANT.b2c_setlogin=function(){var b2cinfo={kv:rspData.bckv,sync:rspData.bcsync,checksum:rspData.bcchecksum,time:rspData.bctime};try{if(flash){var status=flash.get_movie(swfId,"b2c_setlogin").b2c_setlogin(b2cinfo);try{var script=document.createElement("script");script.type="text/javascript";script.src=[_domain,"/v2/b2c-stable?","from=setlogin.done","&checksum=",b2cinfo.checksum,"&time=",b2cinfo.time,"&status=",encodeURIComponent(status)].join("");document.getElementsByTagName("head")[0].appendChild(script)}catch(e){}}}catch(e){try{var script=document.createElement("script");script.type="text/javascript";script.src=[_domain,"/v2/b2c-stable?","from=setlogin.fail","&msg=",encodeURI(e.message)].join("");document.getElementsByTagName("head")[0].appendChild(script)}catch(e){}}};if(me.getElement("pass_b2c")&&flashInfo.isexists&&ishit){var create_flash=function(options){var get_html=function(options){options=options||{};var i,k,len,item,tmpOpt={},encodeHTML=function(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};for(k in options){tmpOpt[k]=options[k]}options=tmpOpt;var vars=options.vars,objProperties=["classid","codebase","id","width","height","align"];options.align=options.align||"middle";options.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";options.codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0";options.movie=options.url||"";delete options.vars;delete options.url;if("string"===typeof vars){options.flashvars=vars}else{var fvars=[];for(k in vars){item=vars[k];fvars.push(k+"="+encodeURIComponent(item))}options.flashvars=fvars.join("&")}var str=["<object "];for(i=0,len=objProperties.length;i<len;i++){item=objProperties[i];str.push(" ",item,'="',encodeHTML(options[item]),'"')}str.push(">");var params={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(k in options){item=options[k];k=k.toLowerCase();if(params[k]&&(item||item===false||item===0)){str.push('<param name="'+k+'" value="'+encodeHTML(item)+'" />')}}options.src=options.movie;options.name=options.id;delete options.id;delete options.movie;delete options.classid;delete options.codebase;options.type="application/x-shockwave-flash";options.pluginspage="https://www.macromedia.com/go/getflashplayer";str.push("<embed");var salign;for(k in options){item=options[k];if(item||item===false||item===0){if((new RegExp("^salign\x24","i")).test(k)){salign=item;continue}str.push(" ",k,'="',encodeHTML(item),'"')}}if(salign){str.push(' salign="',encodeHTML(salign),'"')}str.push("></embed></object>");return str.join("")};var create=function(options){options=options||{};var e=document.createElement("div");e.innerHTML=get_html(options);document.getElementsByTagName("body")[0].appendChild(e)};create(options);return{get_movie:function(name,func){var movie=document[name];if(document.documentMode===9&&movie&&movie.length){var size=movie.length;for(var i=0;i<size;i++){var item=movie[i];if(item.tagName.toLowerCase()==="embed"){movie=item;break}}}if(func){if(typeof(movie[func])!=="function"){movie=document.getElementById(name)}}return movie}}};try{var protocol=window.location.protocol.toLowerCase();flash=create_flash({id:swfId,width:"1",height:"1",url:protocol+"//passport.baidu.com/passApi/swf/b2c_e3eae510.swf?_t="+Math.random(),allowscriptaccess:"always"})}catch(e){}}passport.data.request.load(_domain+"/v2/b2c-flash?isexists="+encodeURIComponent(flashInfo.isexists)+"&ver="+encodeURIComponent(flashInfo.ver)+"&filename="+encodeURIComponent(flashInfo.filename))}function connectAction(options){var me=this;options.rspData=options.rspData||{};passport._load(_domain+_bizMods[connectModName],true,function(){if(!connect){connect=passport.pop.init({type:"accConnect",tangram:true,color:me.config.color||"",apiOpt:{u:me.config.u,adtext:options.rspData.adtext,product:me.config.product,token:options.rspData.token,staticPage:me.config.staticPage},onConnectSuccess:function(rsp){var d=rsp.rsp;d.connect=connect;loginSuccessed(me,{rsp:d});rsp.returnValue=false}});connect.show()}else{connect.setToken(options.rspData.token,function(){connect.show()})}})}function hookPopBiz(api,args,cfg){var errNo=args.rsp.errInfo.no,rspData=args.rsp.data,cfg=cfg||{},isRiskCheat=rspData&&(rspData.secstate=="risk"||rspData.secstate=="cheat");if(rspData&&rspData.connectType&&api.config.connect){var returnValue=api.fire("beforeWarning",{args:args});if(!returnValue){return}api.getElement("error").innerHTML="";api._ownerDialog&&api._ownerDialog.hide("unHide");loadCssFile(_domain+"/passApi/css/uni_accConnect_76ad3a68.css");connectAction.apply(api,[{args:args,rspData:rspData,cfg:cfg,errno:errNo}]);return false}if(errNo==401007){var returnValue=api.fire("beforeWarning",args);if(!returnValue){return}api.getElement("error").innerHTML="";api._ownerDialog&&api._ownerDialog.hide("unHide");multiChoiceAction.apply(api,[{rspData:rspData}]);return false}if(errNo==120016||errNo==400032||errNo==400034){var returnValue=api.fire("beforeWarning",args);if(!returnValue){return}api.getElement("error").innerHTML="";api._ownerDialog&&api._ownerDialog.hide("unHide");bindAction.apply(api,[{errno:errNo,args:args,cfg:cfg}]);if(rspData.hao123Param){loginCrossToHao123(rspData.hao123Param)}return false}if(errNo==5||errNo==400031||errNo==120019||errNo==120021||isRiskCheat){var forceverifyLoginverify=null,forceverifyRiskReal=null,forceverifyRisk=null;var returnValue=api.fire("beforeWarning",{args:args});if(!returnValue){return}api.getElement("error").innerHTML="";api._ownerDialog&&api._ownerDialog.hide("unHide");loadCssFile(_domain+"/passApi/css/uni_forceverify_f606441b.css");verifyAction.apply(api,[{args:args,rspData:rspData,cfg:cfg,errno:((isRiskCheat&&errNo!=120021)?"riskCheat":errNo)}]);return false}return true}function loadCssFile(url){if(!_loadedCssFiles[url]){_loadedCssFiles[url]=true;var l=document.createElement("link");l.rel="stylesheet";l.type="text/css";l.href=url;document.getElementsByTagName("head")[0].appendChild(l)}return true}ns.login={loginSuccess:function(api,args){if(api.config.setWebToClient){webToClientAction.apply(api,[{args:args}])}loginCrossToHao123(args.rsp.data.hao123Param).success(function(){var hasHiz=hookPopBiz(api,args,{onCancel:function(){loginSuccessed(api,args)}});if(hasHiz){loginSuccessed(api,args)}});return{preventEvent:true,preventDefault:true}},loginError:function(api,args){hookPopBiz(api,args,{onCompleted:function(rsp,callbacks){loginCrossToHao123(rsp.data.hao123Param).success(callbacks)},onCancel:function(args){if(args&&args.isCompleted){loginSuccessed(api,{rsp:args.rsp})}}});return{preventEvent:false,preventDefault:false}},connectNeedBind:function(api,args){hookPopBiz(api,args,{onCompleted:function(rsp,callbacks){},onCancel:function(args){}});return{preventEvent:false,preventDefault:false}},validateAllError:function(api,ele){var $ele=ele.validates?api.getElement(ele.validates[ele.validates.length-1].field):"";if($ele&&$ele.focus){$ele.focus()}return{preventEvent:false,preventDefault:false}}}})(passport.hook);magic.passport=baidu.lang.createClass(function(){this._validateInfo={}},{type:"magic.passport",superClass:magic.Base}).extend({_getRegularField:function(opt,action){var type=opt.pwd?"password":"text",me=this,autoComplete=((action&&action=="reg")||(!action&&opt.field=="userName"))?' autocomplete	="off"':"",maxLength=opt.maxLength?'maxlength="'+opt.maxLength+'"':"",tip=opt.tip?opt.tip:"",display=opt.field=="verifycode"?"none":"";var str='<p id="'+me.$getId(opt.field+"Wrapper")+'" class="pass-form-item pass-form-item-'+opt.field+'" style="display:'+display+'"><label for="'+me.$getId(opt.field)+'" id="'+me.$getId(opt.field+"Label")+'" class="pass-label pass-label-'+opt.field+'">'+opt.label+'</label><input id="'+me.$getId(opt.field)+'" type="'+type+'" name="'+opt.field+'" class="pass-text-input pass-text-input-'+opt.field+'" '+maxLength+autoComplete+" />"+(!opt.noError?'<span id="'+me.$getId(opt.field+"Error")+'" class="pass-item-error pass-item-error-'+opt.field+'"></span>':"")+(opt.hasSucc?'<span id="'+me.$getId(opt.field+"Succ")+'" class="pass-item-succ pass-item-succ-'+opt.field+'" style="display:none;"></span>':"")+'<span id="'+me.$getId(opt.field+"Tip")+'" class="pass-item-tip pass-item-tip-'+opt.field+'" style="display:none"><span id="'+me.$getId(opt.field+"TipText")+'" class="pass-item-tiptext pass-item-tiptext-'+opt.field+'">'+tip+"</span></span></p>";return str},_getHiddenField:function(fields,type){var me=this,value,str='<p id="'+me.$getId(type||"hiddenFields")+'" style="display:none">';for(var i in fields){if(fields.hasOwnProperty(i)){if(typeof(fields[i])=="string"){value=fields[i].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#39;")}else{value=fields[i]}str+='<input type="hidden" id="'+me.$getId((type?type+"_":"")+i)+'" name="'+i+'" value="'+value+'" />'}}str+="</p>";return str},_setEvent:function(){var me=this,container=this.getElement();var fn=function(e){me._eventHandler.entrance.apply(me,[e])};baidu(me.getElement("form")).on("submit",fn);baidu(me.getElement("license")).on("click",fn);baidu(me.getElement("verifyCodeChange")).on("click",fn);baidu(me.getElement("verifyCodeSend")).on("click",fn);baidu(me.getElement("smsVcodeSend")).on("click",fn);baidu(container).delegate(".pass-suggest-item label","click",fn);baidu(".pass-text-input",me.getElement()).on({focus:fn,blur:fn,change:fn,keyup:fn,mouseover:fn,mouseout:fn})},_validator:{confStorage:{},builtInMsg:{required:"è¯·æ‚¨å¡«å†™%s",phone:"æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®",email:"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"},builtInRules:{required:/\S+/,phone:/^1[34578]\d{9}$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/},init:function(me,conf){this.confStorage[me.$getId()]=conf},validate:function(me,field,callbacks,type){var ele=me.getElement(field),output={field:field},re=/^\s*(.+?)\s*$/;if(!ele||ele.offsetHeight==0){return false}var value=ele.value.replace(re,"$1"),conf=this.confStorage[me.$getId()][field],rules=conf.rules;for(var i=0,j=rules.length;i<j;i++){var ruleName=rules[i],rule=this.builtInRules[ruleName],result;if(Object.prototype.toString.call(rule).toLowerCase()=="[object function]"){result=rule.call(me,ele,type)}else{result=new RegExp(rule).test(value)}if(!result){output.error=true;me._validateInfo[field]=0;output.msg=this.builtInMsg[ruleName].replace(/\%s/,conf.desc);me._validateError(output);callbacks.error(output);return}}if(!conf.asyncRule){output.error=false;me._validateInfo[field]=1;me._validateSuccess(output);callbacks.success(output)}else{conf.asyncRule.call(me,{success:function(rsp){output.error=false;output.data=rsp.data;me._validateInfo[field]=1;me._validateSuccess(output);callbacks.success(output)},error:function(rsp){output.error=true;me._validateInfo[field]=0;output.msg=rsp.msg;me._validateError(output);callbacks.error(output)}},type)}},validateAll:function(me,callbacks,breakOnError){var all=this.confStorage[me.$getId()],counter=0,error=false,completed=false,result=[],allLen=this._getActiveValidate(me,true);for(var i in all){if(completed){break}this.validate(me,i,{success:function(input){counter++;result.push(input);if(counter==allLen){onComplete()}},error:function(input){error=true;counter++;result.push(input);if(breakOnError){onComplete();return}if(counter==allLen){onComplete()}}},"all")}function onComplete(){completed=true;if(error){callbacks&&callbacks.error(result)}else{callbacks&&callbacks.success(result)}}},_getActiveValidate:function(me,lenthOnly){var all=this.confStorage[me.$getId()],result=[];for(var i in all){var ele=me.getElement(i);if(!ele||ele.offsetHeight==0){continue}result.push(ele)}return lenthOnly?result.length:result},addRule:function(key,rule){var newRule={};newRule[key]=rule;baidu.extend(this.builtInRules,newRule)},addMsg:function(key,msg){var newMsg={};newMsg[key]=msg;baidu.extend(this.builtInMsg,newMsg)}},validate:function(field,callbacks){var me=this;var returnValue=me.fireEvent("beforeValidate",{validate:{field:field,ele:baidu(me.getElement(field))}});if(!returnValue){return}me._validator.validate(me,field,{success:function(validate){var returnValue=me.fireEvent("validateSuccess",{validate:validate});if(!returnValue){return}callbacks&&callbacks.success&&callbacks.success(validate)},error:function(validate){var returnValue=me.fireEvent("validateError",{validate:validate});if(!returnValue){return}callbacks&&callbacks.error&&callbacks.error(validate)}})},validateAll:function(callbacks,breakOnError){var me=this;if(typeof callbacks=="boolean"){breakOnError=callbacks}else{breakOnError=breakOnError?breakOnError:false}var returnValue=me.fireEvent("beforeValidateAll");if(!returnValue){return}me._validator.validateAll(me,{success:function(validates){var returnValue=me.fireEvent("validateAllSuccess",{validates:validates});if(!returnValue){return}callbacks&&callbacks.success&&callbacks.success(validates)},error:function(validates){var returnValue=me.fireEvent("validateAllError",{validates:validates});if(!returnValue){return}callbacks&&callbacks.error&&callbacks.error(validates)}},breakOnError)},getValidateStatus:function(field){return this._validateInfo.hasOwnProperty(field)?this._validateInfo[field]:-1},setValidateSuccess:function(field){var me=this;me._validateInfo[field]=1;me._validateSuccess({field:field})},setValidateError:function(field,msg,opt){var me=this;me._validateInfo[field]=0;me._validateError({field:field,msg:msg},opt)},setGeneralError:function(msg){this.getElement("error").innerHTML=msg},clearGeneralError:function(){this.getElement("error").innerHTML=""},_isSupportPlaceholder:function(){return"placeholder" in document.createElement("input")},_getPlaceholder:function(rendList){var me=this,holder={},phContent="",clear={};for(var i=0;i<rendList.length;i++){phContent=me.lang[rendList[i].placeholder];if(rendList[i].clearbtn!=0){clear[i]=baidu('<span id="'+me.$getId(rendList[i].label+"_clearbtn")+'" class="pass-clearbtn pass-clearbtn-'+rendList[i].label+'" style="display:none;"></span>');baidu(me.getElement(rendList[i].label)).after(clear[i])}if(me._isSupportPlaceholder()&&!baidu.browser.ie){baidu(me.getElement(rendList[i].label)).attr({placeholder:phContent})}else{holder[i]=baidu('<span id="'+me.$getId(rendList[i].label+"_placeholder")+'" class="pass-placeholder pass-placeholder-'+rendList[i].label+'">'+phContent+"</span>");baidu(me.getElement(rendList[i].label)).after(holder[i])}me._rendEventPlaceholder(me.getElement(rendList[i].label),holder[i],clear[i])}},_rendEventPlaceholder:function(self,holder,clear){if(!self&&!clear){return}var me=this,clearDbClick,mouseDownFlag,hasValueFunc=function(hasValue){if(hasValue==1){holder&&holder[0]&&me.$hide(holder[0]);clear&&clear[0]&&me.$show(clear[0])}else{holder&&holder[0]&&me.$show(holder[0]);clear&&clear[0]&&me.$hide(clear[0])}};setTimeout(function(){if(self.value){hasValueFunc(1)}},200);baidu(holder).on("mousedown",function(){mouseDownFlag=true;clearTimeout(clearDbClick);clearDbClick=setTimeout(function(){if(!(me.suggestionDom&&me.suggestionDom.style.display!="none")){self.focus()}},0)});baidu(clear).on("click",function(){self.value="";hasValueFunc(0);self.focus();if(me.suggestionDom){me.suggestionDom.data_delete=true;setTimeout(function(){me.suggestionDom.data_delete=false},200)}});baidu(self).on("keyup",function(){if(self.value){hasValueFunc(1)}else{hasValueFunc(0)}});baidu(self).on("focus",function(){inputCheckTimer=setInterval(function(){if(self.value.length){hasValueFunc(1);clearInterval(inputCheckTimer)}else{hasValueFunc(0)}},30)})},hide:function(){this.getElement().style.display="none"},show:function(){this.getElement().style.display="block"},_analysis:function(name,extraParam){if(passport.analysis&&passport.analysis[this.module]&&passport.analysis[this.module][name]){passport.analysis[this.module][name](this,extraParam);return{preventDefault:false,preventEvent:false}}},_hook:function(name,extraParam){if(passport.hook&&passport.hook[this.module]&&passport.hook[this.module][name]){return passport.hook[this.module][name](this,extraParam)}else{return{preventDefault:false,preventEvent:false}}},fireEvent:function(event,param){var hook=this._hook(event,param),analysis=this._analysis(event,param),continueDefault=true;if(!hook.preventEvent){continueDefault=this.fire(event,param)}return !hook.preventDefault&&continueDefault}});magic.passport.login=baidu.lang.createClass(function(options){var me=this;me._domain={https:"https://passport.baidu.com",http:"http://passport.baidu.com",auto:(window.location?((window.location.protocol.toLowerCase()=="https:")?"https://passport.baidu.com":"http://passport.baidu.com"):((document.location.protocol.toLowerCase()=="https:")?"https://passport.baidu.com":"http://passport.baidu.com"))};me.config={isPhone:false,memberPass:true,isQuickUser:0,safeFlag:0,product:"",idc:"",charset:"",loginMerge:false,staticPage:"",hasRegUrl:false,u:"",lang:"zh-CN",autosuggest:false,hasPlaceholder:false,registerLink:"",authsiteLogin:"",authsiteCfgLogin:"",qrcode:false,sms:0,uniqueId:false,autoFocus:true,subpro:"",setWebToClient:true};baidu.extend(me.config,options);me.config.product=me.config.product||"isnull";this.module="login";me.constant={CHECKVERIFYCODE:true,CONTAINER_CLASS:"tang-pass-login",LABEL_FOCUS_CLASS:"pass-text-label-focus",FOCUS_CLASS:"pass-text-input-focus",HOVER_CLASS:"pass-text-input-hover",ERROR_CLASS:"pass-text-input-error",VERIFYCODE_URL_PREFIX:me._domain.https+"/cgi-bin/genimage?",BLANK_IMG_URL:passport.apiDomain.staticDomain+"/passApi/img/small_blank_9dbbfbb1.gif",MODIFY_PWD_URL_PREFIX:me._domain.https+"/forcsdnpasschange",GET_PASSWORD_URL:me._domain.https+"/?getpassindex&tpl="+encodeURIComponent(me.config.product)+"&u="+encodeURIComponent(me.config.u),REG_URL:me.config.registerLink||me._domain.https+"/v2/?reg&tpl="+encodeURIComponent(me.config.product)+"&u="+encodeURIComponent(me.config.u),SUBMITFLAG:false};me.lang=passport.err.getCurrent().labelText.login;passport.data.setContext(baidu.extend({},me.config));this.initialized=false;this.validatorInited=false;this.bdPsWtoken="";this.innerData={normal:{},phone:{}};this.dataFiels=["userName","password"];this.initTime=new Date().getTime();this.connectURL={nuomi:"http://www.nuomi.com/pclogin/main/checkaccount"};if(me.config.defaultCss){me._loadCssFileW("/passApi/css/uni_login_merge_1f0b0868.css",function(){})}if(me.config.memberPass){me._initApi()}},{type:"magic.passport.login",superClass:magic.passport}).extend({_getIrregularField:function(field){var me=this,template={verifyCode:'<p id="'+me.$getId("verifyCodeImgWrapper")+'" class="pass-form-item pass-form-item-verifyCode" style="display:none"><label for="'+me.$getId("verifyCode")+'" id="'+me.$getId("verifyCodeLabel")+'" class="pass-label pass-label-verifyCode">'+me.lang.captcha+'</label><input id="'+me.$getId("verifyCode")+'" type="text" name="verifyCode" class="pass-text-input pass-text-input-verifyCode" maxlength="6" /><span  id="'+me.$getId("verifyCodeImgParent")+'" class="pass-verifyCodeImgParent" ><img id="'+me.$getId("verifyCodeImg")+'" class="pass-verifyCode" src="'+me.constant.BLANK_IMG_URL+'" /></span><a id="'+me.$getId("verifyCodeChange")+'" href="#" class="pass-change-verifyCode">'+me.lang.captchaChange+'</a><span id="'+me.$getId("verifyCodeError")+'" class="pass-error pass-error-verifyCode"></span><span id="'+me.$getId("verifyCodeTip")+'" class="pass-tip pass-tip-verifyCode"></span><span id="'+me.$getId("verifyCodeSuccess")+'" class="pass-success pass-success-verifyCode"></span></p>',generalError:'<p id="'+me.$getId("errorWrapper")+'" class="pass-generalErrorWrapper"><span id="'+me.$getId("error")+'" class="pass-generalError pass-generalError-error"></span></p>',rem:'<p id="'+me.$getId("memberPassWrapper")+'" class="pass-form-item pass-form-item-memberPass"><input id="'+me.$getId("memberPass")+'" type="checkbox" name="memberPass" class="pass-checkbox-input pass-checkbox-memberPass"'+(me.config.memberPass?' checked="checked"':"")+' /><label for="'+me.$getId("memberPass")+'" id="'+me.$getId("memberPassLabel")+'" class="">'+me.lang.memberPassLabel+"</label></p>",submit:'<p id="'+me.$getId("submitWrapper")+'" class="pass-form-item pass-form-item-submit"><input id="'+me.$getId("submit")+'" type="submit" value="'+me.lang.login+'" class="pass-button pass-button-submit" /><a class="pass-reglink" href="'+me.constant.REG_URL+'" target="_blank" '+(me.config.hasRegUrl?"":'style="display:none"')+">"+me.lang.register+'</a><a class="pass-fgtpwd" href="'+me.constant.GET_PASSWORD_URL+'" target="_blank">'+me.lang.fgtPwd+"</a></p>",choiceuser:'<div id="'+me.$getId("choiceuser_article")+'" class="tang-pass-login-choice choiceuser-article"><div class="choiceuser-msg"><p class="choiceuser-msg-title">äº²çˆ±çš„ç”¨æˆ·ï¼Œ</p><p  class="choiceuser-msg-text">ä¸ºäº†ç¡®ä¿æ‚¨çš„å¸å·å®‰å…¨ï¼Œè¯·å…ˆç¡®è®¤æ‚¨è¾“å…¥çš„å¸å·æ˜¯ç”¨æˆ·åè¿˜æ˜¯æ‰‹æœºå·ï¼š</p></div><div class="choiceuser-buttons"><div class="choiceuser-btn"><input class="pass-button pass-button-choiceuser-username" type="button" value="ç”¨æˆ·å" id="'+me.$getId("choiceuser_btn_username")+'"/><input class="pass-button pass-button-choiceuser-phone" type="button" value="æ‰‹æœºå·" id="'+me.$getId("choiceuser_btn_mobile")+'"/></div><div class="choiceuser-back"><a href="#" id="'+me.$getId("choiceuser_btn_back")+'">'+me.lang.backToLogin+"</a></div></div></div>",webtoclint:'<div id="'+me.$getId("pass_b2c")+'" style="display:none;"></div>'};return template[field]},_getTemplate:function(containerId){var me=this,templateStr='<form id="'+me.$getId("form")+'" class="pass-form pass-form-normal" method="POST" autocomplete="off">',hiddenFields={codeString:"",safeFlag:me.config.safeFlag,u:me.config.u,isPhone:me.config.isPhone,staticPage:me.config.staticPage,quick_user:me.config.isQuickUser,logintype:(me.config.diaPassLogin?"dialogLogin":"basicLogin"),logLoginType:(me.config.diaPassLogin?"pc_loginDialog":"pc_loginBasic"),subpro:me.config.subpro,idc:me.config.idc},loginRegularField=[{field:"userName",label:me.config.loginMerge?me.lang.userName:(me.config.isPhone?me.lang.phoneNum:me.lang.account),noError:true},{field:"password",pwd:true,label:me.lang.password,noError:true}];if(me.config.loginMerge){hiddenFields.loginMerge=true;hiddenFields.isPhone=false}templateStr+=me._getIrregularField("generalError");templateStr+=me._getHiddenField(hiddenFields);for(var i=0;i<loginRegularField.length;i++){templateStr+=me._getRegularField(loginRegularField[i])}templateStr+=me._getIrregularField("verifyCode");templateStr+=me._getIrregularField("rem");templateStr+=me._getIrregularField("submit");templateStr+="</form>";return templateStr},_collectData:function(){var me=this,dataObj=me.innerData[me.config.isPhone?"phone":"normal"],fields=me.dataFiels;for(var i=0,l=fields.length;i<l;i++){dataObj[fields[i]]=me.getElement(fields[i]).value}return dataObj},_restoreData:function(type){var me=this,dataObj=me.innerData[type?type:(me.config.isPhone?"phone":"normal")],fields=me.dataFiels;for(var i=0,l=fields.length;i<l;i++){me.getElement(fields[i]).value=dataObj[fields[i]]||""}return dataObj},_loadCssFileW:function(url,cb){window._loadedFilesW=window._loadedFilesW||{};var protocol=(window.location?window.location.protocol:document.location.protocol).toLowerCase();if(!window._loadedFilesW[url]){window._loadedFilesW[url]=true;var l=document.createElement("link");l.rel="stylesheet";l.type="text/css";l.href=(protocol=="https:")?("https://passport.baidu.com"+url):("http://passport.baidu.com"+url);document.getElementsByTagName("head")[0].appendChild(l);if(l.readyState){l.onreadystatechange=function(){if(l.readyState=="loaded"||l.readyState=="complete"){l.onreadystatechange=null;cb&&cb()}}}else{l.onload=function(){cb&&cb()}}}},_insertScriptW:function(u,cb){window._loadedFilesW=window._loadedFilesW||{};if(!window._loadedFilesW[u]){window._loadedFilesW[u]=true;var d=document,s=d.createElement("SCRIPT");s.type="text/javascript";s.charset="UTF-8";if(s.readyState){s.onreadystatechange=function(){if(s.readyState=="loaded"||s.readyState=="complete"){s.onreadystatechange=null;cb&&cb()}}}else{s.onload=function(){cb&&cb()}}s.src=u;d.getElementsByTagName("head")[0].appendChild(s)}},_authSiteW:function(){var me=this,config=me.config,targetCon=me.getPhoenixId("pass_phoenix_btn");if(config.authsitecssLoad){me._loadCssFileW("/passApi/css/authsite_889e654a.css")}me._insertScriptW(me._domain.auto+"/phoenix/account/jsapi",function(){if(!window.baidu.phoenix){return}window.baidu.phoenix.require(config.authsiteLogin,baidu.extend(config.authsiteCfgLogin||{},{tpl:config.product?config.product:"",idc:config.idc?config.idc:"",u:config.u,subpro:(config&&config.subpro)||"",target:targetCon,html:{qzone:'<a class="phoenix-btn-item" href="#">QQå¸å·</a>',tsina:'<a class="phoenix-btn-item" href="#">æ–°æµªå¾®åš</a>',renren:'<a class="phoenix-btn-item" href="#">äººäººç½‘</a>',fetion:'<a class="phoenix-btn-item" href="#">é£žä¿¡</a>',tqq:'<a class="phoenix-btn-item" href="#">è…¾è®¯å¾®åš</a>',qunar:'<a class="phoenix-btn-item" href="#">åŽ»å“ªå„¿</a>'},onAfterRender:function(){var $lists=baidu("#"+targetCon+" li");var preventDef=function(ele){ele.on("click",function(evt){evt.preventDefault()})};for(var i=0;i<$lists.length;i++){var $item=baidu(".phoenix-btn-item",$lists[i]);$item.attr({title:$item[0].innerHTML});preventDef($item)}}}))})},getVerifyCode:function(codeString){var me=this,data={fr:"login",vcodetype:me.vcodetype||""};me.getElement("verifyCode").value="";me.$hide("verifyCodeSuccess");if(me.getElement("verifyCode_clearbtn")){me.$hide("verifyCode_clearbtn")}me.getElement("verifyCodeImg").src="";if(codeString&&codeString.length){me.$show("verifyCodeImgWrapper");me.getElement("verifyCodeImg").src=me.constant.VERIFYCODE_URL_PREFIX+codeString;me.getElement("codeString").value=codeString;var returnValue=me.fireEvent("renderVerifycode",{verifyStr:codeString,verifyCodeImg:me.constant.VERIFYCODE_URL_PREFIX+codeString});if(!returnValue){return}}else{passport.data.getVerifyCodeStr(data).success(function(rsp){if(rsp.errInfo.no==0){me.$show("verifyCodeImgWrapper");me.getElement("verifyCodeImg").src=me.constant.VERIFYCODE_URL_PREFIX+rsp.data.verifyStr;me.getElement("codeString").value=rsp.data.verifyStr;var returnValue=me.fireEvent("renderVerifycode",{verifyStr:rsp.data.verifyStr,verifyCodeImg:me.constant.VERIFYCODE_URL_PREFIX+rsp.data.verifyStr});if(!returnValue){return}}})}if(me.getElement("verifyCode_placeholder")){setTimeout(function(){me.$show("verifyCode_placeholder")},200)}},_getWDom:{parent:function(dom){return dom.parentNode||dom.parentElement},next:function(dom){do{dom=dom.nextSibling}while(dom&&dom.nodeType!=1);return dom},prev:function(dom){do{dom=dom.previousSibling}while(dom&&dom.nodeType!=1);return dom}},clearVerifyCode:function(){var me=this;me.$hide("verifyCodeImgWrapper");me.getElement("codeString").value=""},getPhoenixId:function(field){if(this.config.uniqueId){return this.$getId(field)}else{var phoenixEles={pass_phoenix_login:"pass-phoenix-login",pass_phoenix_list_login:"pass-phoenix-list-login",pass_phoenix_btn:"pass_phoenix_btn"};return phoenixEles[field]}},getPhoenixElement:function(field){if(this.getElement(field)){return this.getElement(field)}else{return document.getElementById(this.getPhoenixId(field))}},_getTemplateOther:function(){var html=[],me=this;var length=0;if(me.config.authsiteLogin){length=me.config.authsiteLogin.length}if(me.config.qrcode&&me.config.qrcode!==2){length++}if(me.config.sms){length++}html.push('<div id="'+me.getPhoenixId("pass_phoenix_login")+'" class="tang-pass-login-phoenix"><div class="pass-phoenix-title">å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ç™»å½•<span class="pass-phoenix-note"></span></div><div id="'+me.getPhoenixId("pass_phoenix_list_login")+'" class="pass-phoenix-list clearfix'+((me.config.diaPassLogin&&me.config.qrcode==2)?" pass-phoenix-list-second":"")+'">'+(me.config.phoenixLimit&&length>me.config.phoenixLimit?'<em class="pass-phoenix-show"></em>':"")+((me.config.sms||(!me.config.diaPassLogin&&me.config.qrcode))?'<a class="pass-normal-btn" title="æ™®é€šç™»å½•" style="display:none" data-type="normal">æ™®é€šç™»å½•</a>':"")+(me.config.authsiteLogin?'<div class="pass-phoenix-btn clearfix" id="'+me.getPhoenixId("pass_phoenix_btn")+'"></div>':"")+(me.config.sms?'<a class="pass-sms-btn" title="çŸ­ä¿¡ç™»å½•" data-type="sms">çŸ­ä¿¡ç™»å½•</a>':"")+(((me.config.diaPassLogin&&me.config.qrcode==1)||(!me.config.diaPassLogin&&me.config.qrcode))?'<a class="pass-qrcode-btn" title="äºŒç»´ç ç™»å½•" data-type="qrcode">äºŒç»´ç ç™»å½•</a>':"")+'</div><div class="clear"></div></div>');return html.join("")},_getTemplateQrcode:function(){var me=this,qrcodeHtml=[],appHref=(me.config.qrcodeCfg&&me.config.qrcodeCfg.appHref)||me.lang.appHref,appName=(me.config.qrcodeCfg&&me.config.qrcodeCfg.appName)||me.lang.appName;qrcodeHtml.push('<div id="'+me.$getId("qrcode")+'" class="clearfix tang-pass-qrcode tang-pass-login" style="display:none;">');qrcodeHtml.push('<div class="tang-pass-qrcode-content" id="'+me.$getId("qrcodeContent")+'">');qrcodeHtml.push('<div class="tang-pass-qrcode-init">');qrcodeHtml.push('<p class="tang-pass-qrcode-title">'+me.lang.qrcodeTitle+"</p>");qrcodeHtml.push('<div class="tang-pass-qrcode-imgWrapper"><img class="tang-pass-qrcode-img" src="'+me._domain.auto+'/passApi/img/loading_ed5e4a40.gif"/></div>');qrcodeHtml.push('<p class="tang-pass-qrcode-info">'+me.lang.qrcodeMsg.replace("#{appHref}",appHref).replace("#{appName}",appName)+"</p>");qrcodeHtml.push("</div>");qrcodeHtml.push("</div>");qrcodeHtml.push((me.config.diaPassLogin&&me.config.qrcode==2)?"":'<a id="'+me.$getId("qrcode_btn_back")+'" class="pass-qrcode-link pass-qrcode-link-back">'+me.lang.backToLogin+"</a>");qrcodeHtml.push("</div>");return qrcodeHtml.join("")},_setEventQrcode:function(){var me=this;baidu(me.getElement("qrcode_btn_back")).on("click",function(){me._changeLoginType("normal")})},_setChannel:function(){var me=this;passport.spareWData=passport.spareWData||{};passport.data.jsonp("/v2/api/getqrcode?lp=pc").success(function(args){passport.spareWData.channelimg=(window.location?window.location.protocol:document.location.protocol)+"//"+args.data.imgurl;passport.spareWData.sign=args.data.sign;me._createChannel();var img=baidu(".tang-pass-qrcode-img");for(var i=0,len=img.length;i<len;i++){img.get(i).src=passport.spareWData.channelimg}})},_createChannel:function(){var me=this,sign,container=me.getElement("qrcodeContent"),qrcodeInit=baidu(".tang-pass-qrcode-init",container).get(0),scanSuccessWrapper=baidu(".pass-qrcode-scanSuccessWrapper",container).get(0),qrcodeImg=baidu(".tang-pass-qrcode-img",qrcodeInit).get(0);passport.spareWData=passport.spareWData||{};sign=passport.spareWData.sign;passport.data.jsonp("/channel/unicast?channel_id="+passport.spareWData.sign).success(function(d){if(d.data.channel_v){try{d.data.channel_v=eval("("+d.data.channel_v+")")}catch(e){d.data.channel_v={}}}else{d.data.channel_v={}}if(d.data.errno+""==="0"&&d.data.channel_v.status+""==="0"){clearInterval(passport.spareWData.timer);passport.data.jsonp("/v2/api/bdusslogin?bduss="+d.data.channel_v.v+"&u="+me.config.u).success(function(args){var returnValue=me.fireEvent("loginSuccess",{rsp:args})})}else{if(d.data.errno+""==="0"&&d.data.channel_v.status=="1"){qrcodeInit.style.display="none";if(scanSuccessWrapper){scanSuccessWrapper.style.display=""}else{var scanHtml=baidu('<div class="pass-qrcode-scanSuccessWrapper"><div class="pass-qrcode-scanSuccess">æ‰«ææˆåŠŸï¼</div><p>è¯·æŒ‰æ‰‹æœºçš„æç¤ºæ“ä½œ</p></div>');container.appendChild(scanHtml.get(0))}}else{if(d.data.errno+""==="0"&&d.data.channel_v.status=="2"){clearInterval(passport.spareWData.timer);if(qrcodeImg){qrcodeImg.src=me._domain.auto+"/passApi/img/loading_ed5e4a40.gif"}me._setChannel();passport.spareWData.timer=setInterval(function(){me._setChannel()},5*60*1000);qrcodeInit.style.display="";if(scanSuccessWrapper){scanSuccessWrapper.style.display="none"}}}if(sign===passport.spareWData.sign){me._createChannel()}}})},_actionQrcode:function(){var me=this,container=this.getElement(),parent=me._getWDom.parent(container),parents=me._getWDom.parent(parent),qrcodeInit=baidu(".tang-pass-qrcode-init",parents).get(0),scanSuccessWrapper=baidu(".pass-qrcode-scanSuccessWrapper",parents).get(0);passport.spareWData=passport.spareWData||{};if(!passport.spareWData.channelimg){me._setChannel();passport.spareWData.timer=setInterval(function(){me._setChannel()},5*60*1000)}qrcodeInit.style.display="";if(scanSuccessWrapper){scanSuccessWrapper.style.display="none"}},_showQrcode:function(){var me=this,container=this.getElement(),parent=me._getWDom.parent(container),parents=me._getWDom.parent(parent),btn=baidu(".pass-qrcode-btn",parents).get(0);if(me._getWDom.prev(container)){me.$hide(me._getWDom.prev(container))}me.$hide("choiceuser_article").$hide(container).$show(baidu(".tang-pass-qrcode",parent).get(0));if(me._getWDom.next(btn)){me.$hide(btn)}else{me.$hide(me._getWDom.parent(me._getWDom.parent(btn)))}},_getTemplateSms:function(){var me=this,isShow=(me.config.sms==2||me.config.sms==3)?"":"none",templateStr='<div id="'+me.$getId("sms")+'" class="tang-pass-login tang-pass-sms" style="display:'+isShow+'">',hiddenFields={u:me.config.u,staticPage:me.config.staticPage,tpl:me.config.product?me.config.product:"",idc:me.config.idc?me.config.idc:"",isdpass:"1",switchuname:"",subpro:me.config.subpro};templateStr+='<p class="tang-pass-sms-title">\u77ed\u4fe1\u767b\u5f55</p>';templateStr+='<p class="tang-pass-sms-tip">'+(me.config.smsText||"\u9A8C\u8BC1\u5373\u767B\u5F55\uFF0C\u6CA1\u6709\u767E\u5EA6\u5E10\u53F7\u4E5F\u53EF\u4EE5\u4F7F\u7528")+"</p>";templateStr+='<form id="'+me.$getId("smsForm")+'" method="POST">';templateStr+=me._getHiddenField(hiddenFields,"smsHiddenFields");templateStr+='<p id="'+me.$getId("smsErrorWrapper")+'" class="pass-generalErrorWrapper"><span id="'+me.$getId("smsError")+'" class="pass-generalError"></span></p>';templateStr+='<p id="'+me.$getId("smsPhoneWrapper")+'" class="pass-form-item pass-form-item-smsPhone"><label for="'+me.$getId("smsPhone")+'" id="'+me.$getId("smsPhoneLabel")+'" class="pass-label pass-label-smsPhone">'+me.lang.smsPhone+'</label><input id="'+me.$getId("smsPhone")+'" type="text" name="username" class="pass-text-input pass-text-input-smsPhone" /><span id="'+me.$getId("smsPhoneTip")+'" class="pass-item-tip pass-item-tip-smsPhone" style="display:none"><span id="'+me.$getId("smsPhoneTipText")+'"></span></span></p>';templateStr+='<p id="'+me.$getId("smsVerifyCodeWrapper")+'" class="pass-form-item pass-form-item-smsVerifyCode"><label for="'+me.$getId("smsVerifyCode")+'" id="'+me.$getId("smsVerifyCodeLabel")+'" class="pass-label pass-label-smsVerifyCode">'+me.lang.smsVerifyCode+'</label><input id="'+me.$getId("smsVerifyCode")+'" type="text" name="password" class="pass-text-input pass-text-input-smsVerifyCode" /><button id="'+me.$getId("smsTimer")+'" class="pass-item-timer">\u53D1\u9001'+me.lang.smsVerifyCode+'</button><span id="'+me.$getId("smsVerifyCodeTip")+'" class="pass-item-tip pass-item-tip-smsVerifyCode" style="display:none"><span id="'+me.$getId("smsVerifyCodeTipText")+'"></span></span></p>';templateStr+='<p id="'+me.$getId("smsSubmitWrapper")+'" class="pass-form-item pass-form-item-submit"><input id="'+me.$getId("smsSubmit")+'" type="submit" value="\u767B\u5F55" class="pass-button pass-button-submit" />'+(me.config.sms==3?"":('<a id="'+me.$getId("sms_btn_back")+'" class="pass-sms-link pass-sms-link-back">'+me.lang.backToLogin+"</a>"))+"</p>";templateStr+="</form>";templateStr+="</div>";return templateStr},_setEventSms:function(){var me=this,container=this.getElement(),parent=me._getWDom.parent(container),parents=me._getWDom.parent(parent),smsLogin=baidu("#"+me.$getId("sms"),parents).get(0),input=baidu(".pass-text-input",smsLogin);baidu(".pass-text-input",smsLogin).on("mouseover",function(e){var returnValue=me.fireEvent("fieldMouseover",{ele:baidu(this)});if(!returnValue){return}baidu(this).addClass(me.constant.HOVER_CLASS)});baidu(".pass-text-input",smsLogin).on("mouseout",function(e){var returnValue=me.fireEvent("fieldMouseout",{ele:baidu(this)});if(!returnValue){return}baidu(this).removeClass(me.constant.HOVER_CLASS)});baidu(".pass-text-input",smsLogin).on("keydown",function(e){if(e.keyCode==13){if(e&&e.preventDefault){e.preventDefault()}me._submitSmsForm(e)}});baidu(me.getElement("smsPhone")).on("focus",function(e){if(!me.initialized){me._initApi()}var returnValue=me.fireEvent("fieldFocus",{ele:baidu(this)});if(!returnValue){return}baidu(this).addClass(me.constant.FOCUS_CLASS);baidu(me.getElement("smsPhoneLabel")).addClass(me.constant.LABEL_FOCUS_CLASS);baidu(this).removeClass(me.constant.ERROR_CLASS)});baidu(me.getElement("smsVerifyCode")).on("focus",function(e){if(!me.initialized){me._initApi()}var returnValue=me.fireEvent("fieldFocus",{ele:baidu(this)});if(!returnValue){return}baidu(this).addClass(me.constant.FOCUS_CLASS);baidu(me.getElement("smsVerifyCodeLabel")).addClass(me.constant.LABEL_FOCUS_CLASS);baidu(this).removeClass(me.constant.ERROR_CLASS)});baidu(".pass-text-input",smsLogin).on("blur",function(e){if(this.value){var returnValue=me.fireEvent("fieldBlur",{ele:baidu(this)});if(!returnValue){return}this.name=="username"?me._validatorPhoneFn(this):me._validatorSmsFn(this)}baidu(this).removeClass(me.constant.FOCUS_CLASS);baidu(me.getElement("smsPhoneLabel")).removeClass(me.constant.LABEL_FOCUS_CLASS)});baidu("#"+me.$getId("smsTimer"),smsLogin).on("click",function(evt){evt.preventDefault();if(me.bdPsWtoken){me._sendVcode(me)}else{me._getToken(me._sendVcode)}});baidu("#"+me.$getId("smsSubmit"),smsLogin).on("click",function(evt){if(evt&&evt.preventDefault){evt.preventDefault()}me._submitSmsForm(evt)});if(me.config.sms==2||me.config.sms==3){if(/msie 6/i.test(navigator.userAgent)||/msie 7/i.test(navigator.userAgent)){setTimeout(function(){me._changeLoginType("sms")},0)}else{me._changeLoginType("sms")}}baidu(me.getElement("sms_btn_back")).on("click",function(){me._changeLoginType("normal")})},_setSmsGeneralError:function(msg){this.getElement("smsError").innerHTML=msg},_sendVcode:function(){var me=this;var phone=document.getElementById(me.$getId("smsPhone")),disTime=60,timer,smsLogin=baidu("#"+me.$getId("sms")).get(0);if(!me._validatorPhoneFn(phone)){return}baidu("#"+me.$getId("smsTimer"),smsLogin).off("click");baidu("#"+me.$getId("smsTimer"),smsLogin).on("click",function(evt){evt.preventDefault()});baidu("#"+me.$getId("smsTimer"),smsLogin).removeClass("pass-item-timer");baidu("#"+me.$getId("smsTimer"),smsLogin).addClass("pass-item-time-timing");passport.data.jsonp(me._domain.auto+"/v2/api/senddpass?username="+phone.value+"&bdstoken="+me.bdPsWtoken+"&tpl="+(me.config.product?me.config.product:"")).success(function(args){if(args.data.errno!=0){me._setSmsGeneralError(args.data.msg);baidu("#"+me.$getId("smsTimer"),smsLogin).addClass("pass-item-timer");baidu("#"+me.$getId("smsTimer"),smsLogin).removeClass("pass-item-time-timing");document.getElementById(me.$getId("smsTimer")).innerHTML="\u91CD\u65B0\u53D1\u9001";baidu("#"+me.$getId("smsTimer"),smsLogin).on("click",function(evt){evt.preventDefault();me._sendVcode(me)})}else{timer=setInterval(function(){if((--disTime)==0){clearInterval(timer);baidu("#"+me.$getId("smsTimer"),smsLogin).removeClass("pass-item-time-timing");baidu("#"+me.$getId("smsTimer"),smsLogin).addClass("pass-item-timer");document.getElementById(me.$getId("smsTimer")).innerHTML="\u91CD\u65B0\u53D1\u9001";baidu("#"+me.$getId("smsTimer"),smsLogin).on("click",function(evt){evt.preventDefault();me._sendVcode(me)});disTime=60}else{document.getElementById(me.$getId("smsTimer")).innerHTML="\u91CD\u65B0\u53D1\u9001("+disTime+")"}},1000)}})},_validatorPhoneFn:function(field){var me=this;if(field.value==""){me._setSmsGeneralError("\u8BF7\u586B\u5199\u624B\u673A\u53F7");baidu(field).addClass(me.constant.ERROR_CLASS);return false}else{if(!new RegExp(/^1[34578]\d{9}$/).test(field.value)){me._setSmsGeneralError("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E");baidu(field).addClass(me.constant.ERROR_CLASS);return false}}me._setSmsGeneralError("");return true},_validatorSmsFn:function(field){var me=this;if(field.value==""){me._setSmsGeneralError("\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801");baidu(field).addClass(me.constant.ERROR_CLASS);return false}me._setSmsGeneralError("");return true},_submitSmsForm:function(){var me=this,phone=document.getElementById(me.$getId("smsPhone")),vcode=document.getElementById(me.$getId("smsVerifyCode"));if(!me._validatorPhoneFn(phone)){return}if(!me._validatorSmsFn(vcode)){return}var returnValue=me.fireEvent("beforeSubmit");if(!returnValue){return}var data=baidu.form.json(me.getElement("smsForm"));function smsLoginFn(){passport.data.login(data).success(function(rsp){if(rsp.errInfo.no==0){var returnValue=me.fireEvent("loginSuccess",{rsp:rsp});if(!returnValue){return}window.location.href=rsp.data.u}else{var returnValue=me.fireEvent("loginError",{rsp:rsp});if(!returnValue){return}if(rsp.errInfo.no==4){me._setSmsGeneralError(me.lang.captchaErr)}else{me._setSmsGeneralError(rsp.errInfo.msg)}if(rsp.errInfo.no==3||rsp.errInfo.no==4){me._clearInput("smsVerifyCode")}}})}me.loginConnect({username:data.username,password:data.password,isdpass:1,sms:1},{fail:function(msg){me._setSmsGeneralError(msg)}},smsLoginFn)},_setEventChoiceUser:function(){var me=this;var back=function(){baidu(me.getElement()).removeClass("tang-pass-login-hide");me.$show(me.getElement()).$hide("choiceuser_article")};var sub=function(e){baidu(me.getElement()).removeClass("tang-pass-login-hide");me.$show(me.getElement()).$hide("choiceuser_article");me.submit()};baidu(me.getElement("choiceuser_btn_username")).on("click",function(e){me.getElement("loginMerge").value="false";sub(e)});baidu(me.getElement("choiceuser_btn_mobile")).on("click",function(e){me.getElement("isPhone").value="true";me.getElement("loginMerge").value="false";sub(e)});baidu(me.getElement("choiceuser_btn_back")).on("click",function(evt){evt.preventDefault();back()})},_getToken:function(fn){var me=this;passport.spareWData=passport.spareWData||{};passport.data.getApiInfo({apiType:"login"}).success(function(rsp){me.bdPsWtoken=rsp.data.token;fn&&fn(me)})},_getRSA:function(callback){var me=this;passport.data.getRsaKey().success(function(cert){if(!cert.errInfo.no&&cert.errInfo.no!=0){cert=cert.data}var RSA=new passport.lib.RSA();RSA.setKey(cert.pubkey);callback&&callback({RSA:RSA,rsakey:cert.key})})},_changeLoginType:function(type){var me=this,container=this.getElement(),normalHeight=0,parent=me._getWDom.parent(container),parents=me._getWDom.parent(parent),qrcode=me.getElement("qrcode"),sms=me.getElement("sms"),phoenixDom=baidu(".tang-pass-login-phoenix",parents).get(0);var loginTypeList={normal:{$btn:baidu(".pass-normal-btn",me.getPhoenixElement("pass_phoenix_list_login")),$ele:baidu(me.getElement("form")).parent()},sms:{$btn:baidu(".pass-sms-btn",me.getPhoenixElement("pass_phoenix_list_login")),$ele:baidu(me.getElement("sms"))},qrcode:{$btn:baidu(".pass-qrcode-btn",me.getPhoenixElement("pass_phoenix_list_login")),$ele:baidu(me.getElement("qrcode"))}},choiceuser=me.getElement("choiceuser_article");type=type||"normal";if(me.config.diaPassLogin&&(!me.currentLoginType||me.currentLoginType=="normal")){normalHeight=Math.max(parent.offsetHeight,340);if(sms){sms.style.height=normalHeight+"px"}if(qrcode){qrcode.style.height=normalHeight+"px"}}if(choiceuser){me.$hide("choiceuser_article")}var returnValue=me.fireEvent("changeLoginType",{loginType:type,currentLoginType:me.currentLoginType||""});if(!returnValue){return}for(var item in loginTypeList){if(loginTypeList[item].$ele&&loginTypeList[item].$ele.length>0){if(item==type){me.$hide(loginTypeList[item].$btn[0]).$show(loginTypeList[item].$ele[0])}else{me.$show(loginTypeList[item].$btn[0]).$hide(loginTypeList[item].$ele[0])}}}if(me.config.diaPassLogin&&phoenixDom){if(type=="normal"){phoenixDom.style.display=""}else{phoenixDom.style.display="none"}}if(type=="qrcode"){me._actionQrcode()}me.currentLoginType=type},_doFocus:function(ele){var me=this;if(!me.config.autoFocus){return}if((typeof ele).toLowerCase()=="string"&&me.getElement(ele)){me.getElement(ele).focus()}else{ele.focus()}},_clearInput:function(type){var me=this,ele=me.getElement(type),eleHolder=me.getElement(type+"_placeholder"),eleClear=me.getElement(type+"_clearbtn");if(ele){if(eleHolder){me.$show(eleHolder)}if(eleClear){me.$hide(eleHolder)}ele.value="";me._doFocus(ele)}},_insertAfterW:function(newNode,oldNode){var me=this;var parent=me._getWDom.parent(oldNode);if(parent.lastChild==oldNode){parent.appendChild(newNode)}else{parent.insertBefore(newNode,me._getWDom.next(oldNode))}},_checkCapsLock:function(){var me=this,password=baidu(me.getElement("password"));password.on("keypress",function(event){var e=event||window.event;var keyCode=e.keyCode||e.which;var isShift=e.shiftKey||(keyCode==16)||false;var caps=document.getElementById(me.$getId("caps"));if(((keyCode>=65&&keyCode<=90)&&!isShift)||((keyCode>=97&&keyCode<=122)&&isShift)){if(!caps){var span=document.createElement("span");span.id=me.$getId("caps");span.innerHTML="å¤§å°å†™é”å®šå·²æ‰“å¼€";var passw=document.getElementById(me.$getId("passwordWrapper"));if(passw.style.position=="static"){passw.style.position="relative"}if(passw.style.zIndex){passw.style.zIndex=passw.style.zIndex+1}else{passw.style.zIndex=20}if(passport&&passport.apiDomain&&passport.apiDomain.staticDomain){var staicPath=passport.apiDomain.staticDomain}else{var staicPath=me._domain.auto}span.style.cssText="position:absolute;left:60px;clear:both;top:25px;width:103px;height:37px;font-size:12px;line-height:45px;z-index:20;text-align:center;background:url('"+staicPath+"/passApi/img/caps_1b139230.gif') no-repeat 0 0;";passw.appendChild(span)}else{me.$show(caps)}}else{if(caps){me.$hide(caps)}}});password.on("blur",function(event){var caps=document.getElementById(me.$getId("caps"));if(caps){me.$hide(caps)}})},changeSuggestView:function(opt){var me=this;if(me.suggestionDom&&opt.list){if(opt.list=="hide"){me.$hide(me.suggestionDom)}else{if(opt.list=="show"){me.$show(me.suggestionDom)}}}if(me.selectBtn&&opt.btn){if(opt.btn=="close"){baidu(me.selectBtn).removeClass("open");baidu(me.getElement("userName")).addClass("open");me.$show(me.selectBtn)}else{if(opt.btn=="open"){baidu(me.selectBtn).addClass("open");baidu(me.getElement("userName")).addClass("open");me.$show(me.selectBtn)}else{if(opt.btn=="hide"){me.$hide(me.selectBtn);baidu(me.getElement("userName")).removeClass("open")}else{if(opt.btn=="show"){me.$show(me.selectBtn);baidu(me.getElement("userName")).addClass("open")}}}}me.$hide(me.selectBtn)}},_suggestion:function(maxlength){var me=this,recordArr=[],$userNameEle=baidu("#"+me.$getId("userName"),me.getElement()),suggestionArr=["qq.com","163.com","126.com","sohu.com","sina.com","gmail.com","21cn.com","hotmail.com","vip.qq.com","yeah.net"],reg=/^([a-zA-Z0-9_.\-+]+)([@]?[a-zA-Z0-9_\-*]*[.]?[a-zA-Z*]*[.]?[a-zA-Z*]*)$/;var _appendSuggestTemp=function(text,opt){var current=text;if(text.substr(0,text.indexOf("@")-1).length>opt.maxlength){current=text.substr(0,opt.maxlength-4)+"â€¦"+text.substr(text.indexOf("@"))}return baidu('<li class="pass-item-suggsetion" data-select="'+text+'" data-type="'+(opt.ifdelete?"history":"normal")+'">'+current+(opt.ifdelete?'<a data-delete="'+text+'" title="åˆ é™¤è¯¥è®°å½•"></a>':"")+"</li>").get(0)};var _rendSelectList=function(u,self){if(!me.suggestionDom){me.suggestionDom=document.createElement("ul");me.suggestionDom.id=me.$getId("suggestionWrapper");baidu(me.getElement("userNameWrapper")).append(me.suggestionDom);baidu(me.suggestionDom).addClass("pass-suggestion-list");baidu(me.suggestionDom).on("click",function(evt){var $target=baidu(evt.target),deleteIn=$target.attr("data-delete"),currentIn=$target.attr("data-select");if(deleteIn){evt.preventDefault();passport.data.getLoginHistory({token:me.bdPsWtoken,item:deleteIn});me.suggestionDom.data_delete=true;baidu($target.parent()).hide();baidu.array(recordArr).remove(deleteIn);if(recordArr.length<1){me.changeSuggestView({list:"hide",btn:"hide"})}me._doFocus("userName");setTimeout(function(){me.suggestionDom.data_delete=false},200)}else{if($target.attr("data-type")=="history"){self.value=currentIn}else{me.suggestionDom.data_delete=false;self.value=currentIn||self.value}if(me.getElement("userName_placeholder")){me.$hide("userName_placeholder")}me.changeSuggestView({list:"hide",btn:"close"});me._doFocus(self);setTimeout(function(){me.setGeneralError("");baidu(self).removeClass("pass-text-input-error");me._doFocus("password")},100)}})}me.suggestionDom.innerHTML="";me.$show(me.suggestionDom);me.suggestionDom.appendChild(u);baidu(".pass-item-suggsetion",me.suggestionDom).on("mouseover",function(){baidu(".pass-item-suggsetion_hover",me.suggestionDom).removeClass("pass-item-suggsetion_hover");baidu(this).addClass("pass-item-suggsetion_hover")});baidu(".pass-item-suggsetion",me.suggestionDom).on("mouseout",function(){baidu(this).removeClass("pass-item-suggsetion_hover")})};var rendLoginHistory=(function(){if(me.config.loginMerge){recordArr=me.loginrecord.displayname||[]}else{recordArr=me.config.isPhone?me.loginrecord.phone:me.loginrecord.email}if(recordArr.length>0){var content=document.createDocumentFragment();for(var i=0,len=recordArr.length;i<len;i++){content.appendChild(_appendSuggestTemp(recordArr[i],{maxlength:maxlength,ifdelete:true}))}_rendSelectList(content,me.getElement("userName"));me.selectBtn=baidu('<span class="pass-item-selectbtn pass-item-selectbtn-userName" ></span>').get(0);me.getElement("userNameWrapper").appendChild(me.selectBtn);baidu(me.selectBtn).on("click",function(evt){setTimeout(function(){if(me.suggestionDom.style.display!="none"){me.changeSuggestView({list:"hide",btn:"close"})}else{me.changeSuggestView({list:"show",btn:"open"})}},200)});me.changeSuggestView({list:"hide",btn:"show"})}})();$userNameEle.on("keyup",function(evt){if(me.disUnameLogin==1){}else{var u=document.createDocumentFragment(),result,self=this,k=0;if(recordArr.length>0){for(var i=0,len=recordArr.length;i<len;i++){if(recordArr[i].indexOf(this.value)==0){u.appendChild(_appendSuggestTemp(recordArr[i],{maxlength:maxlength,ifdelete:true}));++k}}}if(recordArr.length<1||k<1){result=reg.exec(this.value);if(result&&result[2]){for(var i=0,len=suggestionArr.length;i<len;i++){if(("@"+suggestionArr[i]).indexOf(result[2])==0){var current=result[1];u.appendChild(_appendSuggestTemp(current+"@"+suggestionArr[i],{maxlength:maxlength}));++k}}}}if(me.suggestionDom&&(evt.keyCode!==38&&evt.keyCode!==40)){me.$hide(me.suggestionDom)}if(recordArr.length>1||(recordArr.length<2&&me.config.isPhone==false)){if(k>0){if((evt.keyCode!==38&&evt.keyCode!==40)){_rendSelectList(u,self)}if((evt.keyCode==38||evt.keyCode==40)&&(me.suggestionDom.style.display!="none")){var child=me.suggestionDom.childNodes,n=child.length,p=-1;for(var j=0;j<n;j++){if(child[j].className.indexOf("pass-item-suggsetion_hover")>-1){p=j}}if(evt.keyCode==38){q=p===-1?(n-1):(p===0?(n-1):p-1)}if(evt.keyCode==40){q=p===-1?0:(p===n-1?0:p+1)}baidu(".pass-item-suggsetion_hover",me.suggestionDom).removeClass("pass-item-suggsetion_hover");baidu(child[q],me.suggestionDom).addClass("pass-item-suggsetion_hover");var currentIn=baidu(child[q]).attr("data-select");if(baidu(child[q]).attr("data-type")=="history"){self.value=currentIn}else{self.value=self.value.substr(0,self.value.indexOf("@"))+currentIn.substr(currentIn.indexOf("@"))}if(me.getElement("userName_placeholder")){me.$hide("userName_placeholder")}}}}}});$userNameEle.on("keydown",function(evt){if((evt.keyCode==13||evt.keyCode==9)&&(me.suggestionDom&&me.suggestionDom.style.display!="none")){me.changeSuggestView({list:"hide",btn:"close"});me._doFocus("password");evt.preventDefault();evt.stopPropagation()}});$userNameEle.on("blur",function(){if(me.config.isPhone==false){setTimeout(function(){if(me.suggestionDom&&!me.suggestionDom.data_delete){me.changeSuggestView({list:"hide",btn:"close"})}},150)}});$userNameEle.on("focus",function(evt){if(me.config.isPhone==false){me.changeSuggestView({list:"show",btn:"open"})}})},_operateTips:function(){var me=this,$usernameEle=baidu("#"+me.$getId("userName"),me.getElement());if(me.config.isPhone==false){if(!me.operateTipsDom){me.operateTipsDom=document.createElement("div");me.operateTipsDom.id=me.$getId("operateTipsWrapper");$usernameEle.parent().parent().append(me.operateTipsDom);baidu(me.operateTipsDom).addClass("pass-operate-tips");var temp='<span class="pass-operate-content">\u90ae\u7bb1\u767b\u5f55\u66f4\u5b89\u5168\u54e6</span><span class="pass-operate-down"><em class="pass-operate-down-a">â—†</em><em class="pass-operate-down-b">â—†</em></span>';me.operateTipsDom.innerHTML=temp}else{me.$show(me.operateTipsDom)}}$usernameEle.on("focus",function(){if((me.config.isPhone==false)&&me.operateTipsDom){me.$show(me.operateTipsDom)}});$usernameEle.on("blur",function(){if(me.operateTipsDom){me.$hide(me.operateTipsDom)}})},_rendPhoenixbtn:function(){var me=this,$phoenixEle=baidu(me.getPhoenixElement("pass_phoenix_list_login")),phoenixLimitEle=baidu(".pass-phoenix-show",me.getPhoenixElement("pass_phoenix_list_login"));if(phoenixLimitEle){phoenixLimitEle.on("click",function(){if($phoenixEle.hasClass("pass-phoenix-list-hover")){$phoenixEle.removeClass("pass-phoenix-list-hover")}else{$phoenixEle.addClass("pass-phoenix-list-hover")}})}$phoenixEle.on("click",function(evt){var $target=baidu(evt.target),changeTo=$target.attr("data-type");if(changeTo){me._changeLoginType(changeTo)}})},render:function(id){var me=this;if(!me.getElement()){me.$mappingDom("",id||document.body)}var target=baidu(me.getElement());target.addClass(me.constant.CONTAINER_CLASS);var template=me._getTemplate();target.get(0).appendChild(baidu(template).get(0));if(me.config.setWebToClient){var webToClintTemplate=me._getIrregularField("webtoclint");me._insertAfterW(baidu(webToClintTemplate).get(0),me.getElement())}if(me.config.authsiteLogin||(!me.config.diaPassLogin&&me.config.qrcode)||(me.config.diaPassLogin&&me.config.qrcode==1)||me.config.sms){if(me.config.sms!=3){var otherTemplate=me._getTemplateOther();me._insertAfterW(baidu(otherTemplate).get(0),target.get(0));me._rendPhoenixbtn()}}if(me.config.authsiteLogin){me._authSiteW()}if(me.config.qrcode){var qrcodeTemplate=me._getTemplateQrcode();me._insertAfterW(baidu(qrcodeTemplate).get(0),target.get(0));me._setEventQrcode()}if(me.config.sms){var qrcodeTemplate=me._getTemplateSms();me._insertAfterW(baidu(qrcodeTemplate).get(0),target.get(0));me._setEventSms()}if(me.config.loginMerge){setTimeout(function(){me.getElement("loginMerge").value="true"},200)}if(me.config.hasPlaceholder){var rendList=[{label:"userName",placeholder:"userName"},{label:"password",placeholder:"password"},{label:"verifyCode",placeholder:"verifyCode",clearbtn:0}];if(me.config.sms){rendList.push({label:"smsPhone",placeholder:(me.config&&me.config.diaPassLogin)?"smsPhoneMsg":"smsPhone"});rendList.push({label:"smsVerifyCode",placeholder:"smsVerifyCode"})}me._getPlaceholder(rendList)}var returnValue=me.fireEvent("render");if(!returnValue){return}me._setValidator();me._setEvent();me._checkCapsLock()},_initApi:function(callbacks){var me=this;me.initialized=true;me.initTime=new Date().getTime();passport.data.getApiInfo({apiType:"login",loginType:(me.config&&me.config.diaPassLogin)?"dialogLogin":"basicLogin"}).success(function(rsp){var returnValue=me.fireEvent("getApiInfo",{rsp:rsp});if(!returnValue){return}if(rsp.data.disable==1){me.setGeneralError(me.lang.sysUpdate)}if(rsp.errInfo.no==0){var token=rsp.data.token;me.bdPsWtoken=rsp.data.token;me.loginrecord={};if(me.config.loginMerge&&me.config.autosuggest){passport.data.getLoginHistory({token:me.bdPsWtoken}).success(function(resData){me.loginrecord=resData.data;me._suggestion(me.config.diaPassLogin?20:12);if(me.config.memberPass&&me.loginrecord.displayname.length>0){me._doFocus("password");if(me.getElement("userName_placeholder")){me.$hide("userName_placeholder")}if(!me.getElement("userName").value||me.getElement("userName").value==""){me.getElement("userName").value=me.loginrecord.displayname[0]}me.$show("userName_clearbtn").$hide("userName_placeholder")}})}else{if(!me.config.isPhone&&me.config.memberPass&&!me.constant.SUBMITFLAG){me.getElement("userName").value=rsp.data.rememberedUserName}}me.disUnameLogin=0;me.ifShowWarning=rsp.data.ifShowWarning;if(rsp.data.spLogin&&me.config.diaPassLogin){me.spLogin=rsp.data.spLogin}passport.data.setContext({token:token});if(!navigator.cookieEnabled){me.setGeneralError(me.lang.cookieDisable)}if(!me.config.loginMerge&&me.config.memberPass&&rsp.data.rememberedUserName&&!me.config.isPhone){if(me.config.diaPassLogin&&rsp.data.usernametype==3){me.switchTo("phone")}}if(me.config.diaPassLogin&&!me.config.loginMerge){me._operateTips()}if(me.constant.SUBMITFLAG){me.getElement("submit").click()}else{callbacks&&callbacks.success(rsp)}}})},submitForm:function(){var me=this;me.constant.SUBMITFLAG=true},switchTo:function(type){var me=this,label="";if(me.config.loginMerge){return}me._collectData();setTimeout(function(){me.setGeneralError("");if(me.selectBtn&&type=="phone"){me.$hide(me.selectBtn)}else{if(me.selectBtn){me.$hide(me.selectBtn)}}},100);me.getElement("userNameLabel").innerHTML=type=="phone"?me.lang.phoneNum:me.lang.account;me.config.isPhone=type=="phone"?true:false;me.getElement("isPhone").value=me.config.isPhone;me._restoreData();me._setValidator();if(me.suggestionDom){me.$hide(me.suggestionDom)}},getCurrentType:function(){return this.config.isPhone?"phone":"normal"},_setValidator:function(){var me=this;if(!me.validatorInited){me._validator.addRule("unameMailLength",function(ele){var value=String(ele.value);if(/^[0-9a-zA-Z\.\_-]+@([0-9a-zA-Z-]+\.)+[a-z]{2,4}$/.test(value)){return value.length<=60}return true});me._validator.addMsg("unameMailLength",me.lang.unameMailLengthError);me._validator.addRule("unameInputLogin",function(ele){var value=String(ele.value);if(me.disUnameLogin===0&&me.config.diaPassLogin&&!me.config.isPhone){if(!/^[0-9a-zA-Z\.\_-]+@([0-9a-zA-Z-]+\.)+[a-z]{2,4}$/.test(value)){return false}}return true});me._validator.addMsg("unameInputLogin",me.lang.unameInputError);me._validator.addRule("checkVcodeLength",function(ele,type){var value=ele.value;if(value.length!=4||!me.constant.CHECKVERIFYCODE){me.$hide("verifyCodeSuccess");return false}return true});me._validator.addMsg("checkVcodeLength",me.lang.verifyCodeLenErr);me._validator.addRule("checkVcodeStatus",function(ele,type){if(type=="all"){if(!me.constant.CHECKVERIFYCODE){return false}}return true});me._validator.addMsg("checkVcodeStatus",me.lang.verifyCodeStaErr)}me.validatorInited=true;me.validateRules={userName:{rules:me.config.loginMerge?["required"]:(me.config.isPhone?["required","phone"]:["required","unameMailLength","unameInputLogin"]),desc:me.config.loginMerge?me.lang.userName:(me.config.isPhone?me.lang.phoneNum:me.lang.account)},password:{rules:["required"],desc:me.lang.password},verifyCode:{rules:["required","checkVcodeLength","checkVcodeStatus"],desc:me.lang.captcha}};me._validator.init(me,me.validateRules)},_validateError:function(info,opt){var me=this,ele=baidu(me.getElement(info.field));if(me.getElement("operateTipsWrapper")&&me.getElement("operateTipsWrapper").style.display!="none"){me.$hide("operateTipsWrapper")}ele.addClass(me.constant.ERROR_CLASS);me.setGeneralError(info.msg);if(me.disUnameLogin===0&&info.field=="userName"&&info.msg==me.lang.unameInputError){var img=new Image();img.onload=img.onerror=function(){img.onload=img.onerror=null;img=null};img.src=me._domain.https+"/img/v.gif?cdnversion=10341718.gif?type=login&loginType=userName"}opt&&opt.callback&&callback()},_enableUnameLoginCallback:function(ele,type){var me=this;var $usernameTemp=baidu('<input type="hidden" name="userNameLogin" value="1">'),placeholderDom=me.getElement("pass-pop-login-placeholder-normal"),container=me.getElement().parentNode,tabLiDom=baidu(".tab li",container),tabADom=baidu(".tab a",container).get(0),$ele=baidu(ele);if(!ele&&!type){type=me.isLoginWeak===1?"normal":"other";$ele=me.eleLoginWeak}if(me.disUnameLogin==0){me.disUnameLogin=1;me._validator.confStorage[me.$getId()].userName.desc="\u7528\u6237\u540D";$usernameTemp.get(0).value="1";if(placeholderDom){placeholderDom.innerHTML="\u7528\u6237\u540D"}if(tabADom){tabADom.innerHTML="\u7528\u6237\u540D\u767B\u5F55"}if(me.normalLogin){me.normalLogin.innerHTML="\u7528\u6237\u540D\u767B\u5F55";baidu(me.normalLogin).addClass("pass-normal-btn-s2");if(me.normalLogin.style.display!="none"){me._changeLoginType("normal")}}if(me.config.isPhone==true){me.switchTo("normal");tabLiDom.removeClass("tab-selected");baidu(tabLiDom.get(0)).addClass("tab-selected")}if(me.config.isPhone==false){me.getElement("userNameLabel").innerHTML="\u7528\u6237\u540D";var p=me.getElement("error");baidu(me.getElement("userName")).removeClass("pass-text-input-error");if(me.operateTipsDom){me.$show(me.operateTipsDom)}}else{if(me.operateTipsDom){me.$hide(me.operateTipsDom)}}baidu(".tang-pass-pop-login-placeholder").hide();if(!me.getElement("userName").value){me.$show("pass-pop-login-placeholder-"+(me.config.isPhone?"phone":"normal"))}me.changeSuggestView({list:"hide",btn:"hide"});if(type=="normal"){$ele.removeClass("pass-unamelogin-btn");$ele.addClass("pass-emaillogin-btn");$ele.get(0).innerHTML="\u90AE\u7BB1\u767B\u5F55"}else{if(type=="other"){$ele.get(0).innerHTML='\u5fd8\u8bb0\u7528\u6237\u540d?\u4f7f\u7528<a href="###" id="pass-user-login" tabIndex="-1" data-click="other">\u90AE\u7BB1\u767B\u5F55</a>'}}var img=new Image();img.onload=img.onerror=function(){img.onload=img.onerror=null;img=null};img.src=me._domain.https+"/img/v.gif?cdnversion=10341718.gif?type=login&loginType=normalName"}else{me.disUnameLogin=0;me._validator.confStorage[me.$getId()].userName.desc="\u90AE\u7BB1";$usernameTemp.get(0).value="0";if(placeholderDom){placeholderDom.innerHTML="\u90AE\u7BB1"}if(tabADom){tabADom.innerHTML="\u90AE\u7BB1\u767B\u5F55"}if(me.normalLogin){me.normalLogin.innerHTML="\u90AE\u7BB1\u767B\u5F55";baidu(me.normalLogin).removeClass("pass-normal-btn-s2");if(me.normalLogin.style.display!="none"){me._changeLoginType("normal")}}if(me.config.isPhone==true){me.switchTo("normal");tabLiDom.removeClass("tab-selected");baidu(tabLiDom.get(0)).addClass("tab-selected")}if(me.config.isPhone==false){me.getElement("userNameLabel").innerHTML="\u90AE\u7BB1";var p=me.getElement("error");baidu(me.getElement("userName")).removeClass("pass-text-input-error");if(me.operateTipsDom){me.$show(me.operateTipsDom)}}else{if(me.operateTipsDom){me.$hide(me.operateTipsDom)}}baidu(".tang-pass-pop-login-placeholder").hide();if(!me.getElement("userName").value){baidu(me.getElement("pass-pop-login-placeholder-"+(me.config.isPhone?"phone":"normal"))).show()}me.changeSuggestView({list:"hide"});if(me.selectBtn&&me.loginrecord&&me.loginrecord.email&&me.loginrecord.email.length>1){me.changeSuggestView({btn:"show"})}else{if(me.selectBtn){me.changeSuggestView({btn:"hide"})}}if(type=="normal"){$ele.addClass("pass-unamelogin-btn");$ele.removeClass("pass-emaillogin-btn");$ele.get(0).innerHTML="\u7528\u6237\u540D\u767B\u5F55"}else{if(type=="other"){$ele.get(0).innerHTML='\u5fd8\u8bb0\u90ae\u7bb1?\u4f7f\u7528<a href="###" id="pass-user-login" tabIndex="-1" data-click="other">\u7528\u6237\u540D\u767B\u5F55</a>'}}}},_validateSuccess:function(info,opt){var me=this,ele=baidu(me.getElement(info.field));me.clearGeneralError();ele.removeClass(me.constant.ERROR_CLASS);opt&&opt.callback&&callback()},_defaultLoginErr:function(rsp){var me=this;me.vcodetype=rsp.data.vcodetype;if(rsp.data.codeString){me.getVerifyCode(rsp.data.codeString);me._clearInput("verifyCode")}else{me.clearVerifyCode()}if(rsp.errInfo.no==400401){if(me.getElement("choiceuser_article")){me.$show("choiceuser_article")}else{var choiceTemplate=me._getIrregularField("choiceuser");me._insertAfterW(baidu(choiceTemplate).get(0),me.getElement());me._setEventChoiceUser()}baidu(me.getElement()).hide()}if(rsp.errInfo.no==257){baidu(me.getElement()).removeClass("tang-pass-login-hide");me.$show(me.getElement()).$hide("choiceuser_article")}if(rsp.errInfo.no==6||rsp.errInfo.no==257){me._clearInput("verifyCode")}if(rsp.errInfo.no==4){me._clearInput("password");if(rsp.data.resetpwd){var resetpwd="";switch(rsp.data.resetpwd){case"1":resetpwd="1"+me.lang.passwordResetIn;break;case"2":resetpwd="2"+me.lang.passwordResetIn;break;case"3":resetpwd="3"+me.lang.passwordResetIn;break;case"4":resetpwd="3"+me.lang.passwordResetOut;break}if(resetpwd.length>0){rsp.errInfo.msg=me._format(me.lang.passwordResetWarn,{resetpwd:resetpwd})}}}if(rsp.errInfo.msg&&(rsp.errInfo.msg.indexOf("#{")>=0)){if(rsp.errInfo.no==110024){var linkUrl=me._domain.https+"/v2/?regnotify&action=resend&tpl="+me.config.product+"&email="+encodeURIComponent(rsp.data.mail)+"&u="+encodeURIComponent(rsp.data.u);rsp.errInfo.msg=me._format(rsp.errInfo.msg,{gotourl:linkUrl})}else{var account=me.getElement("userName").value;rsp.errInfo.msg=me._format(rsp.errInfo.msg,{urldata:"&account="+account+"&tpl="+me.config.product+"&u="+me.config.u})}}if(rsp.errInfo.field){me.setValidateError(rsp.errInfo.field,rsp.errInfo.msg,rsp)}else{me.setGeneralError(rsp.errInfo.msg,rsp)}},_asyncValidate:{checkVerifycode:function(callbacks,type){var me=this,eleVcode=me.getElement("verifyCode"),eleCodeStr=me.getElement("codeString");passport.data.checkVerifycode({verifycode:eleVcode.value,codestring:eleCodeStr.value}).success(function(rsp){var returnValue=me.fireEvent("checkVerifycode",{rsp:rsp});if(!returnValue){return}if(rsp.errInfo.no==0){callbacks&&callbacks.success(rsp);me.$show("verifyCodeSuccess");me.constant.CHECKVERIFYCODE=true}else{if(rsp.errInfo.no==500002||rsp.errInfo.no==500018){rsp.msg=rsp.errInfo.msg;callbacks&&callbacks.error(rsp);me.$hide("verifyCodeSuccess");me.constant.CHECKVERIFYCODE=false}else{callbacks&&callbacks.success(rsp);me.$hide("verifyCodeSuccess");me.constant.CHECKVERIFYCODE=true}}})}},_format:function(source,opts){source=String(source);var data=Array.prototype.slice.call(arguments,1),toString=Object.prototype.toString;if(data.length){data=data.length==1?(opts!==null&&(/\[object Array\]|\[object Object\]/.test(toString.call(opts)))?opts:data):data;return source.replace(/#\{(.+?)\}/g,function(match,key){var replacer=data[key];if("[object Function]"==toString.call(replacer)){replacer=replacer(key)}return("undefined"==typeof replacer?"":replacer)})}return source},loginConnect:function(data,callback,normalLoginFn){var me=this,bindUrl="/v2/unite-bind",connectParams={username:data.username,sms:data.sms||""};var _buildQuery=function(query){if(typeof(query)=="object"){var builder=[];for(var p in query){var value=query[p];if(value!==undefined&&value!==null){if(builder.length){builder.push("&")}var valueString=encodeURIComponent(typeof(value)=="boolean"?(value?"1":"0"):value.toString());builder.push(encodeURIComponent(p),"=",valueString)}}return builder.join("")}if(typeof(query)=="string"){return query}return null};var _appendQuery=function(url,query){query=_buildQuery(query);if(typeof(query)=="string"){var hasQuery=(/\?/g).test(url);url+=(hasQuery?"&":"?")+_buildQuery(query)}return url};if(me.config.connect&&me.connectURL[me.config.product]&&(/^([0-9a-zA-Z\.\_-]+@([0-9a-zA-Z-]+\.)+[a-z]{2,4}|1[34578]\d{9})$/.test(data.username))){var connecturl=me.connectURL[me.config.product],url=_appendQuery(connecturl,connectParams);passport.data.jsonp(url).success(function(rsp){if(rsp.errInfo.no==0){rsp.data.connectType=true;var returnValue=me.fireEvent("connectNeedBind",{rsp:rsp});if(!returnValue){return}callback&&callback.success&&callback.success(rsp)}else{if(rsp.errInfo.no==2){callback&&callback.fail&&callback.fail(rsp.errInfo.msg||"")}else{if(rsp.errInfo.no==3){var d={username:data.username,password:data.password,isdpass:data.isdpass||"",token:encodeURIComponent(rsp.data.token||"")};passport.data.post(bindUrl,d).success(function(rsp){normalLoginFn()})}else{normalLoginFn()}}}})}else{normalLoginFn()}},submit:function(){var me=this;me.validateAll({success:function(){me._doFocus("submit");me.submitStatus=1;var returnValue=me.fireEvent("beforeSubmit");if(!returnValue){return}if(me.spLogin){var usernameTemp=baidu('<input type="hidden" name="splogin" value="'+me.spLogin+'">');me.getElement("hiddenFields").appendChild(usernameTemp.get(0));me.spLogin=null}var data=baidu.form.json(me.getElement("form"));if(me.RSA&&me.rsakey){var passwordVal=me.getElement("password").value;if(passwordVal.length<128&&!me.config.safeFlag){data.password=baidu.url.escapeSymbol(me.RSA.encrypt(passwordVal));data.rsakey=me.rsakey;data.crypttype=12}}var submitEle=me.getElement("submit"),time=15000,submitInterval;submitEle.value=me.lang.logining;submitInterval=setTimeout(function(){if(me.submitStatus===1&&!me.config.connect){me.setGeneralError(me.lang.submitTimeup)}submitEle.value=me.lang.login},time);function loginFn(){data.timeSpan=new Date().getTime()-me.initTime;passport.data.login(data).success(function(rsp){me.submitStatus=2;if(rsp.errInfo.no==0){var returnValue=me.fireEvent("loginSuccess",{rsp:rsp});if(!returnValue){return}if(window.location){window.location.href=rsp.data.u}else{document.location.href=rsp.data.u}}else{submitEle.value=me.lang.login;var returnValue=me.fireEvent("loginError",{rsp:rsp});if(!returnValue){return}me._defaultLoginErr(rsp)}})}me.loginConnect({username:data.userName,password:data.password},{success:function(){clearTimeout(submitInterval);submitEle.value=me.lang.login},fail:function(msg){clearTimeout(submitInterval);submitEle.value=me.lang.login;me.setGeneralError(msg)}},loginFn)}},true)},_eventHandler:(function(){var me,style={focus:function(field,e){var returnValue=me.fireEvent("fieldFocus",{ele:this});if(!returnValue){return}this.addClass(me.constant.FOCUS_CLASS);this.removeClass(me.constant.ERROR_CLASS);baidu(me.getElement(field+"Label")).addClass(me.constant.LABEL_FOCUS_CLASS)},blur:function(field,e){var returnValue=me.fireEvent("fieldBlur",{ele:this});if(!returnValue){return}this.removeClass(me.constant.FOCUS_CLASS);baidu(me.getElement(field+"Label")).removeClass(me.constant.LABEL_FOCUS_CLASS)},mouseover:function(field,e){var returnValue=me.fireEvent("fieldMouseover",{ele:this});if(!returnValue){return}this.addClass(me.constant.HOVER_CLASS)},mouseout:function(field,e){var returnValue=me.fireEvent("fieldMouseout",{ele:this});if(!returnValue){return}this.removeClass(me.constant.HOVER_CLASS)},keyup:function(field,e){var returnValue=me.fireEvent("fieldKeyup",{ele:this});if(!returnValue){return}}},behaviour={focus:{userName:function(){if(me.config.loginMerge&&me.getElement("loginMerge")){me.getElement("loginMerge").value="true";me.getElement("isPhone").value=""}},password:function(field,e){me._getRSA(function(result){me.RSA=result.RSA;me.rsakey=result.rsakey})},verifyCode:function(){}},blur:{userName:function(field,e){},password:function(field,e){var value=this.get(0).value;if(value.length){me.validate(field)}},verifyCode:function(field,e){var value=this.get(0).value;if(value.length){me.validate(field)}}},change:{userName:function(field,e){var value=this.get(0).value;if(value.length){me.validate(field,{success:function(){passport.data.loginCheck({userName:value,isPhone:me.config.isPhone}).success(function(rsp){if(rsp.data.codeString.length){me.getVerifyCode(rsp.data.codeString);me.vcodetype=rsp.data.vcodetype}else{me.clearVerifyCode()}})}})}},verifyCode:function(field,e){}},click:{verifyCodeChange:function(field,e){me.getElement("verifyCode").value="";me._doFocus("verifyCode");me.getVerifyCode();e.preventDefault()}},keyup:{verifyCode:function(field,e){var verifyCodeEle=me.getElement("verifyCode"),$verifyCodeEle=baidu(verifyCodeEle);if(verifyCodeEle.value&&verifyCodeEle.value.length==4){me._asyncValidate.checkVerifycode.call(me,{error:function(rsp){$verifyCodeEle.addClass(me.constant.ERROR_CLASS);me.setGeneralError(rsp.msg)},success:function(){$verifyCodeEle.removeClass(me.constant.ERROR_CLASS);me.clearGeneralError()}})}else{me.$hide("verifyCodeSuccess")}}},submit:function(e){me.submit();e.preventDefault()}};return{entrance:function(e){me=this;var target=baidu(e.target),field=e.target.name;if(!field&&e.target.id){var matches=e.target.id.match(/\d+__(.*)$/);if(matches){field=matches[1]}}if(!field){return}if(style.hasOwnProperty(e.type)){style[e.type].apply(baidu(e.target),[field,e])}if(behaviour.hasOwnProperty(e.type)){if(typeof behaviour[e.type]=="function"){behaviour[e.type].apply(baidu(e.target),[e])}if(behaviour[e.type].hasOwnProperty(field)){behaviour[e.type][field].apply(baidu(e.target),[field,e])}}if(!me.initialized&&e.type=="focus"){me._initApi()}}}})(),$dispose:function(){var me=this;if(me.disposed){return}baidu.dom(me.getElement()).removeClass(me.constant.CONTAINER_CLASS);me.getElement().removeChild(me.getElement("form"));magic.Base.prototype.$dispose.call(me)}});return magic});