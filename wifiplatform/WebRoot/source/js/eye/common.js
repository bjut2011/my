define("common:static/js/cookie.js",function(e,t,n){t={set:function(e,t,n){n=n||10;var o=new Date;o.setTime((new Date).getTime()+1e3*n);var c=e+"="+escape(t)+";path=/;expires="+o.toGMTString();document.cookie=c},get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},remove:function(e){this.set(e,"",-1)}},n.exports=t});
;define("common:static/js/BaseObject.js",function(t,e,a){function i(t){this.options=t||{}}var n=t("common:widget/calender/calender.js");i.prototype.init=function(t){var e=this,a=n.getDate();this.options.init&&this.options.init(t),n.dateChangeCbk(function(t){e.updateByDate(t.startDate,t.endDate)}),this.updateByDate(a.startDate,a.endDate),this.startDate=a.startDate,this.endDate=a.endDate},i.prototype.updateByDate=function(t,e){this.startDate=t,this.endDate=e;var a=this.options.callback;if(this.options.url){var i=GLOBAL_DATA.API_URL+this.options.url,n=this.options.params||{};n.date=t,n.date_end=e,$.getJSON(i,n,function(i){a&&a(i.data,t,e)})}else a&&a()},i.prototype.reload=function(){this.updateByDate(this.startDate,this.endDate)},i.prototype.setOptions=function(t){$.extend(!0,this.options,t)},i.prototype.isDemo=function(){var t=location.pathname,e=t.split("/"),a="";return e.length>=2&&(a=e[1]),"malldemo"==a?!0:!1},a.exports=i});
;function setTab(t,e,n){for(i=1;n>=i;i++){var s=document.getElementById(t+i),o=document.getElementById("con_"+t+"_"+i);s.className=i==e?"active":"",o.style.display=i==e?"block":"none"}}function resizeLeft(){if($(".layout_rightmain")&&$(".layout_leftnav")){var t=$(".layout_rightmain").height();$(".layout_leftnav").css("min-height",t+10)}}$(document).ready(function(){$(".btn-select, .i-num, .h-outer, .table-select").click(function(t){t.stopPropagation(),$(this).find(".option").toggle()}),$(document).click(function(t){var i=$(t.target);$(".btn-select, .i-num, .h-outer, .table-select").is(":visible")&&"option"!=i.attr("class")&&!i.parent(".option").length&&$(".option").hide()}),$(".option a").click(function(){var t=$(this).text();$(this).parent().siblings(".select-txt").text(t),$(this).parent().parent().next("#select_value").val(t)}),$(".accordion").find("a").first().bind("click",function(){"46px"==$(".nav-vertical").css("width")?($(".nav-vertical").css("width","195px"),$(this).css("width","149px"),$(".layout_leftnav")&&$(".layout_leftnav").css("width","195px"),$(".layout_rightmain")&&$(".layout_rightmain").css("margin-left","210px")):($(".nav-vertical").css("width","46px"),$(this).css("width","0px"),$(".layout_leftnav")&&$(".layout_leftnav").css("width","46px"),$(".layout_rightmain")&&$(".layout_rightmain").css("margin-left","61px")),$(this).next().hide(),resizeLeft()}),$(".accordion").find("a").mouseenter(function(){"0px"==$(this).css("width")&&$(this).next().show()}),$(".accordion").find("a").mouseleave(function(){"0px"==$(this).css("width")&&$(this).next().hide()}),resizeLeft()}),$(function(){function t(t){var i=-t*e;$("#focus ul").stop(!0,!1).animate({left:i},300),$("#focus .btn span").stop(!0,!1).animate({opacity:"0.4"},300).eq(t).stop(!0,!1).animate({opacity:"1"},300)}for(var i,e=$("#focus").width(),n=$("#focus ul li").length,s=0,o="<div class='btnBg'></div><div class='btn'>",a=0;n>a;a++)o+="<span></span>";o+="</div><div class='preNext pre'></div><div class='preNext next'></div>",$("#focus").append(o),$("#focus .btnBg").css("opacity",0),$("#focus .btn span").css("opacity",.4).mouseenter(function(){s=$("#focus .btn span").index(this),t(s)}).eq(0).trigger("mouseenter"),$("#focus .preNext").css("opacity",0).hover(function(){$(this).stop(!0,!1).animate({opacity:"0.5"},300)},function(){$(this).stop(!0,!1).animate({opacity:"0"},300)}),$("#focus .pre").click(function(){s-=1,-1==s&&(s=n-1),t(s)}),$("#focus .next").click(function(){s+=1,s==n&&(s=0),t(s)}),$("#focus ul").css("width",e*n),$("#focus").hover(function(){clearInterval(i)},function(){i=setInterval(function(){t(s),s++,s==n&&(s=0)},2800)}).trigger("mouseleave")}),$(function(){var t=$(".layout_rightmain"),i=$(".layout_rightmain .r-top");if(!(i.length<=0)){i.css("background","#fff");var e=i.offset().top,n=i.offset().left,s=i.height(),o="relative";$(window).scroll(function(){var a=$(this).scrollTop();a>e?"fixed"!=o&&(t.css({"padding-top":s}),i.css({position:"fixed","z-index":"10000",top:0,right:0,left:n}),o="fixed"):"relative"!=o&&(t.css({"padding-top":0}),i.css({position:"relative",top:0,right:0,left:0}),o="relative")})}});
;!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function n(e){return e}function o(e){return decodeURIComponent(e.replace(t," "))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return r.json?JSON.parse(e):e}catch(n){}}var t=/\+/g,r=e.cookie=function(t,c,a){if(void 0!==c){if(a=e.extend({},r.defaults,a),"number"==typeof a.expires){var u=a.expires,f=a.expires=new Date;f.setDate(f.getDate()+u)}return c=r.json?JSON.stringify(c):String(c),document.cookie=[r.raw?t:encodeURIComponent(t),"=",r.raw?c:encodeURIComponent(c),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var d=r.raw?n:o,p=document.cookie.split("; "),s=t?void 0:{},m=0,x=p.length;x>m;m++){var l=p[m].split("="),g=d(l.shift()),v=d(l.join("="));if(t&&t===g){s=i(v);break}t||(s[g]=i(v))}return s};r.defaults={},e.removeCookie=function(n,o){return void 0!==e.cookie(n)?(e.cookie(n,"",e.extend({},o,{expires:-1})),!0):!1}});
;define("common:static/js/storage.js",function(t,e,n){"use strict";function r(t){return t?t.replace(/./,function(t){return t.toUpperCase()}):""}var i=window.localStorage,o="huiyan";e={set:function(t,e,n){var u,c;if("object"==typeof t){for(u in t)if(!(c=this.set(u,t[u],e)))return c;return 0}try{return"object"==typeof e&&(e=JSON.stringify(e)),i.setItem("huiyan"+(n?"":r(o))+r(t),e),0}catch(a){if(a instanceof window.DOMException)return a.code}},get:function(t,e){var n,u=e?"huiyan"+r(t):"huiyan"+r(o)+r(t);return null===(n=i.getItem(u))?i.getItem("huiyan"+r(t)):n},remove:function(t){i.removeItem("huiyan"+r(o)+r(t))},clear:function(){i.clear()}},n.exports=e});
;define("common:static/js/template.js",function(){window.baidu=window.baidu||{},baidu.template=baidu.template||{},baidu.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},baidu.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")}});
;define("common:static/js/util.js",function(t,e,n){n.exports={changeDateList:function(t,e){var n={};if("day"==t)n=e;else if("week"==t||"month"==t){var a={};for(var i in e){var o=new Date(i),r=parseInt(o.getTime()/6048e5),s=r;"month"==t&&(s=o.getFullYear()+o.getMonth()),a[s]||(a[s]={dayList:[],count:0}),a[s].count+=e[i],a[s].dayList.push(i)}for(var i in a){var u=a[i].dayList[0]+"至"+a[i].dayList[a[i].dayList.length-1];n[u]=a[i].count}}return n}}});
;define("common:widget/tip/tip.js",function(i,t,n){function o(){$("#tipBox .close_icon").bind("click",function(){t.hide()})}var t={show:function(i){$("#tipBox .message").html(i),$("#tipBox").height(32)},hide:function(){$("#tipBox").height(0)},init:function(){o()}};n.exports=t});
;define("common:widget/calender/pickerDateRange.js",function(t,e,a){function s(t,e){var a={aToday:"aToday",aYesterday:"aYesterday",aRecent3Days:"aRecent3Days",aRecent7Days:"aRecent7Days",aRecent14Days:"aRecent14Days",aRecent30Days:"aRecent30Days",aRecent90Days:"aRecent90Days",startDate:"",endDate:"",startCompareDate:"",endCompareDate:"",minValidDate:"315507600",success:function(){return!0},startDateId:"startDate",startCompareDateId:"startCompareDate",endDateId:"endDate",endCompareDateId:"endCompareDate",target:"",needCompare:!1,suffix:"",inputTrigger:"input_trigger",compareTrigger:"compare_trigger",compareCheckboxId:"needCompare",calendars:2,dayRangeMax:0,monthRangeMax:12,dateTable:"dateRangeDateTable",selectCss:"dateRangeSelected",compareCss:"dateRangeCompare",coincideCss:"dateRangeCoincide",firstCss:"first",lastCss:"last",clickCss:"today",disableGray:"dateRangeGray",isToday:"dateRangeToday",joinLineId:"joinLine",isSingleDay:!1,defaultText:" 至 ",singleCompare:!1,stopToday:!0,stopTime:null,isTodayValid:!1,weekendDis:!1,disCertainDay:[],disCertainDate:[],shortOpr:!1,noCalendar:!1,theme:"gri",autoCommit:!1,autoSubmit:!1,replaceBtn:"btn_compare"},s=this;this.inputId=t,this.inputCompareId=t+"Compare",this.compareInputDiv="div_compare_"+t,this.mOpts=$.extend({},a,e),this.mOpts.calendars=Math.min(this.mOpts.calendars,3),this.mOpts.compareCss="ta"==this.mOpts.theme?this.mOpts.selectCss:this.mOpts.compareCss,this.periodObj={},this.periodObj[s.mOpts.aToday]=0,this.periodObj[s.mOpts.aYesterday]=1,this.periodObj[s.mOpts.aRecent3Days]=2,this.periodObj[s.mOpts.aRecent7Days]=6,this.periodObj[s.mOpts.aRecent14Days]=13,this.periodObj[s.mOpts.aRecent30Days]=29,this.periodObj[s.mOpts.aRecent90Days]=90,this.startDefDate="";var i=""==this.mOpts.suffix?(new Date).getTime():this.mOpts.suffix;this.calendarId="calendar_"+i,this.dateListId="dateRangePicker_"+i,this.dateRangeCompareDiv="dateRangeCompareDiv_"+i,this.dateRangeDiv="dateRangeDiv_"+i,this.compareCheckBoxDiv="dateRangeCompareCheckBoxDiv_"+i,this.submitBtn="submit_"+i,this.closeBtn="closeBtn_"+i,this.preMonth="dateRangePreMonth_"+i,this.nextMonth="dateRangeNextMonth_"+i,this.startDateId=this.mOpts.startDateId+"_"+i,this.endDateId=this.mOpts.endDateId+"_"+i,this.compareCheckboxId=this.mOpts.compareCheckboxId+"_"+i,this.startCompareDateId=this.mOpts.startCompareDateId+"_"+i,this.endCompareDateId=this.mOpts.endCompareDateId+"_"+i;var d={gri:['<div id="'+this.calendarId+'" class="gri_dateRangeCalendar">','<table class="gri_dateRangePicker"><tr id="'+this.dateListId+'"></tr></table>','<div class="gri_dateRangeOptions" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="gri_dateRangeInput" id="'+this.dateRangeDiv+'" >','<input type="text" class="gri_dateRangeInput" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span id="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div class="gri_dateRangeInput" id="'+this.dateRangeCompareDiv+'">','<input type="text" class="gri_dateRangeInput" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","<div>",'<input type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="确定" />','&nbsp;<a id="'+this.closeBtn+'" href="javascript:;">关闭</a>',"</div>","</div>","</div>"],ta:['<div id="'+this.calendarId+'" class="ta_calendar ta_calendar2 cf">','<div class="ta_calendar_cont cf" id="'+this.dateListId+'">',"</div>",'<div class="ta_calendar_footer cf" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="frm_msg">','<div id="'+this.dateRangeDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div id="'+this.dateRangeCompareDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","</div>",'<div class="frm_btn">','<input class="ta_btn ta_btn_primary" type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="确定" />','<input class="ta_btn" type="button" id="'+this.closeBtn+'" value="取消"/>',"</div>","</div>","</div>"]},r={gri:['<label class="gri_contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="gri_pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>对比',"</label>",'<input type="text" name="'+this.inputCompareId+'" id="'+this.inputCompareId+'" value="" class="gri_date"/>'],ta:['<label class="contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>对比',"</label>",'<div class="ta_date" id="'+this.compareInputDiv+'">','   <span name="dateCompare" id="'+this.inputCompareId+'" class="date_title"></span>','   <a class="opt_sel" id="'+this.mOpts.compareTrigger+'" href="#">','       <i class="i_orderd"></i>',"   </a>","</div>"]};$(r[this.mOpts.theme].join("")).insertAfter("ta"==this.mOpts.theme?$("#div_"+this.inputId):$("#"+this.inputId)),this.mOpts.noCalendar&&($("#"+this.inputId).css("display","none"),$("#"+this.compareCheckboxId).parent().css("display","none")),$(0<$("#appendParent").length?"#appendParent":document.body).append(d[this.mOpts.theme].join("")),$("#"+this.calendarId).css("z-index",9999),1>$("#"+this.mOpts.startDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startDateId+'" name="'+this.mOpts.startDateId+'" value="'+this.mOpts.startDate+'" />'):$("#"+this.mOpts.startDateId).val(this.mOpts.startDate),1>$("#"+this.mOpts.endDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endDateId+'" name="'+this.mOpts.endDateId+'" value="'+this.mOpts.endDate+'" />'):$("#"+this.mOpts.endDateId).val(this.mOpts.endDate),1>$("#"+this.mOpts.compareCheckboxId).length&&$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="checkbox" id="'+this.mOpts.compareCheckboxId+'" name="'+this.mOpts.compareCheckboxId+'" value="0" style="display:none;" />'),0==this.mOpts.needCompare?($("#"+this.compareInputDiv).css("display","none"),$("#"+this.compareCheckBoxDiv).css("display","none"),$("#"+this.dateRangeCompareDiv).css("display","none"),$("#"+this.compareCheckboxId).attr("disabled",!0),$("#"+this.startCompareDateId).attr("disabled",!0),$("#"+this.endCompareDateId).attr("disabled",!0),$("#"+this.compareCheckboxId).parent().css("display","none"),$("#"+this.mOpts.replaceBtn).length>0&&$("#"+this.mOpts.replaceBtn).hide()):(1>$("#"+this.mOpts.startCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startCompareDateId+'" name="'+this.mOpts.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" />'):$("#"+this.mOpts.startCompareDateId).val(this.mOpts.startCompareDate),1>$("#"+this.mOpts.endCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endCompareDateId+'" name="'+this.mOpts.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" />'):$("#"+this.mOpts.endCompareDateId).val(this.mOpts.endCompareDate),""==this.mOpts.startCompareDate||""==this.mOpts.endCompareDate?($("#"+this.compareCheckboxId).attr("checked",!1),$("#"+this.mOpts.compareCheckboxId).attr("checked",!1)):($("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),this.dateInput=this.startDateId,this.changeInput(this.dateInput),$("#"+this.startDateId).bind("click",function(){return s.endCompareDateId==s.dateInput&&$("#"+s.startCompareDateId).val(s.startDefDate),s.startDefDate="",s.removeCSS(1),s.changeInput(s.startDateId),!1}),$("#"+this.calendarId).bind("click",function(t){t.stopPropagation()}),$("#"+this.startCompareDateId).bind("click",function(){return s.endDateId==s.dateInput&&$("#"+s.startDateId).val(s.startDefDate),s.startDefDate="",s.removeCSS(0),s.changeInput(s.startCompareDateId),!1}),$("#"+this.submitBtn).bind("click",function(){for(var t in s.periodObj)$("#"+t).length>0&&$("#"+t).parent().removeClass("active");return s.close(1),s.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()}),!1}),$("#"+this.closeBtn).bind("click",function(){return s.close(),!1}),$("#"+this.inputId).bind("click",function(){return s.init(),s.show(!1,s),!1});$("#"+this.mOpts.inputTrigger).bind("click",function(){return s.init(),s.show(!1,s),!1}),$("#"+this.mOpts.compareTrigger).bind("click",function(){return s.init(!0),s.show(!0,s),!1}),$("#"+this.inputCompareId).bind("click",function(){return s.init(!0),s.show(!0,s),!1}),this.mOpts.singleCompare&&("ta"===this.mOpts.theme?($("#"+s.startDateId).val(s.mOpts.startDate),$("#"+s.endDateId).val(s.mOpts.startDate),$("#"+s.startCompareDateId).val(s.mOpts.startCompareDate),$("#"+s.endCompareDateId).val(s.mOpts.startCompareDate)):($("#"+s.startDateId).val(s.mOpts.startDate),$("#"+s.endDateId).val(s.mOpts.startDate),$("#"+s.startCompareDateId).val(s.mOpts.startCompareDate),$("#"+s.endCompareDateId).val(s.mOpts.startCompareDate),$("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),$("#"+this.dateRangeCompareDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareCheckboxId).bind("click",function(){$("#"+s.inputCompareId).css("display",this.checked?"":"none"),$("#"+s.dateRangeCompareDiv).css("display",this.checked?"":"none"),$("#"+s.compareInputDiv).css("display",this.checked?"":"none"),$("#"+s.startCompareDateId).css("disabled",this.checked?!1:!0),$("#"+s.endCompareDateId).css("disabled",this.checked?!1:!0),$("#"+s.mOpts.compareCheckboxId).attr("checked",$("#"+s.compareCheckboxId).attr("checked")),$("#"+s.mOpts.compareCheckboxId).val($("#"+s.compareCheckboxId).attr("checked")?1:0),$("#"+s.compareCheckboxId).attr("checked")?(sDate=s.str2date($("#"+s.startDateId).val()),sTime=sDate.getTime(),eDate=s.str2date($("#"+s.endDateId).val()),eTime=eDate.getTime(),scDate=$("#"+s.startCompareDateId).val(),ecDate=$("#"+s.endCompareDateId).val(),(""==scDate||""==ecDate)&&(ecDate=s.str2date(s.date2ymd(sDate).join("-")),ecDate.setDate(ecDate.getDate()-1),scDate=s.str2date(s.date2ymd(sDate).join("-")),scDate.setDate(scDate.getDate()-(eTime-sTime)/864e5-1),ecDate.getTime()<1e3*s.mOpts.minValidDate&&(scDate=sDate,ecDate=eDate),ecDate.getTime()>=1e3*s.mOpts.minValidDate&&scDate.getTime()<1e3*s.mOpts.minValidDate&&(scDate.setTime(1e3*s.mOpts.minValidDate),scDate=s.str2date(s.date2ymd(scDate).join("-")),ecDate.setDate(scDate.getDate()+(eTime-sTime)/864e5-1)),$("#"+s.startCompareDateId).val(s.formatDate(s.date2ymd(scDate).join("-"))),$("#"+s.endCompareDateId).val(s.formatDate(s.date2ymd(ecDate).join("-")))),s.addCSS(1),s.changeInput(s.startCompareDateId)):(s.removeCSS(1),s.changeInput(s.startDateId)),s.close(1),s.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()})}),this.init(),this.close(1),this.mOpts.replaceBtn&&$("#"+this.mOpts.replaceBtn).length>0&&($("#"+s.compareCheckboxId).hide(),$(".contrast").hide(),$("#"+this.mOpts.replaceBtn).bind("click",function(){var t=this;$("#"+s.compareCheckboxId).attr("checked")?$("#"+s.compareCheckboxId).removeAttr("checked"):$("#"+s.compareCheckboxId).attr("checked","checked"),$("#"+s.compareCheckboxId).click(),$("#"+s.compareCheckboxId).attr("checked")?function(){$("#"+s.compareCheckboxId).removeAttr("checked"),$(".contrast").hide(),$(t).text("按时间对比")}():function(){$("#"+s.compareCheckboxId).attr("checked","checked"),$(".contrast").show(),$(t).text("取消对比")}()})),this.mOpts.autoCommit&&this.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()}),$(document).bind("click",function(){s.close()})}s.prototype.init=function(t){var e=this,a="undefined"!=typeof t?t&&$("#"+e.compareCheckboxId).attr("checked"):$("#"+e.compareCheckboxId).attr("checked");$("#"+this.dateListId).empty();var s=""==this.mOpts.endDate?new Date:this.str2date(this.mOpts.endDate);this.calendar_endDate=new Date(s.getFullYear(),s.getMonth()+1,0);for(var i=0;i<this.mOpts.calendars;i++){var d=null;if("ta"==this.mOpts.theme?d=this.fillDate(s.getFullYear(),s.getMonth(),i):(d=document.createElement("td"),$(d).append(this.fillDate(s.getFullYear(),s.getMonth(),i)),$(d).css("vertical-align","top")),0==i)$("#"+this.dateListId).append(d);else{var r="ta"==this.mOpts.theme?$("#"+this.dateListId).find("table").get(0):$("#"+this.dateListId).find("td").get(0);$(r).before(d)}s.setMonth(s.getMonth()-1,1)}$("#"+this.preMonth).bind("click",function(){return e.calendar_endDate.setMonth(e.calendar_endDate.getMonth()-1,1),e.mOpts.endDate=e.date2ymd(e.calendar_endDate).join("-"),e.init(t),1==e.mOpts.calendars&&e.changeInput(""==$("#"+e.startDateId).val()?e.startDateId:e.endDateId),!1}),$("#"+this.nextMonth).bind("click",function(){return e.calendar_endDate.setMonth(e.calendar_endDate.getMonth()+1,1),e.mOpts.endDate=e.date2ymd(e.calendar_endDate).join("-"),e.init(t),1==e.mOpts.calendars&&e.changeInput(""==$("#"+e.startDateId).val()?e.startDateId:e.endDateId),!1}),this.calendar_startDate=new Date(s.getFullYear(),s.getMonth()+1,1),this.endDateId!=this.dateInput&&this.endCompareDateId!=this.dateInput&&this.addCSS(a&&"undefined"!=typeof t?1:0),e.addCSS(a&&"undefined"!=typeof t?1:0),$("#"+e.inputCompareId).css("display",a?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none");for(var n in e.periodObj)if($("#"+n).length>0){var p="ta"==e.mOpts.theme?"active":"a",m=new Date(this.mOpts.startDate).getTime(),h=new Date(this.mOpts.endDate).getTime(),o=h-m,c=o/864e5,l=new Date,D=l.getFullYear()+"-";l.getMonth()+1<10&&(D+="0"),D+=l.getMonth()+1+"-",l.getDate()<10&&(D+="0"),D+=l.getDate(),c==e.periodObj[$("#"+n).attr("id")]&&D==this.mOpts.endDate&&$("#"+n).parent().addClass(p),$("#"+n).unbind("click"),$("#"+n).bind("click",function(){var t="ta"==e.mOpts.theme?"active":"a";$(this).parent().nextAll().removeClass(t),$(this).parent().prevAll().removeClass(t),$(this).parent().addClass(t);var a=e.getSpecialPeriod(e.periodObj[$(this).attr("id")]);$("#"+e.startDateId).val(e.formatDate(a.otherday)),$("#"+e.endDateId).val(e.formatDate(a.today)),$("#"+e.mOpts.startDateId).val($("#"+e.startDateId).val()),$("#"+e.mOpts.endDateId).val($("#"+e.endDateId).val()),"ta"==e.mOpts.theme?$("#"+e.compareInputDiv).hide():$("#"+e.inputCompareId).css("display","none"),$("#"+e.compareCheckboxId).attr("checked",!1),$("#"+e.mOpts.compareCheckboxId).attr("checked",!1),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),e.close(1),$("#"+e.startCompareDateId).val(""),$("#"+e.endCompareDateId).val(""),$("#"+e.mOpts.startCompareDateId).val(""),$("#"+e.mOpts.endCompareDateId).val(""),$("#"+e.mOpts.compareCheckboxId).val(0),$("#"+e.mOpts.replaceBtn).length>0&&($(".contrast").hide(),$("#"+e.mOpts.replaceBtn).text("按时间对比")),e.mOpts.success({startDate:$("#"+e.mOpts.startDateId).val(),endDate:$("#"+e.mOpts.endDateId).val(),needCompare:$("#"+e.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+e.mOpts.startCompareDateId).val(),endCompareDate:$("#"+e.mOpts.endCompareDateId).val()})})}$(document).bind("click",function(){e.close()}),$("#"+this.inputId).bind("change",function(){""===$(this).val()&&($("#"+e.startDateId).val(""),$("#"+e.endDateId).val(""),$("#"+e.startCompareDateId).val(""),$("#"+e.endCompareDateId).val(""))})},s.prototype.getSpecialPeriod=function(t){var e=this,a=this.mOpts.stopTime?new Date(this.mOpts.stopTime):new Date;1==e.mOpts.isTodayValid&&""!=e.mOpts.isTodayValid||2>t?"":a.setTime(a.getTime()-864e5);var s=a.getTime()-24*t*60*60*1e3<1e3*e.mOpts.minValidDate?1e3*e.mOpts.minValidDate:a.getTime()-24*t*60*60*1e3,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();a.setTime(s);var d=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return t==e.periodObj.aYesterday&&(i=d),{today:i,otherday:d}},s.prototype.removeCSS=function(t,e){"undefined"==typeof e&&(e=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof t&&(t=0);for(var a=new Date(this.calendar_startDate.getFullYear(),this.calendar_startDate.getMonth(),this.calendar_startDate.getDate()),s="",i=new Date(a);i.getTime()<=this.calendar_endDate.getTime();i.setDate(i.getDate()+1))s=0==t?this.mOpts.theme+"_"+this.mOpts.selectCss:this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(i).join("-")).removeClass(s),$("#"+this.calendarId+"_"+this.date2ymd(i).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss)},s.prototype.addCSS=function(t,e){"undefined"==typeof e&&(e=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof t&&(t=0);for(var a=this.str2date($("#"+this.startDateId).val()),s=this.str2date($("#"+this.endDateId).val()),i=this.str2date($("#"+this.startCompareDateId).val()),d=this.str2date($("#"+this.endCompareDateId).val()),r=0==t?a:i,n=0==t?s:d,p="",m=new Date(r);m.getTime()<=n.getTime();m.setDate(m.getDate()+1))0==t?(p=this.mOpts.theme+"_"+this.mOpts.selectCss,$("#"+this.calendarId+"_"+this.date2ymd(m).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss),$("#"+this.calendarId+"_"+this.date2ymd(m).join("-")).removeClass(p)):p=this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(m).join("-")).attr("class",p);"ta"==this.mOpts.theme&&($("#"+this.calendarId+"_"+this.date2ymd(new Date(r)).join("-")).removeClass().addClass(this.mOpts.firstCss),$("#"+this.calendarId+"_"+this.date2ymd(new Date(n)).join("-")).removeClass().addClass(this.mOpts.lastCss),r.getTime()==n.getTime()&&$("#"+this.calendarId+"_"+this.date2ymd(new Date(n)).join("-")).removeClass().addClass(this.mOpts.clickCss))},s.prototype.checkDateRange=function(t,e){var a,s=this.str2date(t),i=this.str2date(e),d=s.getTime(),r=i.getTime();if(r>=d){if(a=this.str2date(t),a.setMonth(a.getMonth()+this.mOpts.monthRangeMax),a.setDate(a.getDate()+this.mOpts.dayRangeMax-1),a.getTime()<r)return alert("结束日期不能大于："+this.date2ymd(a).join("-")),!1}else if(a=this.str2date(t),a.setMonth(a.getMonth()-this.mOpts.monthRangeMax),a.setDate(a.getDate()-this.mOpts.dayRangeMax+1),a.getTime()>r)return alert("开始日期不能小于："+this.date2ymd(a).join("-")),!1;return!0},s.prototype.selectDate=function(t){this.changeInput(this.dateInput);var e=this.formatDate(t);if(this.startDateId==this.dateInput)this.removeCSS(0),this.removeCSS(1),$("#"+this.calendarId+"_"+t).attr("class","ta"==this.mOpts.theme?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.selectCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(e),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startDateId,$("#"+this.endDateId).val(e),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):(this.dateInput=this.endDateId,$("#"+this.dateInput).val(e));else if(this.endDateId==this.dateInput){if(""==$("#"+this.startDateId).val())return this.dateInput=this.startDateId,this.selectDate(t),!1;if(0==this.checkDateRange($("#"+this.startDateId).val(),t))return!1;-1==this.compareStrDate(t,$("#"+this.startDateId).val())&&($("#"+this.dateInput).val($("#"+this.startDateId).val()),$("#"+this.startDateId).val(e),e=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(e),this.dateInput=this.startDateId,this.removeCSS(0),this.addCSS(0),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}else if(this.startCompareDateId==this.dateInput)this.removeCSS(1),this.removeCSS(0),$("#"+this.calendarId+"_"+t).attr("class","ta"==this.mOpts.theme?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.compareCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(e),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startCompareDateId,$("#"+this.endCompareDateId).val(e),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endCompareDateId;else if(this.endCompareDateId==this.dateInput){if(""==$("#"+this.startCompareDateId).val())return this.dateInput=this.startCompareDateId,this.selectDate(t),!1;if(0==this.checkDateRange($("#"+this.startCompareDateId).val(),t))return!1;-1==this.compareStrDate(t,$("#"+this.startCompareDateId).val())&&($("#"+this.dateInput).val($("#"+this.startCompareDateId).val()),$("#"+this.startCompareDateId).val(e),e=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(e),this.dateInput=this.startCompareDateId,this.removeCSS(1),this.addCSS(1),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}},s.prototype.show=function(t,e){$("#"+e.dateRangeDiv).css("display",t?"none":""),$("#"+e.dateRangeCompareDiv).css("display",t?"":"none");var a=t?$("#"+this.inputCompareId).offset():$("#"+this.inputId).offset(),s=t?$("#"+this.inputCompareId).attr("offsetHeight"):$("#"+this.inputId).attr("offsetHeight"),i=parseInt($(document.body).attr("clientWidth")),d=a.left;return $("#"+this.calendarId).css("display","block"),(1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay)&&($("#"+this.endDateId).css("display","none"),$("#"+this.endCompareDateId).css("display","none"),$("#"+this.mOpts.joinLineId).css("display","none"),$("."+this.mOpts.joinLineId).css("display","none")),i>0&&$("#"+this.calendarId).attr("offsetWidth")+a.left>i&&(d=a.left+$("#"+this.inputId).attr("offsetWidth")-$("#"+this.calendarId).attr("offsetWidth")+(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?5:0)),d-=100,$("#"+this.calendarId).css("left",d+"px"),$("#"+this.calendarId).css("top",a.top+(s?s-1:"ta"==e.mOpts.theme?35:22)+"px"),this.changeInput(t?this.startCompareDateId:this.startDateId),!1},s.prototype.close=function(t){if(t){this.mOpts.shortOpr===!0?($("#"+this.inputId).val($("#"+this.startDateId).val()),$("#"+this.inputCompareId).val($("#"+this.startCompareDateId).val())):$("#"+this.inputId).val($("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()));var e=1==this.mOpts.isTodayValid&&""!=this.mOpts.isTodayValid?(new Date).getTime():(new Date).getTime()-864e5,a=this.str2date($("#"+this.startDateId).val()).getTime(),s=this.str2date($("#"+this.endDateId).val()).getTime();if(a>s){var i=$("#"+this.startDateId).val();$("#"+this.startDateId).val($("#"+this.endDateId).val()),$("#"+this.endDateId).val(i)}var d=1==this.mOpts.shortOpr?$("#"+this.startDateId).val():$("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()),r=document.getElementById(this.inputId);if(r&&"INPUT"==r.tagName?($("#"+this.inputId).val(d),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).val(h)):($("#"+this.inputId).html(d),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).html(h)),"ta"!=this.mOpts.theme&&""!=$("#"+this.startCompareDateId).val()&&""!=$("#"+this.endCompareDateId).val()){var n=this.str2date($("#"+this.startCompareDateId).val()).getTime(),p=this.str2date($("#"+this.endCompareDateId).val()).getTime(),m=n+s-a;m>e&&(m=e,$("#"+this.startCompareDateId).val(this.formatDate(this.date2ymd(new Date(m+a-s)).join("-")))),$("#"+this.endCompareDateId).val(this.formatDate(this.date2ymd(new Date(m)).join("-")));var n=this.str2date($("#"+this.startCompareDateId).val()).getTime(),p=this.str2date($("#"+this.endCompareDateId).val()).getTime();if(n>p){var i=$("#"+this.startCompareDateId).val();$("#"+this.startCompareDateId).val($("#"+this.endCompareDateId).val()),$("#"+this.endCompareDateId).val(i)}}var h=1==this.mOpts.shortOpr?$("#"+this.startCompareDateId).val():$("#"+this.startCompareDateId).val()+(""==$("#"+this.endCompareDateId).val()?"":this.mOpts.defaultText+$("#"+this.endCompareDateId).val());r&&"INPUT"==r.tagName?$("#"+this.inputCompareId).val(h):$("#"+this.inputCompareId).html(h);$("#"+this.mOpts.startDateId).val($("#"+this.startDateId).val()),$("#"+this.mOpts.endDateId).val($("#"+this.endDateId).val()),$("#"+this.mOpts.startCompareDateId).val($("#"+this.startCompareDateId).val()),$("#"+this.mOpts.endCompareDateId).val($("#"+this.endCompareDateId).val());for(var o in this.periodObj)$("#"+this.mOpts[o])&&$("#"+this.mOpts[o]).parent().removeClass("a")}return $("#"+this.calendarId).css("display","none"),!1},s.prototype.fillDate=function(t,e,a){var s=this,i="ta"==this.mOpts.theme,d=new Date(t,e,1),r=new Date(t,e,1),n=r.getDay();r.setDate(1-n);var p=new Date(t,e+1,0),m=new Date(t,e+1,0);n=m.getDay(),m.setDate(m.getDate()+6-n);var h=new Date,o=h.getDate(),c=h.getMonth(),l=h.getFullYear(),D=document.createElement("table");if(i){D.className=this.mOpts.dateTable,cap=document.createElement("caption"),$(cap).append(t+"年"+(e+1)+"月"),$(D).append(cap),thead=document.createElement("thead"),tr=document.createElement("tr");for(var I=["日","一","二","三","四","五","六"],C=0;7>C;C++)th=document.createElement("th"),$(th).append(I[C]),$(tr).append(th);$(thead).append(tr),$(D).append(thead),tr=document.createElement("tr"),td=document.createElement("td"),0==a&&$(td).append('<a href="javascript:void(0);" id="'+this.nextMonth+'"><i class="i_next"></i></a>'),a+1==this.mOpts.calendars&&$(td).append('<a href="javascript:void(0);" id="'+this.preMonth+'"><i class="i_pre"></i></a>'),$(td).attr("colSpan",7),$(td).css("text-align","center"),$(tr).append(td),$(D).append(tr)}else{D.className=this.mOpts.theme+"_"+this.mOpts.dateTable,tr=document.createElement("tr"),td=document.createElement("td"),0==a&&$(td).append('<a href="javascript:void(0);" id="'+this.nextMonth+'" class="gri_dateRangeNextMonth"><span>next</span></a>'),a+1==this.mOpts.calendars&&$(td).append('<a href="javascript:void(0);" id="'+this.preMonth+'" class="gri_dateRangePreMonth"><span>pre</span></a>'),$(td).append(t+"年"+(e+1)+"月"),$(td).attr("colSpan",7),$(td).css("text-align","center"),$(td).css("background-color","#F9F9F9"),$(tr).append(td),$(D).append(tr);var I=["日","一","二","三","四","五","六"];tr=document.createElement("tr");for(var C=0;7>C;C++)td=document.createElement("td"),$(td).append(I[C]),$(tr).append(td);$(D).append(tr)}for(var O="",v=0,u="",g=r;g.getTime()<=m.getTime();g.setDate(g.getDate()+1)){if(g.getTime()<d.getTime())O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="-1";else if(g.getTime()>p.getTime())O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="1";else if(this.mOpts.stopTime&&g.getTime()>this.mOpts.stopTime||1==this.mOpts.stopToday&&g.getTime()>h.getTime()||g.getTime()<1e3*s.mOpts.minValidDate)O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="2";else{if(v="0",g.getDate()==o&&g.getMonth()==c&&g.getFullYear()==l?1==this.mOpts.isTodayValid?O=this.mOpts.theme+"_"+this.mOpts.isToday:(O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="2"):O="",!this.mOpts.weekendDis||6!=g.getDay()&&0!=g.getDay()||(O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="3"),this.mOpts.disCertainDay&&this.mOpts.disCertainDay.length>0)for(var y in this.mOpts.disCertainDay)isNaN(this.mOpts.disCertainDay[y])||g.getDay()!==this.mOpts.disCertainDay[y]||(O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="4");if(this.mOpts.disCertainDate&&this.mOpts.disCertainDate.length>0){var f=!1;for(var y in this.mOpts.disCertainDate)if(!isNaN(this.mOpts.disCertainDate[y])||isNaN(parseInt(this.mOpts.disCertainDate[y])))if(this.mOpts.disCertainDate[0]===!0){if(f=!(g.getDate()===this.mOpts.disCertainDate[y]),!f)break}else if(f=!(g.getDate()!==this.mOpts.disCertainDate[y]))break;f&&(O=this.mOpts.theme+"_"+this.mOpts.disableGray,v="4")}}0==g.getDay()&&(tr=document.createElement("tr")),td=document.createElement("td"),td.innerHTML=g.getDate(),""!=O&&$(td).attr("class",O),0==v&&(u=g.getFullYear()+"-"+(g.getMonth()+1)+"-"+g.getDate(),$(td).attr("id",s.calendarId+"_"+u),$(td).css("cursor","pointer"),function(t){$(td).bind("click",t,function(){return s.selectDate(t),!1})}(u)),$(tr).append(td),6==g.getDay()&&$(D).append(tr)}return D},s.prototype.str2date=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])},s.prototype.compareStrDate=function(t,e){var a=this.str2date(t),s=this.str2date(e);return a.getTime()>s.getTime()?1:a.getTime()==s.getTime()?0:-1},s.prototype.date2ymd=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate()]},s.prototype.changeInput=function(t){1==this.mOpts.isSingleDay&&(t=this.startDateId);var e=[this.startDateId,this.startCompareDateId,this.endDateId,this.endCompareDateId],a="";a=t==this.startDateId||t==this.endDateId?this.mOpts.theme+"_"+this.mOpts.selectCss:this.mOpts.theme+"_"+this.mOpts.compareCss,t==this.endDateId&&this.mOpts.singleCompare&&(a=this.mOpts.theme+"_"+this.mOpts.compareCss);for(var s in e)$("#"+e[s]).removeClass(this.mOpts.theme+"_"+this.mOpts.selectCss),$("#"+e[s]).removeClass(this.mOpts.theme+"_"+this.mOpts.compareCss);$("#"+t).addClass(a),$("#"+t).css("background-repeat","repeat"),this.dateInput=t},s.prototype.formatDate=function(t){return t.replace(/(\d{4})\-(\d{1,2})\-(\d{1,2})/g,function(t,e,a,s){return 10>a&&(a="0"+a),10>s&&(s="0"+s),e+"-"+a+"-"+s})},a.exports=s});
;define("common:widget/calender/DateUtil.js",function(t,e,a){var n=function(){this.now=new Date,this.nowDayOfWeek=this.now.getDay(),this.nowDay=this.now.getDate(),this.nowMonth=this.now.getMonth(),this.nowYear=this.now.getYear(),this.nowYear+=this.nowYear<2e3?1900:0,this.lastMonthDate=new Date,this.lastMonthDate.setDate(1),this.lastMonthDate.setMonth(this.lastMonthDate.getMonth()-1),this.lastYear=this.lastMonthDate.getYear(),this.lastMonth=this.lastMonthDate.getMonth()};n.prototype={formatDate:function(t,e){e=e||"yyyy-MM-dd";var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},getUTC:function(t){var e=t.split("-");return month=parseInt(e[1])-1,Date.UTC(e[0],month,e[2])},DateDiff:function(t,e){var a=Date.parse(t.replace(/\-/g,"/")),n=Date.parse(e.replace(/\-/g,"/"));return(n-a)/864e5}};var r={};r.rendTrendTable=function(t,e,a,n){$(a).empty();var o=t.series,s=t.categories,i={},h=["<tr><td><b class='red'>平均值</b></td>"];i.col=["timePoint"],i.row=[];for(var l=[],d=0;d<o.length;d++){var f=o[d];i.col.push(f.name),l.push(f.data),h.push("<td><b>"+r.avg(f.data)+"</b></td>")}for(var d=0;d<s.length;d++){for(var g=[s[d]],u=0;u<l.length;u++){var p=l[u];g.push(p[d])}i.row.push(g)}h.push("</tr>"),$("#"+e).tmpl(i).appendTo($(a)),$tableWrap=$(a).find(".table-data-wrap"),n?$tableWrap.show():$tableWrap.hide(),$tableWrap.find("tbody").append(h.join(""))},r.addTableColor=function(t,e){for(var a=0;a<e.length;a++){for(var n=null,r=null,o=$(t).find("tbody tr").length,s=0;o>s;s++){var i=$(t).find("tbody tr:eq("+s+")").find("td:eq("+e[a]+")").text();if("--"!=i&&i.indexOf("%")>0){var h=parseFloat(i.split("%")[0]);n?n>h?n=h:h>r&&(r=h):n=r=h}}$(t).find("tr").each(r>0?function(){var t=$(this).find("td:eq("+e[a]+")");0==t.text().indexOf(r)&&t.addClass("max")}:function(){var t=$(this).find("td:eq("+e[a]+")");0==t.text().indexOf(n)&&t.addClass("min")})}},r.markSampleErrorData=function(t){$(".trend_warn").hide();var e=!1;return t.data.sampleNum?($.each(t.data.sampleNum,function(a,n){var o=r.avg(n);$.each(n,function(n,r){.05*o>r&&r>0&&(e=!0,$.each(t.data.series,function(e,r){r.name==a&&(t.data.series[e].data[n]={y:t.data.series[e].data[n],marker:{symbol:"url(images/warn.png)"}})}))})}),e&&$(".trend_warn").show(),t):t},r.avg=function(t){for(var e=0,a=0,n=0,r=0;r<t.length;r++)t[r]>0&&(e+=t[r],a++);return t.length>0&&(n=parseInt(e/a)),n},r.sum=function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a];return e},r.min=function(t){for(var e=t[0],a=t.length,n=1;a>n;n++)t[n]<e&&(e=t[n]);return e},r.max=function(){for(var t=arr[0],e=arr.length,a=1;e>a;a++)arr[a]>t&&(t=arr[a]);return t},r.del=function(t,e){return 0>e?t:t.slice(0,e).concat(t.slice(e+1,t.length))},a.exports=n});
;define("common:widget/calender/calender.js",function(e,t,a){function n(e){for(var t=0;t<l.length;t++)l[t](e)}function o(e,t){e=c.formatDate(new Date(new Date(e)-864e5));var a=GLOBAL_DATA.API_URL+"/huiyan/api/date?callback=?",n={date:e,date_end:t};$.getJSON(a,n,function(e){for(var t=[],a=e.data,n=0,o=a.length;o>n;n++)a[n].validrate<.95&&t.push(a[n].date_format);if(t.length>0){var i=t.join("，");i+="室外数据暂未产出，室内分析数据正常。",r.show(i)}else r.hide()})}var i=e("common:static/js/cookie.js"),r=e("common:widget/tip/tip.js"),D=e("common:widget/calender/pickerDateRange.js"),d=e("common:widget/calender/DateUtil.js"),l=[],s=null,c=new d;today=c.formatDate(new Date);var m=(c.formatDate(new Date(new Date-1296e6)),c.formatDate(new Date(new Date-864e5)),c.formatDate(new Date(new Date-2592e5))),f=location.pathname,u=f.split("/"),w="";if(u.length>=2&&(w=u[1]),"malldemo"==w){$(".tool_title").html("分析日期：2014-08-25 到 2014-08-31"),$(".tool_date").hide();var g=c.formatDate(new Date("08/25/2014")),h=c.formatDate(new Date("08/31/2014"))}else var g=i.get("startDate")||m,h=i.get("endDate")||m;s={startDate:g,endDate:h},o(g,h);var t={getDate:function(){return{startDate:g,endDate:h}},refreshCbk:function(){n(s)},dateChangeCbk:function(e){l.push(e)}},p=null,v=GLOBAL_DATA.API_URL+"/huiyan/api/date?callback=?",A={last:1};$.getJSON(v,A,function(e){var t={theme:"ta",autoCommit:!1,target:"datePicker",minValidDate:1408896e3,startDate:g,endDate:h,success:function(e){s=e,i.set("startDate",e.startDate,3600),i.set("endDate",e.endDate,3600),o(e.startDate,e.endDate),n(e)},isTodayValid:!0};e.length>0&&e.data&&(t.stopTime=1e3*e.data),p=new D("date",t)}),a.exports=t});
;define("common:widget/calender/PHDate.js",function(t,e,a){function i(){this.init=function(t){this.config={container:"calendar",ready_only:!1,short_cut:[],autosubmit:!1,type:"single",pivot:"",sheet:2,range_select:["",""],default_selected:["",""],zIndex:999,docclose:!0,usagecol:"1111111",input_width:"",input_height:"",date_split:"~",skin_name:"",select_rangday:null,disabled_day:[],compare:{open:!1,type:"double",deploy:!1},ent:{context:this,selected:null,clickday:null,sure:null,init:null,show:null,shortcut:null}},this.extend(t),this.container=this.config.container,this.ready_only=this.config.ready_only,this.shortcut=this.config.short_cut,this.selected_index=-1,this.autosubmit=this.config.autosubmit,this.type=this.config.type,this.pivot=this.getPivotDate(this.config.pivot),this.sheet=this.config.sheet,this.range_select=this.getDateRangeArray(this.config.range_select),this.range_select_init=this.getDateRangeArray(this.config.range_select),this.default_selected=this.getDateRangeArray(this.config.default_selected,!0),this.range_selected=this.default_selected,this.zIndex=this.config.zIndex,this.docclose=this.config.docclose,this.usagecol=this.config.usagecol,this.input_width=this.config.input_width,this.input_height=this.config.input_height,this.date_split=this.config.date_split,this.select_rangday=this.config.select_rangday,this.disabled_day=this.config.disabled_day,this.compare=this.config.compare,this.skin_name=this.config.skin_name,this.ent=this.config.ent,this.loadStyle(),this.compare.open?this.showCompareHeader():this.showHeader();var e=this;window.setTimeout(function(){e.setContainerWidth()},800),this.setRetdata(),this.ent&&this.ent.init&&"function"==typeof this.ent.init&&this.ent.init.call(this.ent.context,this.retdata)},this.extend=function(t){for(var e in t)this.config[e]=t[e]},this.setContainerWidth=function(){var t=$("#"+this.container+"_calendar .list").width(),e=(t+10)*this.sheet;$("#"+this.container+"_calendar").css({width:e+"px"}),$("#"+this.container+"_calendar div[data-calendar=list]").css({width:e+10+"px"}),$("#"+this.container+"_calendar div[data-calendar=foot]").css({display:1==this.autosubmit?"none":""})},this.getDateStr=function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=10>a?"0"+a:a;var t=t.getDate();return t=10>t?"0"+t:t,e+"-"+a+"-"+t},this.getDate=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])},this.getPivotDate=function(t){return t?new Date(this.getDate(t)):new Date},this.getDateRangeArray=function(t,e){for(var a=[],i=0,n=t.length;n>i;i++){var s=t[i];a.push(""==s?e?new Date:s:new Date(this.getDate(s)))}return a},this.showHeader=function(){var t=this.range_selected[0]?this.getDateStr(this.range_selected[0]):"",e=this.range_selected[1]?this.getDateStr(this.range_selected[1]):"",a="single"==this.type?t?t:"":t&&e?t+this.date_split+e:"",i=this.range_selected[0]+"|"+this.range_selected[1],n=this.input_width?this.input_width+"px":"",s=this.input_height>0?this.input_height:"",r=this.skin_name?"_"+this.skin_name:"",d='<div data-calendar="head" class="calendar_head'+r+'"><input type="text" data-calendar="headinput"  data-val="0" readonly class="calendar_date calendar_date_{type}" style="width:{input_width};height:{input_height}px" value="{val}" data-value="{data_value}"/>{shortcut}</div>',l=this.getShortcut("");l=l?l:"",d=d.replace(/\{type\}/g,this.type).replace(/\{input_height\}/g,s).replace(/\{input_width\}/g,n).replace(/\{val\}/g,a).replace(/\{data_value\}/g,i).replace(/\{shortcut\}/g,l),$("#"+this.container).html(d),this.headerEvent()},this.showCompareHeader=function(){var t=this.range_selected[0]?this.getDateStr(this.range_selected[0]):"",e=this.range_selected[1]?this.getDateStr(this.range_selected[1]):"",a="single"==this.compare.type?t?t:"":t&&e?t+this.date_split+e:"";this.type=this.compare.type;var i=this.range_selected[0]+"|"+this.range_selected[1],n=this.input_width?this.input_width+"px":"";this.loadStyle();var s="",r="",d="",l=this.skin_name?"_"+this.skin_name:"",c='<div data-calendar="head" class="calendar_head'+l+'"><input type="text" data-calendar="headinput"  data-val="0" readonly class="calendar_date calendar_date_{type}" style="width:{input_width}px" value="{val}" data-value="{data_value}"/><label class="btn_calendarcompare"><input type="checkbox"  {checked} data-calendar="btncompare"/> 对比</label> <input data-calelement="compare" type="text" data-calendar="headinput"  data-val="0" readonly class="calendar_date calendar_date_{type} {hide}" style="width:{input_width}px" value="{val}" data-value="{data_value}"/>{shortcut}</div>';0==this.compare.deploy?(r="hide",d=""):(s="hide",d="checked"),this.isCompare="checked"==d;var h=this.getShortcut(s);h=h?h:"",c=c.replace(/\{type\}/g,this.type).replace(/\{input_width\}/g,n).replace(/\{val\}/g,a).replace(/\{data_value\}/g,i).replace(/\{checked\}/g,d).replace(/\{hide\}/g,r).replace(/\{shortcut\}/g,h),$("#"+this.container).html(c),this.headerEvent()},this.loadStyle=function(){+new Date},this.headerEvent=function(){var t=this;$("#"+this.container+" div[data-calendar=head] input[data-calendar=headinput]").on("click",function(e){e.stopPropagation(),t.range_select=t.range_select_init;var a=$(this).attr("data-thisinput");if(t.close(),"this_input"==a)return $(this).attr("data-thisinput",""),void t.close(!0);var i=$(this).offset(),n=$(this).outerHeight()+1,s=$(this).outerWidth(),r=i.left-$("#"+t.container+"_calendar").outerWidth()+s,d=i.left,l=$(document).width()/2,c=i.left<l?d:r;$("#"+t.container+"_calendar").css({top:i.top+n+"px",left:c+"px"}),t.selected_index=-1,$(this).attr("data-thisinput",""),$(this).attr("data-thisinput","this_input");var h=$(this).attr("data-value").split("|"),o=h[0]?new Date(h[0]):"",g=h[1]?new Date(h[1]):"";t.range_selected=[o,g],t.listDate(),t.show()}),this.list()},this.getShortcut=function(t){for(var e="",a=0,i=0,n=this.shortcut.length;n>i;i++){var s=this.shortcut[i],r=s.on?"shortcut_on":"";r&&a++,e+='<a href="#" class="shortcut '+t+" "+r+'" data-calendar="shortcut" data-value="'+s.value+'">'+s.name+"</a>"}return this.is_shortcut=a>0?!0:!1,e},this.list=function(){var t=this.ready_only?"readonly":"",e=this.zIndex,a=this.skin_name?"_"+this.skin_name:"",i='<div class="calendar'+a+'" data-calendar="body" id="'+this.container+'_calendar" style="display:none;z-index:'+e+'"><div class="head"><div class="prev"><a href="#" data-calendar="btn_prevyear" class="btn_prevyear">&lt;&lt;</a> <a href="#" data-calendar="btn_prevmonth" class="btn_prevmonth">&lt;</a></div><div class="next"><a href="#" data-calendar="btn_nextmonth" class="btn_nextmonth">&gt;</a> <a href="#" data-calendar="btn_nextyear" class="btn_nextyear">&gt;&gt;</a></div></div><div class="main" data-calendar="list"></div><div class="foot" data-calendar="foot"><div><input type="text" class="text" '+t+' data-calendar="start"/></div><div data-calendar="double" class="date_split">'+this.date_split+'</div><div data-calendar="double"><input type="text" class="text" '+t+' data-calendar="end"/></div><div class="calendarbtn"><input type="button" value="确定" data-calendar="btn_submit"  class="calendarbtn"/></div></div></div>';$("body").append(i),this.listDate(),"single"==this.type&&$("#"+this.container+"_calendar .foot div[data-calendar=double]").css({display:"none"});var n=this;$("#"+this.container+"_calendar a[data-calendar=btn_nextmonth]").on("click",function(t){t.preventDefault(),n.listDate(!0,n.getViewDate(n.sheet))}),$("#"+this.container+"_calendar a[data-calendar=btn_prevmonth]").on("click",function(t){t.preventDefault(),n.listDate(!0,n.getViewDate(-n.sheet))}),$("#"+this.container+"_calendar a[data-calendar=btn_prevyear]").on("click",function(t){t.preventDefault(),n.listDate(!0,n.getViewDate(-12))}),$("#"+this.container+"_calendar a[data-calendar=btn_nextyear]").on("click",function(t){t.preventDefault(),n.listDate(!0,n.getViewDate(12))}),$("#"+this.container+"_calendar input[data-calendar=btn_submit]").on("click",function(t){t.preventDefault(),n.range_selected[0]&&n.isValidDate()&&n.ent&&n.ent.sure&&"function"==typeof n.ent.sure&&(n.setRetdata(),n.close(),n.ent.sure.call(n.ent.context,n.retdata))}),$("#"+this.container+"_calendar").on("click",function(t){t.stopPropagation()}),$(document).bind("click",function(){n.docclose&&n.close(!0)}),$("#"+this.container+" a[data-calendar=shortcut]").on("click",function(t){t.preventDefault(),$("#"+n.container+" a[data-calendar=shortcut]").removeClass("shortcut_on"),$(this).addClass("shortcut_on");var e=parseInt($(this).attr("data-value"),10);n.range_selected[0]=new Date(n.pivot.getFullYear(),n.pivot.getMonth(),n.pivot.getDate()-e+1),n.range_selected[1]=n.pivot;var a=$("#"+n.container+" div[data-calendar=head] input[data-calendar=headinput]").eq(0);a.val(n.getDateStr(n.range_selected[0])+n.date_split+n.getDateStr(n.range_selected[1])),a.attr("data-value",n.range_selected[0]+"|"+n.range_selected[1]),n.close(),n.ent&&n.ent.shortcut&&"function"==typeof n.ent.shortcut&&(n.is_shortcut=!0,n.setRetdata(),n.ent.shortcut.call(n.ent.context,n.retdata))}),$("#"+this.container+" input[data-calendar=btncompare]").on("click",function(){var t=$(this).attr("checked");"checked"==t?($("#"+n.container+" input[data-calelement=compare],#"+n.container+" span[data-calelement=compare]").removeClass("hide"),$("#"+n.container+" a[data-calendar=shortcut]").addClass("hide"),n.setCompareInputValue()):($("#"+n.container+" input[data-calelement=compare],#"+n.container+" span[data-calelement=compare]").addClass("hide"),$("#"+n.container+" a[data-calendar=shortcut]").removeClass("hide")),n.ent&&n.ent.compare&&"function"==typeof n.ent.compare&&n.ent.compare.call(n.ent.context,n.retdata,"checked"==t),n.isCompare="checked"==t,n.close()})},this.setCompareInputValue=function(){var t=this.getDate(this.retdata[0][1])-this.getDate(this.retdata[0][0]),e=parseInt(t/1e3/60/60/24),a=new Date(this.getDate(this.retdata[0][0]));a.setDate(a.getDate()-1);var i=new Date(a);i.setDate(i.getDate()-e),this.retdata[1]=[this.getDateStr(i),this.getDateStr(a)],this.range_selected=[i,a],$("#"+this.container+" div[data-calendar=head] input[data-calendar=headinput]").eq(1).attr("data-value",this.range_selected[0]+"|"+this.range_selected[1]),$("#"+this.container+" div[data-calendar=head] input[data-calendar=headinput]").eq(1).val(this.retdata[1][0]+this.date_split+this.retdata[1][1])},this.getViewDate=function(t){var e=$("#"+this.container+"_calendar .day a").eq(20).attr("data-value"),a=new Date(e);return a.setMonth(a.getMonth()+t),a},this.setHeadInputValue=function(){var t=this.range_selected[0]?this.getDateStr(this.range_selected[0]):"",e=this.range_selected[1]?this.getDateStr(this.range_selected[1]):"",a=$("#"+this.container+" input[data-thisinput=this_input]");switch(this.type){case"single":a.val(t),a.attr("data-value",this.range_selected[0]+"|"+this.range_selected[1]);break;case"double":var i=t&&e?this.date_split:"";i&&(a.val(t+i+e),a.attr("data-value",this.range_selected[0]+"|"+this.range_selected[1]))}},this.isValidDate=function(){var t=!0,e=$("#"+this.container+"_calendar input").eq(0).val(),a=$("#"+this.container+"_calendar input").eq(1).val();if(!/^\d{4}-\d{1,2}-\d{1,2}$/.test(e)||!/^\d{4}-\d{1,2}-\d{1,2}$/.test(a))return alert('手动输入日期格式不正确，请按以下格式输入"YYYY-MM-DD"'),!1;var i=this.getDate(e),n=this.getDate(a);return"single"==this.type&&(n=i),$("#"+this.container+"_calendar input").eq(0).val(this.getDateStr(i)),$("#"+this.container+"_calendar input").eq(1).val(this.getDateStr(n)),i>n?(alert("开始时间大于结束时间"),!1):this.range_select[0]&&i<this.range_select[0]?(alert("时间范围不正确，请在【"+this.getDateStr(this.range_select[0])+this.date_split+(this.range_select[1]?this.getDateStr(this.range_select[1]):"")+"】之间选择"),!1):this.range_select[1]&&n>this.range_select[1]?(alert("时间范围不正确，请在【"+(this.range_select[0]?this.getDateStr(this.range_select[0]):"")+this.date_split+this.getDateStr(this.range_select[1])+"】之间选择"),!1):(this.range_selected[0]=i,this.range_selected[1]=n,this.setSelectedValue(),t)},this.setSelectedValue=function(){var t=this.range_selected[0]?this.getDateStr(this.range_selected[0]):"",e=this.range_selected[1]?this.getDateStr(this.range_selected[1]):t;$("#"+this.container+"_calendar input").eq(0).val(t),$("#"+this.container+"_calendar input").eq(1).val(e)},this.listDate=function(t,e){var a="",i=this.range_selected[0]?new Date(this.range_selected[0]):new Date;i=t?e:i;for(var n=0,s=this.sheet;s>n;n++){{var r=i.getFullYear(),d=i.getMonth();i.getDate()}a+='<div class="list"><div class="yearmonth">'+r+"年"+(d+1)+'月</div><div><ul class="week"><li><a href="#">日</a></li><li><a href="#">一</a></li><li><a href="#">二</a></li><li><a href="#">三</a></li><li><a href="#">四</a></li><li><a href="#">五</a></li><li><a href="#">六</a></li></ul></div><div class="day"><ul>';for(var l=this.getMonthMaxDate(i),c=this.getWeekdayIndex(i),h="",o=0,g=42;g>o;o++){var u=o-c+1;u>l&&(h="hide"),(c>o||u>l)&&(u="");var _=u?new Date(r,d,u):"";a+='<li class="'+h+'"><a href="#" data-value="'+_+'" class="">'+u+"</a></li>"}a+="</ul></div></div>",i.setDate(1),i.setMonth(i.getMonth()+1)}$("#"+this.container+"_calendar div[data-calendar=list]").html(a),this.setListDateState(),this.setBeginningAndEnding();var p=this;$("#"+this.container+"_calendar div[data-calendar=list] a").on("click",function(t){t.preventDefault();var e=$(this).attr("data-value"),a=$(this).hasClass("disabled");if(!a&&e){var i=new Date(e);switch(p.type){case"single":$("#"+p.container+"_calendar div[data-calendar=list] a").removeClass("on").removeClass("selected").removeClass("beginning").removeClass("ending"),$("#"+p.container+"_calendar div[data-calendar=list] li").removeClass("beginning").removeClass("ending"),p.range_selected=[i,i];break;case"double":p.selected_index++,p.selected_index%2==0?(p.range_selected=[i],$("#"+p.container+"_calendar div[data-calendar=list] a").removeClass("on").removeClass("selected").removeClass("beginning").removeClass("ending"),$("#"+p.container+"_calendar div[data-calendar=list] li").removeClass("beginning").removeClass("ending"),p.select_rangday&&p.setSelectedRangDay(i)):(p.range_selected[0]>i?p.range_selected.unshift(i):p.range_selected.push(i),p.select_rangday&&(p.range_select=p.range_select_init,$("#"+p.container+"_calendar div[data-calendar=list] a").removeClass("disabled")),p.setListDateState(),p.setBeginningAndEnding())}$(this).addClass("on"),p.setSelectedValue(),p.ent&&p.ent.clickday&&"function"==typeof p.ent.clickday&&p.range_selected[0]&&p.range_selected[1]&&p.isValidDate()&&(p.setRetdata(),p.ent.clickday.call(p.ent.context,p.retdata)),p.autosubmit&&p.range_selected[0]&&p.range_selected[1]&&(p.setRetdata(),p.close(),p.ent&&p.ent.selected&&"function"==typeof p.ent.selected&&p.ent.selected.call(p.ent.context,p.retdata))}}),$("#"+this.container+"_calendar .foot input[data-calendar=start]").val(this.getDateStr(this.range_selected[0])),$("#"+this.container+"_calendar .foot input[data-calendar=end]").val(this.range_selected[1]?this.getDateStr(this.range_selected[1]):"")},this.setSelectedRangDay=function(t){var e=new Date(t);"number"==typeof this.select_rangday[0]&&this.select_rangday[0]>=0?(e.setDate(e.getDate()-this.select_rangday[0]),e=this.range_select[0]>e?this.range_select[0]:e):e=this.range_select[0];var a=new Date(t);"number"==typeof this.select_rangday[1]&&this.select_rangday[1]>=0?(a.setDate(a.getDate()+this.select_rangday[1]),a=this.range_select[1]<a?this.range_select[1]:a):a=this.range_select[1],$("#"+this.container+"_calendar div[data-calendar=list] a").removeClass("disabled"),$("#"+this.container+"_calendar div[data-calendar=list] a").each(function(){var t=$(this).attr("data-value");if(t){var i=new Date(t);(a&&i>a||e&&e>i)&&$(this).addClass("disabled")}}),e=e?e:this.range_select[0],a=a?a:this.range_select[1],this.range_select=[e,a]},this.setListDateState=function(){var t=this;$("#"+this.container+"_calendar div[data-calendar=list] a").each(function(e){var a=$(this).attr("data-value"),i=a?new Date(a):"";return a?(t.isSelected(i)&&$(this).addClass("selected"),t.isOn(i)&&$(this).addClass("on"),t.isDisabled(i,e)&&$(this).addClass("disabled"),void(i&&t.isToday(i)&&$(this).addClass("today"))):void $(this).addClass("hide")})},this.setBeginningAndEnding=function(){if("single"!=this.type){var t=this;t.range_selected[0]&&t.range_selected[1]&&$("#"+this.container+"_calendar div[data-calendar=list] a").each(function(){var e=$(this).attr("data-value");if(e){var a="";t.isSameDay(t.range_selected[0],new Date(e))&&(a="beginning"),t.isSameDay(t.range_selected[1],new Date(e))&&(a=t.isSameDay(t.range_selected[0],t.range_selected[1])?"beginendsame":"ending"),a&&($(this).addClass(a),$(this).parent().addClass(a),"beginendsame"==a&&($(this).addClass("ending"),$(this).parent().removeClass()))}})}},this.close=function(){$("#"+this.container+"_calendar").css({display:"none"}),$("#"+this.container+" input[data-thisinput=this_input]").attr("data-thisinput","")},this.setRetdata=function(){this.retdata=[];var t=this;this.setHeadInputValue(),$("#"+this.container+" div[data-calendar=head] input[data-calendar=headinput]").each(function(){var e=$(this).attr("data-value");if(e){var a=e.split("|")[0],i=e.split("|")[1];t.retdata.push([t.getDateStr(new Date(a)),t.getDateStr(new Date(i))])}}),this.is_shortcut||$("#"+this.container+" a[data-calendar=shortcut]").removeClass("shortcut_on"),this.is_shortcut=!1},this.show=function(){$("#"+this.container+"_calendar").css({display:""}),this.ent&&this.ent.show&&"function"==typeof this.ent.show&&this.ent.show.call(this.ent.context,this.retdata)},this.isSameDay=function(t,e){return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},this.isSelected=function(t){var e=!1;return this.range_selected[0]&&this.range_selected[1]&&this.range_selected[0]<=t&&this.range_selected[1]>=t?e=!0:this.range_selected[0]&&t&&this.range_selected[0].getTime()==t.getTime()&&(e=!0),e},this.isOn=function(t){var e=!1;return this.range_selected[0]&&t&&this.range_selected[0].getTime()==t.getTime()&&(e=!0),e},this.isDisabled=function(t,e){var a=!1,e=e%7;(this.range_select[0]&&this.range_select[0].getTime()>t.getTime()||this.range_select[1]&&this.range_select[1].getTime()<t.getTime())&&(a=!0);for(var i=0,n=this.disabled_day.length;n>i;i++){var s=this.disabled_day[i];s&&this.isSameDay(this.getDate(s),t)&&(a=!0)}return a="0"==this.usagecol.charAt(e)?!0:a},this.isToday=function(t){var e=new Date;return this.isSameDay(e,t)},this.getWeekdayIndex=function(t){var e=new Date(t.getFullYear(),t.getMonth(),1);return e.getDay()},this.getMonthMaxDate=function(t){var e=[31,28,31,30,31,30,31,31,30,31,30,31],a=t.getFullYear();return e[1]=0!=a%4||a%100==0&&a%400!=0?e[1]:29,e[t.getMonth()]},this.remove=function(){$("#"+this.container).html(""),$("#"+this.container+"_calendar").remove()}}function n(t){var e=new Date(1e3*parseInt(s)-0+864e5*t),a=e.getMonth()+1;9>=a&&(a="0"+a);var i=e.getDate();return 9>=i&&(i="0"+i),e=e.getFullYear()+"-"+a+"-"+i}var s=parseInt((new Date).getTime()/1e3),r={experData:{},init:function(){var t=this,e="2009-01-01",a=n(-1),s=n(-1),r={input_height:"25",container:"calender",ready_only:!1,autosubmit:!1,type:"double",pivot:a,sheet:2,range_select:[e,s],default_selected:[a,s],zIndex:999,docclose:!0,usagecol:"1111111",input_width:"",date_split:" 至 ",skin_name:"noborder",compare:{},ent:{context:this,sure:function(e){t.experData.start_date=e[0][0],t.experData.end_date=e[0][1],exeCallbacks(e)},shortcut:function(e){t.experData.start_date=e[0][0],t.experData.end_date=e[0][1],exeCallbacks(e)},init:function(e){t.experData.start_date=e[0][0],t.experData.end_date=e[0][1],exeCallbacks(e)}}};t.calendar=new i,t.calendar.init(r)}};r.init(),a.exports=i});
;define("common:widget/datepicker/datepicker.js",function(e,t,a){function i(e){for(var t=0;t<l.length;t++)l[t](e)}var n=e("common:static/js/storage.js");if(n.get("huiyan-datepicker"))var r=n.get("huiyan-datepicker");else{var c=new Date,s=c.getTime()-864e5,d=s-864e5;c.setTime(d);var o=c.getMonth()+1;o=o>=10?o:"0"+o;var u=c.getDate();u=u>=10?u:"0"+u;var r=c.getFullYear()+"-"+o+"-"+u;n.set("huiyan-datepicker",r)}$.datepicker.setDefaults($.datepicker.regional.zn),$("#datepicker").val(r);var l=[];$("#datepicker").datepicker({currentText:"now",dateFormat:"yy-mm-dd",showAnim:"blind",onSelect:function(e){r=e,n.set("huiyan-datepicker",r),i(r)}}),$("#dayCounts a").bind("click",function(){r=$(this).attr("value"),$(this).siblings().removeClass("cur"),$(this).addClass("cur"),i(r)});var t={getDate:function(){return r},dateChangeCbk:function(e){l.push(e)}};a.exports=t});
;define("common:widget/logo/logo.js",function(o,t,i){function n(){var o=GLOBAL_DATA.API_URL+"/huiyan/api/cooper?callback=?",t={};$.getJSON(o,t,function(o){a=o})}function c(o){for(var t=0;t<a.list.length;t++)if(parseInt(a.list[t].cooper_loc_id)===parseInt(o)){a.list[t].logo?$("#logo").attr("src",g[a.list[t].cooper_loc_id]):$("#logo").attr("src",l);break}}var a=null,l="http://huiyan.baidu.com/static/huiyan/static/common/widget/logo/logo.png",g={0:"http://huiyan.baidu.com/static/huiyan/static/common/widget/logo/logo_0.png"},t={init:function(){n()},showLogo:c};i.exports=t});
;define("common:widget/menu/menu.js",function(o,e,n){function c(){$("#menu dl").bind("click",function(o){o.stopPropagation()}),$("#menu dt").bind("click",function(){$("#menu dl").toggleClass("showSub")}),$(document).bind("click",function(){$("#menu dl").removeClass("showSub")}),$("#menu dd").delegate("li","click",function(){var o=0|$(this).attr("cooper_loc_id");s.showLogo(o),l.set("cooper_loc_id",o,2592e3),d.currentCooperId=o,t(),$("#menu dl").removeClass("showSub"),r.refreshCbk()})}function i(){var o=GLOBAL_DATA.API_URL+"/huiyan/api/cooper?callback=?",e={};$.getJSON(o,e,function(o){d=o;var e=location.pathname,n=e.split("/"),c="";if(n.length>=2&&(c=n[1]),"malldemo"!==c)3005==o.currentCooperId&&(o.currentCooperId=o.list[0].cooper_loc_id);else{var i={center:[116.244571,40.217764],compare:[0,1,2,3,4,5,6],cooper_loc_id:3005,logo:!1,name:"某商场"};o.list=[],o.list.unshift(i),o.currentCooperId=3005,$(".header").append('<div style="position: absolute;top: 0;left: 250px;color: #F1FF70;">您当前浏览的为演示版，数据不具备有效性。</div>')}l.set("cooper_loc_id",o.currentCooperId,2592e3),(!d.list||d.list.length<2)&&$(".menu-icon-arrow").hide(),t()})}function t(){$("#cooperLocList").html("");for(var o=0;o<d.list.length;o++)if(d.list[o].cooper_loc_id===d.currentCooperId)$("#currentCooperLoc").html(d.list[o].name);else{var e=$("<li cooper_loc_id='"+d.list[o].cooper_loc_id+"'>"+d.list[o].name+"</li>");$("#cooperLocList").append(e)}}var l=o("common:static/js/cookie.js"),r=o("common:widget/calender/calender.js"),s=o("common:widget/logo/logo.js"),d=null,e={init:function(){i(),c()}};n.exports=e});
;define("common:widget/nav/nav.js",function(){~function(){var a=location.pathname,n=a.split("/");if(n.length>=2){var e=n[1];if("mall"==e||"huiyan"==e)return!1;var t=$(".page-sidebar-menu a");t.each(function(a,n){var t=$(n).attr("href");if(/^\/mall/.test(t)){var r=t.replace(/^\/mall/g,"/"+e);$(n).attr("href",r)}})}}()});
;define("common:widget/tab/tab.js",function(t,n,i){var n={init:function(){this.bind(),this.changeCbk=[]},bind:function(){var t=this;$(".tab").delegate('ul li[class!="cur"]',"click",function(){$(this).siblings().removeClass("cur"),$(this).addClass("cur");for(var n=$(this).attr("by"),i=0;i<t.changeCbk.length;i++)t.changeCbk[i](n)})},change:function(t){this.changeCbk&&this.changeCbk.push(t)},getCurrentBy:function(){return $(".timecategory li.cur").attr("by")}};i.exports=n});
;define("common:widget/time/timepoint.js",function(t,i,n){!function(t,i){"use strict";var o=function(t){return t=t||{},t.dom?(this.callback={choose:t.choose||null},this.interTime=t.time||1e3,this.dom=t.dom,this.start=Math.min(t.start,t.end)||0,this.end=Math.max(t.start,t.end)||23,void this.init()):!1};i(o),n.exports=o}(this,function(t){"use strict";function i(){var t=this,i=this.dom.find(".timepoint_point");i.on("click",function(){t.pause(),t.index=t.start+i.index($(this)),t.choose()});var n=this.dom.find(".timepoint_btn_play");n.on("click",function(){t.play()});var o=this.dom.find(".timepoint_btn_stop");o.on("click",function(){t.pause()})}t.prototype.init=function(){this.dom.append(t.tpl.base);for(var n=this,o=10,s=[],e=this.dom.find(".timepoint_bar").width()-2*o,p=e/(this.end-this.start+1)/e,a=this.start;a<=this.end;a++){var d=t.tpl.point.replace(/\{\{(\w+)\}\}/g,function(){var t=arguments[1];return"point"==t?a:"left"==t?100*((a-n.start)*p+o/e):void 0});s.push(d)}this.dom.find(".timepoint_bar").append(s.join("")),this.index=this.start,this.choose(),i.apply(this,arguments)},t.prototype.choose=function(){var t=this.index-this.start;this.dom.find(".timepoint_point_input_active").removeClass("timepoint_point_input_active"),this.dom.find(".timepoint_point_input").eq(t).addClass("timepoint_point_input_active"),this.callback.choose(this.index)},t.prototype.play=function(){var t=this;this.playId=setInterval(function(){t.index++,t.index>t.end&&(t.index=t.start),t.choose()},this.interTime),this.dom.find(".timepoint_btn_play").hide(),this.dom.find(".timepoint_btn_stop").show()},t.prototype.pause=function(){clearInterval(this.playId),this.dom.find(".timepoint_btn_play").show(),this.dom.find(".timepoint_btn_stop").hide()},t.tpl={base:'<div class="timepoint_bar"><div class="timepoint_bar_bg"></div></div><div class="timepoint_btn"><button class="timepoint_btn_play"></button><button class="timepoint_btn_stop"></button></div>',point:'<div class="timepoint_point" style="left:{{left}}%"><span class="timepoint_point_input"></span><span class="timepoint_point_data">{{point}}</span></div>'}})});
;define("common:widget/timecategory/timecategory.js",function(t,i,e){var i={init:function(){this.bind(),this.changeCbk=[]},bind:function(){var t=this;$(".timecategory").delegate('ul li[class!="cur"]',"click",function(){$(this).siblings().removeClass("cur"),$(this).addClass("cur");for(var i=$(this).attr("by"),e=0;e<t.changeCbk.length;e++)t.changeCbk[e](i)})},change:function(t){this.changeCbk.push(t)},getCurrentBy:function(){return $(".timecategory li.cur").attr("by")}};e.exports=i});
;define("common:widget/tip/poptips.js",function(i,t){var o=function(i){var t=this instanceof o,e=this;if(!t)throw new Error("you must use new popTips");this.param=i,this.popId=parseInt(1e6*Math.random())+ +new Date;var p=i.handle;p.html("?").css({"margin-left":"10px",cursor:"pointer","text-align":"center","line-height":"18px",width:"18px",display:"inline-block",background:"#428bca",color:"#fff","border-radius":"9px",height:"18px","font-size":"12px",border:"1px solid #2b669a"}),p.on("click",function(){var i=this.getBoundingClientRect(),t=e.getPop();return t.css({position:"absolute",top:i.top+$(this).height()+document.body.scrollTop+10,left:i.left-40,"max-width":"600px",background:"#fffed1",padding:" 10px",border:"1px solid #ccc","border-radius":"4px"}),t.toggle(),!1})};o.prototype.getPop=function(){var i=$("#"+this.popId);return i.length>0?i:(i=$('<div style="display:none;z-index:1000;" id="'+this.popId+'"><a href="#" style="width:10px; height:10px; display:inline-block; position:absolute;right:5px; top:5px;background:url(\'/static/huiyan/static/common/widget/tip/close.png\'); background-size:cover;" ></a><div style="position:absolute; top:-13px; left:40px; font-size:25px; height:25px; line-height:25px; overflow:hidden; color:#ccc;">◆</div><div style="height:25px; line-height:25px; overflow:hidden;position:absolute; top:-12px; left:40px; font-size:25px; color:#fffed1;">◆</div>'+(this.param.tips||"提示文本")+"</div>"),i.on("click","a",function(){return i.hide(),!1}),$("body").append(i),i)},t.popTips=o});