define("index:widget/page/page.js",function(a,t,e){function s(a,t,e){if(a){this.container="object"==typeof a?a:$(a),this.page=1,this.pageCount=100,this.argName="pg",this.pagecap=4,this.callback=t,this.update=!0;var s={page:1,totalCount:100,pageCount:100,pagecap:4,argName:"pg",update:!0};e=e||s;for(var i in e)"undefined"!=typeof e[i]&&(this[i]=e[i]);this.render()}}$.extend(s.prototype,{render:function(){this.initialize(),this.bind()},initialize:function(){this.checkPages();var a=this.createHtml();this.container.html(a)},bind:function(){var a,t=this;$(".index-page").delegate("a","click",function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass("next-none")||(a=parseInt($(this).attr("data-page")),t.toPage(a))})},checkPages:function(){isNaN(parseInt(this.page))&&(this.page=1),isNaN(parseInt(this.pageCount))&&(this.pageCount=1),this.page<1&&(this.page=1),this.pageCount<1&&(this.pageCount=1),this.page>this.pageCount&&(this.page=this.pageCount),this.page=parseInt(this.page),this.pageCount=parseInt(this.pageCount)},getPage:function(){{var a=location.search,t=new RegExp("[?&]?"+this.argName+"=([^&]*)[&$]?","gi");a.match(t)}this.page=RegExp.$1},createHtml:function(){var a=[],t=this.page-1,e=this.page+1;if(a.push('<p class="index-page">'),1>t||(this.page>=this.pagecap&&a.push('<span><a href="javascript:void(0)" tid="toFirstPage" data-page="1" class="first-page">首页</a></span>'),a.push('<span><a href="javascript:void(0)" tid="toPrevPage" class="prev-page"  data-page="'+t+'" ><上一页</a></span>')),this.page<this.pagecap){if(this.page%this.pagecap==0)var s=this.page-this.pagecap-1;else var s=this.page-this.page%this.pagecap+1;var i=s+this.pagecap-1}else{var p=Math.floor(this.pagecap/2),g=this.pagecap%2-1;if(this.pageCount>this.page+p)var i=this.page+p,s=this.page-p-g;else var i=this.pageCount,s=this.page-p-g}if(this.page>this.pageCount-this.pagecap&&this.page>=this.pagecap)var s=this.pageCount-this.pagecap+1,i=this.pageCount;for(var h=s;i>=h;h++)if(h>0)if(h==this.page)a.push('<span class="cur-page">'+h+"</span>");else if(h>=1&&h<=this.pageCount){var n="";2==h&&(n="tid=secPageNum"),a.push('<span><a class="sel-page" data-page="'+h+'" href="javascript:void(0)" '+n+">"+h+"</a></span>")}return e>this.pageCount?a.push('<span><a href="javascript:void(0)" tid="toNextPage" class="next next-none">下一页&gt;</a></span>'):a.push('<span><a class="next-page" data-page="'+e+'" href="javascript:void(0)" tid="toNextPage" >下一页></a></span>'),a.push("</p>"),a.join("")},toPage:function(a){var t=a?a:1;"function"==typeof this.callback&&(this.callback(t),this.page=t),this.update&&this.render()}}),e.exports=s});